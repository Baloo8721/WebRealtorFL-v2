<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, viewport-fit=cover, maximum-scale=1.0, user-scalable=no">
  <title data-lang="title">Web3RealtorFL - Your Florida Property Match</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Roboto:wght@300;400;500;700&display=swap"
    rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    /* New form styles */
    .slider::-webkit-slider-thumb { 
      -webkit-appearance: none;
      appearance: none;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: #ffffff;
      border: 2px solid #26c6da;
      cursor: pointer;
      box-shadow: 0 0 8px rgba(0,0,0,0.3);
    }
    .checkbox-toggle { 
      display: none;
    }
    .checkbox-label {
      display: inline-flex;
      align-items: center;
      padding: 0.5rem 1rem;
      margin: 0.25rem;
      background: rgba(55, 65, 81, 0.5);
      border-radius: 0.25rem;
      cursor: pointer;
      transition: background 0.2s;
      word-wrap: break-word;
      overflow-wrap: break-word;
      hyphens: auto;
    }
    .checkbox-toggle:checked + .checkbox-label {
      background: #26c6da;
      color: white;
    }
    .checkbox-label:hover {
      background: rgba(75, 85, 99, 0.5);
      transform: scale(1.05);
      transition: transform 0.2s ease;
    }
    
    .sub-label {
      font-size: 0.8em;
      font-style: italic;
      color: #e0e6ed;
      margin-top: 2px;
      display: block;
    }
    
    @media (max-width: 768px) {
      .sub-label {
        font-size: 0.7em;
        line-height: 1.2;
        display: block;
        margin-top: 3px;
      }
      
      .full-width-mobile {
        flex-basis: auto !important;
        margin-top: 0 !important;
      }
      
      .full-width-mobile .checkbox-label {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        padding: 0.5rem 1rem;
        width: auto;
        margin: 0.25rem;
        min-height: 2.5rem;
      }
      
      .full-width-mobile .sub-label {
        font-size: 0.65em;
        line-height: 1.1;
        margin-top: 2px;
      }
    }
    
    .checkbox-label[title]:hover::after {
      content: attr(title);
      position: absolute;
      bottom: 100%;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(30, 40, 60, 0.9);
      color: #fff;
      padding: 5px 10px;
      border-radius: 4px;
      font-size: 0.8em;
      white-space: nowrap;
      z-index: 10;
      margin-bottom: 5px;
    }
    
    .checkbox-group {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      justify-content: flex-start;
      max-width: 100%;
      overflow-x: hidden;
    }
    
    .checkbox-group > div {
      flex: 0 0 auto;
      margin-right: 4px;
      margin-bottom: 8px;
      text-align: left;
    }
    
    /* Additional checkbox group styling */
    
    /* Mobile layout for specialty checkboxes */
    @media (max-width: 768px) {
      .checkbox-group {
        justify-content: center;
        padding: 0 5px;
        display: grid;
        grid-template-columns: repeat(3, auto);
        grid-gap: 5px;
      }
      
      /* First row - 3 items */
      .checkbox-group > div:nth-child(1),
      .checkbox-group > div:nth-child(2),
      .checkbox-group > div:nth-child(3) {
        grid-row: 1;
      }
      
      /* Second row - 3 items */
      .checkbox-group > div:nth-child(4),
      .checkbox-group > div:nth-child(5),
      .checkbox-group > div:nth-child(6) {
        grid-row: 2;
      }
      
      /* Third row - 2 items */
      .checkbox-group > div:nth-child(7),
      .checkbox-group > div:nth-child(8) {
        grid-row: 3;
        grid-column: span 1.5;
      }
      
      /* Property Management - full width */
      .checkbox-group > div:nth-child(9) {
        grid-row: 4;
        grid-column: 1 / span 3;
      }
      
      /* Items with sub-labels - full width */
      .checkbox-group > div:nth-child(10),
      .checkbox-group > div:nth-child(11),
      .checkbox-group > div:nth-child(12) {
        grid-column: 1 / span 3;
      }
      
      .checkbox-group > div label {
        font-size: 0.9em;
        padding: 6px 10px;
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        white-space: normal;
      }
      
      #specialties-section {
        overflow-x: hidden;
        max-width: 100%;
      }
    }
    
    .checkbox-group > div {
      flex: 0 0 auto;
      margin-right: 8px;
      margin-bottom: 8px;
      text-align: left;
    }
    .form-step {
      margin-bottom: 1.5rem;
    }
    #needToSellContainer, #needToBuyContainer, #needToSellRentContainer { 
      display: none;
      width: 100%;
      padding: 0 8px;
      margin: 10px 0;
    }
    @media (max-width: 640px) {
      .location-group { flex-direction: column; }
    }

    body {
      color: #fff;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      font-size: 0.95em;
      font-weight: 400;
      line-height: 1.5;
      padding: 60px 15px 30px 15px;
      text-align: center;
      position: relative;
      min-height: 100vh;
      overflow-x: hidden;
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      width: 100%;
      height: 100%;
      background: url('https://images.unsplash.com/photo-1600585154340-be6161a56a0c?q=80&w=2070&auto=format&fit=crop') no-repeat center center;
      background-size: cover;
      background-attachment: fixed;
      -webkit-background-size: cover;
      -webkit-transform: translateZ(0);
      transform: translateZ(0);
      z-index: -1;
      will-change: auto;
    }

    body::after {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      width: 100%;
      height: 100%;
      background: rgba(16, 27, 40, 0.6);
      backdrop-filter: blur(-1px);
      z-index: 0;
    }

    .container {
      max-width: 550px;
      margin: 0 auto;
      position: relative;
      z-index: 2;
    }

    .language-selector {
      position: fixed;
      top: 0;
      right: 0;
      z-index: 10;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(8px);
      padding: 10px 20px;
      border-radius: 0 0 0 20px;
      color: rgba(255, 255, 255, 0.5);
      font-size: 0.9em;
      cursor: pointer;
      border: 1px solid rgba(255, 255, 255, 0.15);
      touch-action: pan-y;
      -webkit-overflow-scrolling: touch;
    }

    .language-selector span {
      cursor: pointer;
      transition: color 0.3s ease;
    }

    .language-selector span:hover {
      color: #26c6da;
    }
    
    .language-dropdown .dropdown-section {
      margin: 4px 0;
    }
    
    .language-dropdown span {
      display: flex;
      align-items: center;
      padding: 8px 12px;
      cursor: pointer;
      color: #e2e8f0;
      transition: all 0.2s;
      border-radius: 4px;
      font-size: 0.9rem;
    }
    
    .language-dropdown span i {
      width: 20px;
      text-align: center;
    }
    
    .language-dropdown span:hover {
      background: linear-gradient(90deg, rgba(38, 198, 218, 0.15), rgba(100, 181, 246, 0.15));
      color: #64b5f6;
      transform: translateX(2px);
    }

    h1,
    h3,
    h4,
    .section-title,
    .form-group-title {
      font-family: 'Inter', sans-serif;
    }

    h1 {
      font-size: 2.8em;
      color: #26c6da;
      margin-bottom: 8px;
      font-weight: 500;
      letter-spacing: -0.015em;
      text-shadow: 0 2px 6px rgba(38, 198, 218, 0.4);
    }

    p.subtitle {
      font-size: 1.15em;
      color: #e0e6ed;
      font-weight: 300;
      letter-spacing: 0.02em;
      margin-bottom: 20px;
    }

    .form-box {
      background: rgba(30, 40, 60, 0.2);
      padding: 1.5rem;
      border-radius: 12px;
      border: 1px solid rgba(38, 198, 218, 0.2);
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
      margin-bottom: 1.5rem;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    form input,
    form textarea,
    form select {
      width: 100%;
      padding: 10px;
      margin: 8px 0;
      border: none;
      border-radius: 6px;
      background: rgba(255, 255, 255, 0.12);
      color: #fff;
      font-size: 1em;
      font-weight: 400;
      outline: none;
      transition: background 0.3s ease;
    }

    form input:focus,
    form textarea:focus,
    form select:focus {
      background: rgba(255, 255, 255, 0.18);
      border-color: #26c6da;
    }

    form input::placeholder,
    form textarea::placeholder {
      color: #d0d0d0;
      font-weight: 300;
    }
    
    /* Style for select placeholder text */
    .placeholder-select {
      color: #d0d0d0;
    }
    
    .placeholder-select option:not(:first-child) {
      color: white;
    }

    form textarea {
      height: 70px;
      resize: vertical;
    }

    form select {
      background: rgba(255, 255, 255, 0.12) url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" fill="white"><polygon points="0,0 8,0 4,8"/></svg>') no-repeat 95% center;
      appearance: none;
    }

    .dropdown-btn {
      width: 100%;
      padding: 12px;
      margin: 25px 0;
      background: transparent;
      color: #26c6da;
      border: 2px solid #26c6da;
      border-radius: 6px;
      font-size: 1em;
      font-weight: 400;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      justify-content: center;
      align-items: center;
      box-shadow: 0 4px 15px rgba(38, 198, 218, 0.4);
      text-align: center;
      position: relative;
      overflow: hidden;
      animation: pulse 2s infinite;
    }

    .dropdown-btn:hover {
      background: linear-gradient(to right, #26c6da, #0288d1);
      color: #fff;
      transform: scale(1.02);
      box-shadow: 0 6px 20px rgba(38, 198, 218, 0.5);
      animation: none;
    }

    .dropdown-btn:hover .dropdown-icon {
      transform: rotate(180deg);
    }

    .dropdown-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: 0.5s;
    }

    .dropdown-btn:hover::before {
      left: 100%;
    }

    @keyframes pulse {
      0% {
        box-shadow: 0 4px 15px rgba(38, 198, 218, 0.4);
      }

      50% {
        box-shadow: 0 4px 20px rgba(38, 198, 218, 0.6);
      }

      100% {
        box-shadow: 0 4px 15px rgba(38, 198, 218, 0.4);
      }
    }

    .submit-btn {
      padding: 12px;
      margin: 24px 0;
      background: linear-gradient(to right, #26c6da, #0288d1);
      color: #fff;
      border: 1px solid #26c6da;
      border-radius: 6px;
      font-size: 0.9em;
      cursor: pointer;
      transition: background 0.3s ease;
      display: flex;
      justify-content: center;
      align-items: center;
      box-shadow: 0 3px 12px rgba(38, 198, 218, 0.3);
      text-align: center;
      min-width: 200px;
      width: auto;
      margin-left: auto;
      margin-right: auto;
      font-weight: 600;
    }

    .submit-btn:hover {
      background: linear-gradient(to right, #0288d1, #01579b);
      border-color: #0288d1;
    }

    .dropdown-content {
      display: none;
      background: rgba(30, 40, 60, 0.95);
      padding: 15px;
      margin: 8px 0;
      border-radius: 8px;
      text-align: left;
      max-height: 350px;
      overflow-y: auto;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      backdrop-filter: blur(8px);
    }

    .dropdown-content h3 {
      font-size: 1.2em;
      color: #26c6da;
      margin-bottom: 20px;
      text-align: center;
      font-weight: 600;
      letter-spacing: 0.05em;
      text-transform: uppercase;
      opacity: 0.9;
    }

    .section {
      margin-bottom: 25px;
      padding: 18px;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
      transition: all 0.3s ease;
    }

    .section:nth-child(1) {
      background: linear-gradient(to right, rgba(35, 45, 65, 0.9), rgba(45, 55, 75, 0.9));
    }

    .section:nth-child(2) {
      background: linear-gradient(to right, rgba(40, 50, 70, 0.9), rgba(50, 60, 80, 0.9));
    }

    .section:nth-child(3) {
      background: linear-gradient(to right, rgba(45, 55, 75, 0.9), rgba(55, 65, 85, 0.9));
    }

    .section:nth-child(4) {
      background: linear-gradient(to right, rgba(50, 60, 80, 0.9), rgba(60, 70, 90, 0.9));
    }

    .section:nth-child(5) {
      background: linear-gradient(to right, rgba(55, 65, 85, 0.9), rgba(65, 75, 95, 0.9));
    }

    .section:nth-child(6) {
      background: linear-gradient(to right, rgba(60, 70, 90, 0.9), rgba(70, 80, 100, 0.9));
    }

    .section-title {
      font-size: 1.05em;
      color: #26c6da;
      margin-bottom: 18px;
      font-weight: 600;
      display: flex;
      align-items: center;
      letter-spacing: 0.03em;
      text-transform: uppercase;
    }

    .section-title::after {
      content: '';
      flex-grow: 1;
      height: 1px;
      background: rgba(255, 255, 255, 0.3);
      margin-left: 15px;
    }

    .form-group {
      margin-bottom: 12px;
    }

    .form-group-title {
      font-size: 0.88em;
      color: #e0e6ed;
      margin-bottom: 10px;
      font-weight: 500;
      letter-spacing: 0.04em;
      opacity: 0.9;
    }

    .checkbox-group {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 10px;
    }

    .checkbox-label {
      display: inline-flex;
      align-items: center;
      gap: 3px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 100%;
      cursor: pointer;
    }

    .checkbox-label span {
      flex-shrink: 0;
    }

    .checkbox-label input[type="checkbox"] {
      flex-shrink: 0;
      width: 14px;
      height: 14px;
      border: 1px solid rgba(255, 255, 255, 0.3);
      border-radius: 3px;
      background: rgba(0, 0, 0, 0.1);
      cursor: pointer;
    }

    .checkbox-label input[type="checkbox"]:checked {
      background: #26c6da;
      border-color: #26c6da;
    }

    .powered-by {
      color: #b0bec5;
      margin-top: 20px;
      text-decoration: none;
      transition: color 0.3s ease;
    }

    .powered-by:hover {
      color: #e0e6ed;
    }

    .popup {
      background: rgba(20, 25, 35, 0.85);
      backdrop-filter: blur(15px);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 1000;
      display: none;
      justify-content: center;
      align-items: center;
      animation: fadeIn 0.3s ease-out;
    }
    
    .popup-content {
      background: #1a1f2e;
      border-radius: 12px;
      width: 90%;
      max-width: 400px;
      padding: 40px 30px;
      text-align: center;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
      transform: translateY(20px);
      animation: slideUp 0.4s ease-out forwards;
      animation-delay: 0.1s;
      opacity: 0;
    }
    
    .popup-icon {
      font-size: 48px;
      color: #26c6da;
      margin-bottom: 20px;
    }
    
    .popup-title {
      font-family: 'Orbitron', sans-serif;
      font-size: 24px;
      font-weight: 500;
      margin: 0 0 15px 0;
      color: #fff;
    }
    
    .popup-message {
      color: #a0aec0;
      font-size: 16px;
      line-height: 1.5;
      margin: 0 0 30px 0;
    }
    
    .popup-button {
      background: linear-gradient(to right, #26c6da, #0288d1);
      border: none;
      border-radius: 6px;
      padding: 12px 30px;
      font-family: 'Orbitron', sans-serif;
      font-size: 14px;
      font-weight: 500;
      color: #fff;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .popup-button:hover {
      background: linear-gradient(to right, #0288d1, #01579b);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(38, 198, 218, 0.3);
    }
    
    .popup-button span {
      position: relative;
      z-index: 1;
    }
    
    @keyframes slideUp {
      from {
        transform: translateY(20px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    .section {
      animation: fadeIn 0.4s ease-in-out;
    }

    @keyframes fadeIn {
      from {
        opacity: 0.6;
        transform: translateY(5px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .language-selector .more-languages {
      position: relative;
      display: inline-block;
      cursor: pointer;
    }

    .language-selector .language-dropdown {
      display: none;
      position: absolute;
      right: 0;
      top: 100%;
      background: rgba(0, 0, 0, 0.8);
      border-radius: 5px;
      padding: 10px;
      min-width: 120px;
      z-index: 1000;
    }

    .language-selector .language-dropdown span {
      display: block;
      padding: 5px 0;
      color: #fff;
      cursor: pointer;
    }

    .language-selector .language-dropdown span:hover {
      color: #26c6da;
    }

    @media (min-width: 768px) {
      .language-selector .more-languages:hover .language-dropdown {
        display: block;
      }
    }

    .services-affiliates img {
      height: 40px;
      width: auto;
      display: block;
    }

    .services-affiliates .kw-logo {
      height: 60px;
      width: auto;
      display: block;
      margin-left: -60px;
    }

    .services-affiliates .kw-text {
      position: relative;
      left: -40px;
      width: 325px;
      transform: translateY(-10px);
      text-align: left;
    }

    .services-affiliates .propy-logo {
      height: 27px;
      width: auto;
      display: block;
      margin-left: 12px;
      margin-top: -5px;
      margin-bottom: 5px;
    }

    .services-affiliates .propy-text {
      position: relative;
      left: -40px;
      width: 325px;
      transform: translateY(-10px);
      text-align: left;
    }

    .services-affiliates {
      overflow: hidden;
    }

    .checkbox-wrapper {
      display: inline-flex;
      align-items: center;
      gap: 3px;
      flex-wrap: nowrap;
      white-space: nowrap;
      padding: 0;
      margin: 0;
      font-size: 0.9em;
      max-width: 100%;
      overflow: hidden;
    }

    .checkbox-wrapper span[data-lang] {
      order: 0;
      white-space: nowrap;
      flex-shrink: 0;
      margin: 0;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .checkbox-wrapper input[type="checkbox"] {
      order: 1;
      flex-shrink: 0;
      margin: 0;
    }

    @media (max-width: 768px) {
      .services-affiliates>div {
        flex-direction: column;
        align-items: center;
      }

      .services-affiliates>div>div {
        width: 100%;
        max-width: 300px;
        margin: 10px 0;
        height: auto;
        padding: 15px;
      }

      .services-affiliates .kw-logo {
        margin-left: 0;
      }

      .services-affiliates .propy-logo {
        margin-left: 0;
      }

      .services-affiliates .kw-text,
      .services-affiliates .propy-text {
        left: 0;
        width: 100%;
        transform: none;
        text-align: center;
      }
    }

    .web3-bold {
      font-weight: 700;
    }

    .chatbot-button {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, #26c6da, #0288d1);
      border-radius: 50%;
      box-shadow: 0 4px 15px rgba(38, 198, 218, 0.6);
      cursor: pointer;
      z-index: 100;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      border: none;
    }

    .chatbot-button:hover {
      transform: scale(1.05);
      box-shadow: 0 6px 20px rgba(38, 198, 218, 0.7);
    }

    .chatbot-button svg {
      width: 30px;
      height: 30px;
      fill: white;
    }

    @media (max-width: 768px) {
      .chatbot-button {
        width: 50px;
        height: 50px;
        bottom: 15px;
        right: 15px;
      }

      .chatbot-button svg {
        width: 25px;
        height: 25px;
      }
    }
    
    /* Autocomplete styles */
    .autocomplete-results {
      position: absolute;
      z-index: 10;
      background: rgba(30, 40, 60, 0.95);
      width: 100%;
      max-height: 200px;
      overflow-y: auto;
      overflow-x: hidden; /* Prevent horizontal scrolling */
      border-radius: 5px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
      display: none;
      margin-top: 2px;
      backdrop-filter: blur(5px);
      scrollbar-width: thin;
      scrollbar-color: rgba(38, 198, 218, 0.5) rgba(30, 40, 60, 0.5);
      white-space: nowrap; /* Keep text on one line */
      text-overflow: ellipsis; /* Add ellipsis for overflow */
    }
    
    .autocomplete-results::-webkit-scrollbar {
      width: 6px;
    }
    
    .autocomplete-results::-webkit-scrollbar-track {
      background: rgba(30, 40, 60, 0.5);
    }
    
    .autocomplete-results::-webkit-scrollbar-thumb {
      background-color: rgba(38, 198, 218, 0.5);
      border-radius: 3px;
    }
    
    .autocomplete-item {
      padding: 8px 12px;
      cursor: pointer;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      color: #e0e6ed;
      font-size: 0.9em;
      transition: all 0.2s ease;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      width: 100%;
      display: block;
    }
    
    .autocomplete-item:hover, .autocomplete-item.selected {
      background: linear-gradient(to right, rgba(38, 198, 218, 0.1), rgba(38, 198, 218, 0.3));
      transform: translateX(3px);
    }
    
    /* Quick selection styles */
    .location-quick-select {
      position: absolute;
      z-index: 10;
      background: rgba(30, 40, 60, 0.95);
      width: 100%;
      max-height: 250px;
      overflow-y: auto;
      overflow-x: hidden; /* Prevent horizontal scrolling */
      border-radius: 5px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
      display: none;
      margin-top: 2px;
      backdrop-filter: blur(5px);
      padding: 8px 0;
      scrollbar-width: thin;
      white-space: nowrap; /* Keep text on one line */
      text-overflow: ellipsis; /* Add ellipsis for overflow */
      scrollbar-color: rgba(38, 198, 218, 0.5) rgba(30, 40, 60, 0.5);
    }
    
    .location-quick-select::-webkit-scrollbar {
      width: 6px;
    }
    
    .location-quick-select::-webkit-scrollbar-track {
      background: rgba(30, 40, 60, 0.5);
    }
    
    .location-quick-select::-webkit-scrollbar-thumb {
      background-color: rgba(38, 198, 218, 0.5);
      border-radius: 3px;
    }
    
    .quick-select-title {
      padding: 5px 12px;
      color: rgba(38, 198, 218, 0.8);
      font-size: 0.8em;
      text-transform: uppercase;
      letter-spacing: 1px;
      font-weight: 500;
      border-bottom: 1px solid rgba(38, 198, 218, 0.3);
      margin-bottom: 5px;
    }
    
    .quick-select-item {
      padding: 8px 12px;
      cursor: pointer;
      color: #e0e6ed;
      font-size: 0.9em;
      display: flex;
      align-items: center;
      transition: all 0.2s ease;
    }
    
    .quick-select-item:hover {
      background: linear-gradient(to right, rgba(38, 198, 218, 0.1), rgba(38, 198, 218, 0.3));
      transform: translateX(3px);
    }
    
    .quick-select-item i {
      margin-right: 8px;
      color: rgba(38, 198, 218, 0.8);
      font-size: 0.9em;
    }
    
    /* Clear button animation */
    @keyframes pulse {
      0% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.7; transform: scale(1.1); }
      100% { opacity: 1; transform: scale(1); }
    }
    
    .pulse {
      animation: pulse 0.5s ease;
    }
    
    .back-button {
      padding: 5px 12px;
      cursor: pointer;
      color: rgba(255, 255, 255, 0.7);
      font-size: 0.85em;
      display: flex;
      align-items: center;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      margin-bottom: 5px;
    }
    
    .back-button:hover {
      color: rgba(38, 198, 218, 0.8);
    }
    
    .back-button i {
      margin-right: 5px;
    }
    /* About Button and Overlay Styles */
    .about-button {
      position: fixed;
      top: 10px;
      left: 20px;
      z-index: 1000;
      color: #a0aec0;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
    }
    
    .about-button:hover {
      color: #26c6da;
      transform: translateY(-1px);
    }
    
    .about-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.8);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      opacity: 0;
      transition: opacity 0.3s ease;
      overflow-y: auto;
      padding: 40px 0;
    }

    .crypto-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.8);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    .about-popup {
      position: relative;
      background: linear-gradient(135deg, rgba(25, 35, 55, 0.97), rgba(15, 25, 40, 0.97));
      color: #fff;
      padding: 40px;
      border-radius: 16px;
      max-width: 650px;
      width: 90%;
      max-height: 85vh;
      overflow-y: auto;
      z-index: 1001;
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.6);
      border: 1px solid rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
    }
    
    .crypto-popup {
      max-width: 700px; /* Slightly wider for educational content */
    }
    
    .read-time {
      color: #a0aec0;
      font-size: 14px;
      margin-top: -5px;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 5px;
    }
    
    /* About Popup Styling */
    .popup-header {
      text-align: center;
      margin-bottom: 25px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      padding-bottom: 20px;
    }
    
    .about-popup h2 {
      margin: 0;
      font-family: 'Orbitron', sans-serif;
      background: linear-gradient(90deg, #26c6da, #64ffda);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      font-size: 28px;
      letter-spacing: 0.5px;
    }
    
    .content-section {
      margin-bottom: 25px;
      padding: 20px;
      background: rgba(255, 255, 255, 0.03);
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.05);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    .content-section:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
    }
    
    .intro-section {
      font-size: 17px;
      line-height: 1.6;
      color: #e2e8f0;
    }
    
    .section-icon {
      margin-right: 8px;
      font-size: 20px;
    }
    
    .about-popup h3 {
      margin-top: 0;
      margin-bottom: 15px;
      color: #26c6da;
      font-size: 20px;
      display: flex;
      align-items: center;
    }
    
    .steps-container {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 15px;
    }
    
    .step-item {
      display: flex;
      align-items: flex-start;
      gap: 12px;
    }
    
    .step-number {
      background: linear-gradient(135deg, #26c6da, #64ffda);
      color: #0f172a;
      width: 28px;
      height: 28px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 16px;
      flex-shrink: 0;
    }
    
    .benefits-list {
      padding-left: 20px;
      margin-top: 15px;
    }
    
    .benefits-list li {
      margin-bottom: 10px;
      position: relative;
      padding-left: 5px;
    }
    
    .benefits-list li::before {
      content: '•';
      color: #26c6da;
      font-size: 18px;
      position: absolute;
      left: -15px;
    }
    
    .disclaimer-section {
      background: rgba(38, 198, 218, 0.05);
      border-color: rgba(38, 198, 218, 0.1);
    }
    
    .disclaimer {
      font-size: 14px;
      color: #a0aec0;
      font-style: italic;
      margin: 0;
    }
    
    .close-button {
      position: absolute;
      top: 15px;
      right: 15px;
      background: none;
      border: none;
      color: #a0aec0;
      font-size: 28px;
      cursor: pointer;
      padding: 0;
      line-height: 1;
      transition: color 0.2s ease;
      z-index: 1002;
    }
    
    .close-button:hover {
      color: #e2e8f0;
    }

    .about-content {
      font-size: 14px;
      line-height: 1.6;
    }
    
    .about-content p {
      margin: 0 0 12px 0;
      line-height: 1.5;
      font-size: 14px;
      color: #e0e6ed;
    }
    
    .about-content p:last-child {
      margin-bottom: 0;
    }
    
    @media (max-width: 768px) {
      .about-button {
        top: 15px;
        left: 15px;
        padding: 6px 12px;
        font-size: 13px;
      }
      
      .about-popup {
        width: 95%;
      }
      
      .about-header h3 {
        font-size: 16px;
      }
      
      .about-content p {
        font-size: 13px;
      }
    }
  </style>
</head>

<body>
  
  <!-- About Popup Overlay -->
  <div id="about-overlay" class="about-overlay">
    <div class="about-popup">
      <button id="close-about" class="close-button">&times;</button>
      <div class="popup-header" style="position: relative; z-index: 1;">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="#26c6da" stroke-width="1.5" style="width: 40px; height: 40px; margin-bottom: 15px;">
          <path d="M12 2L2 7l10 5 10-5-10-5z" stroke="#26c6da" fill="rgba(38, 198, 218, 0.1)"/>
          <path d="M2 17l10 5 10-5" stroke="#26c6da" stroke-linecap="round"/>
          <path d="M2 12l10 5 10-5" stroke="#26c6da" stroke-linecap="round"/>
        </svg>
        <h2>About Web3RealtorFL</h2>
      </div>
      <div class="about-content">
        <div class="content-section intro-section">
          <p>Web3RealtorFL connects you with expert real estate agents specializing in your unique needs across Florida. Our platform leverages both human expertise and cutting-edge technology to find your perfect agent match.</p>
        </div>
        
        <div class="content-section">
          <h3><span class="section-icon">🚀</span> Our Mission</h3>
          <p>To revolutionize real estate agent matching by combining professional human expertise with advanced Web3 technology, ensuring every client finds their ideal agent partner.</p>
        </div>
        
        <div class="content-section">
          <h3><span class="section-icon">🔄</span> How It Works</h3>
          <div class="steps-container">
            <div class="step-item">
              <div class="step-number">1</div>
              <p>Fill out our simple form with your real estate needs</p>
            </div>
            <div class="step-item">
              <div class="step-number">2</div>
              <p>Our system matches you with specialized agents</p>
            </div>
            <div class="step-item">
              <div class="step-number">3</div>
              <p>Connect with your matched agents within 24 hours</p>
            </div>
            <div class="step-item">
              <div class="step-number">4</div>
              <p>Choose the best fit for your real estate journey</p>
            </div>
          </div>
        </div>
        
        <div class="content-section">
          <h3><span class="section-icon">✅</span> Why Choose Us</h3>
          <ul class="benefits-list">
            <li>Free, no-obligation service</li>
            <li>Specialized agent matching based on your unique needs</li>
            <li>Web3 technology for secure, transparent transactions</li>
            <li>Expert human oversight of all matches</li>
            <li>Extensive network of qualified Florida agents</li>
          </ul>
        </div>
        
        <div class="content-section disclaimer-section">
          <p class="disclaimer">Web3RealtorFL is a free service for home buyers and sellers. Our partner agents pay a referral fee only when a transaction closes successfully.</p>
        </div>
        
        <div class="content-section" style="background: rgba(38, 198, 218, 0.05); border-color: rgba(38, 198, 218, 0.1);">
          <h3><span class="section-icon">📚</span> Want to Learn More?</h3>
          <p>If you would like to learn more about real estate, cryptocurrency, DeFi, NFTs, and other blockchain technologies, please visit our upcoming comprehensive Blockchain 101 learning site. It will provide in-depth information about Web3 technologies and their applications in real estate.</p>
          <div style="text-align: center; margin-top: 15px;">
            <a href="https://baloo8721.github.io/Web3-Real-Estate-Calculator/" target="_blank" style="display: inline-block; background: linear-gradient(135deg, #26c6da, #64ffda); color: #0f172a; text-decoration: none; padding: 8px 20px; border-radius: 20px; font-weight: 500; box-shadow: 0 4px 8px rgba(0,0,0,0.1); transition: all 0.3s ease;">
              <span style="display: flex; align-items: center; gap: 8px;">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 16px; height: 16px;">
                  <path d="M5 12h14M12 5l7 7-7 7"/>
                </svg>
                Explore Blockchain 101
              </span>
            </a>
          </div>
        </div>
        
        <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 30px;">
          <div style="display: flex; gap: 5px;">
            
            <!-- Calculator Button -->
            <a href="https://baloo8721.github.io/Web3-Real-Estate-Calculator/" target="_blank" style="text-decoration: none; display: flex; flex-direction: column; align-items: center; width: 100px;">
              <div class="tool-button" style="width: 60px; height: 60px; margin-bottom: 8px;">
                <div class="button-glow"></div>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="#26c6da" stroke-width="1.5" class="tool-icon" style="width: 30px; height: 30px;">
                  <rect x="4" y="3" width="16" height="18" rx="2" stroke="#26c6da" fill="rgba(38, 198, 218, 0.1)"/>
                  <line x1="8" y1="7" x2="16" y2="7" stroke="#26c6da" stroke-linecap="round"/>
                  <line x1="8" y1="11" x2="10" y2="11" stroke="#26c6da" stroke-linecap="round"/>
                  <line x1="14" y1="11" x2="16" y2="11" stroke="#26c6da" stroke-linecap="round"/>
                  <line x1="8" y1="15" x2="10" y2="15" stroke="#26c6da" stroke-linecap="round"/>
                  <line x1="14" y1="15" x2="16" y2="15" stroke="#26c6da" stroke-linecap="round"/>
                </svg>
              </div>
              <div style="font-size: 12px; color: #26c6da; text-align: center;">Calculator</div>
            </a>
            
            <!-- 3D Virtual Office Button -->
            <a href="https://spatial.io" target="_blank" style="text-decoration: none; display: flex; flex-direction: column; align-items: center; width: 100px;">
              <div class="tool-button" style="width: 60px; height: 60px; margin-bottom: 8px;">
                <div class="button-glow"></div>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="#26c6da" stroke-width="1.5" class="tool-icon" style="width: 30px; height: 30px;">
                  <path d="M12 3L4 7v10l8 4 8-4V7l-8-4z" stroke="#26c6da" fill="rgba(38, 198, 218, 0.1)"/>
                  <path d="M12 3v8l8 4" stroke="#26c6da" stroke-linecap="round"/>
                  <path d="M12 11l-8 4" stroke="#26c6da" stroke-linecap="round"/>
                  <path d="M4 7l8 4 8-4" stroke="#26c6da" stroke-linecap="round"/>
                </svg>
              </div>
              <div style="font-size: 12px; color: #26c6da; text-align: center;">3D Office</div>
            </a>
          </div>
          
          <button class="select-done" id="about-done">Done</button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Learn Crypto Popup Overlay -->
  <div id="crypto-overlay" class="about-overlay">
    <div class="about-popup crypto-popup">
      <button id="close-crypto" class="close-button">&times;</button>
      <div class="popup-header">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="#f7931a" stroke-width="1.5" style="width: 40px; height: 40px; margin-bottom: 15px;">
          <circle cx="12" cy="12" r="9" stroke="#f7931a" fill="rgba(247, 147, 26, 0.1)"/>
          <path d="M9.5 10h4.5a2 2 0 0 0 0-4h-2v2h-2.5" stroke="#f7931a" stroke-linecap="round"/>
          <path d="M9.5 14h5a2 2 0 0 0 0-4h-5" stroke="#f7931a" stroke-linecap="round"/>
          <line x1="12" y1="6" x2="12" y2="18" stroke="#f7931a" stroke-linecap="round"/>
        </svg>
        <h2>Understanding Cryptocurrency & Blockchain</h2>
      </div>
      <p class="read-time"><i class="far fa-clock"></i> 3 minute read</p>
      <div class="about-content">
      <div class="content-section intro-section">
        <h3><span class="section-icon">💰</span> What is Cryptocurrency?</h3>
        <p>Cryptocurrency is digital money that uses encryption to secure transactions and control the creation of new units. Unlike traditional currency, it operates independently of central banks and governments.</p>
        
        <p>The most well-known cryptocurrency is Bitcoin (₿), created in 2009 by an anonymous person or group using the pseudonym Satoshi Nakamoto. Today, thousands of cryptocurrencies exist, each with different features and purposes.</p>
      </div>
      
      <div class="content-section">
        <h3><span class="section-icon">🔗</span> How Blockchain Works</h3>
        <p>Blockchain is the technology that powers cryptocurrencies. Think of it as a digital ledger that records all transactions across a network of computers. Once information is recorded, it cannot be altered without changing all subsequent blocks, making it highly secure.</p>
        
        <p>Key blockchain features:</p>
        <ul class="benefits-list">
          <li><strong>Decentralized:</strong> No single entity controls it</li>
          <li><strong>Transparent:</strong> Anyone can view the entire transaction history</li>
          <li><strong>Immutable:</strong> Once recorded, data cannot be changed</li>
          <li><strong>Secure:</strong> Uses advanced cryptography to protect information</li>
        </ul>
      </div>
      
      <div class="content-section">
        <h3><span class="section-icon">₿</span> Cryptocurrency Units</h3>
        <p>Bitcoin can be divided into smaller units:</p>
        <ul class="benefits-list">
          <li>1 Bitcoin (₿) = 100,000,000 Satoshis</li>
          <li>Satoshi is the smallest unit, named after Bitcoin's creator</li>
          <li>Other cryptocurrencies have their own units (Ether for Ethereum, etc.)</li>
        </ul>
      </div>
      
      <div class="content-section">
        <h3><span class="section-icon">🌐</span> Real-World Applications</h3>
        <p>Beyond digital currency, blockchain technology is being used for:</p>
        <ul class="benefits-list">
          <li><strong>Real Estate:</strong> Property records and transactions</li>
          <li><strong>Healthcare:</strong> Secure medical record sharing</li>
          <li><strong>Supply Chain:</strong> Tracking products from origin to consumer</li>
          <li><strong>Digital Identity:</strong> Secure, self-sovereign identity management</li>
          <li><strong>NFTs:</strong> Digital ownership of art, music, and collectibles</li>
        </ul>
      </div>
      
      <div class="content-section">
        <h3><span class="section-icon">🚀</span> Getting Started</h3>
        <p>To begin using cryptocurrency:</p>
        <div class="steps-container">
          <div class="step-item">
            <div class="step-number">1</div>
            <p>Create a digital wallet (software, mobile app, or hardware device)</p>
          </div>
          <div class="step-item">
            <div class="step-number">2</div>
            <p>Purchase cryptocurrency through an exchange</p>
          </div>
          <div class="step-item">
            <div class="step-number">3</div>
            <p>Secure your private keys (never share these with anyone)</p>
          </div>
          <div class="step-item">
            <div class="step-number">4</div>
            <p>Start with small amounts until you're comfortable</p>
          </div>
        </div>
      </div>
      
      <div class="content-section">
        <h3><span class="section-icon">🔮</span> The Future of Money</h3>
        <p>Cryptocurrency and blockchain technology represent a fundamental shift in how we think about money, ownership, and trust. As adoption grows, we're likely to see integration with traditional financial systems, government-issued digital currencies, and blockchain becoming as commonplace as the internet.</p>
      </div>
      
      <div class="content-section" style="background: linear-gradient(135deg, rgba(247, 147, 26, 0.05), rgba(130, 71, 229, 0.05));">
        <h3><span class="section-icon">🌐</span> Understanding Web3</h3>
        <p>Web3 represents the next evolution of the internet, built on decentralized technologies like blockchain. Unlike Web2 (the current internet dominated by centralized platforms), Web3 aims to give users control over their data, digital identity, and online assets.</p>
        
        <p>Key components of Web3 include:</p>
        <ul class="benefits-list">
          <li><strong>Decentralization:</strong> Removing central authorities and intermediaries</li>
          <li><strong>Blockchain & Cryptocurrency:</strong> The foundation for trustless transactions and ownership</li>
          <li><strong>Smart Contracts:</strong> Self-executing agreements that enable decentralized applications (dApps)</li>
          <li><strong>Digital Ownership:</strong> True ownership of digital assets through NFTs and tokens</li>
        </ul>
      </div>
      
      <div class="content-section disclaimer-section">
        <p class="disclaimer">This information is educational only and not financial advice. Cryptocurrency investments involve risk. Do your own research before investing.</p>
      </div>
      
      <div class="content-section" style="background: rgba(247, 147, 26, 0.05); border-color: rgba(247, 147, 26, 0.1);">
        <h3><span class="section-icon">📚</span> Want to Learn More?</h3>
        <p>If you would like to learn more about real estate, cryptocurrency, DeFi, NFTs, and other blockchain technologies, please visit our upcoming comprehensive Blockchain 101 learning site. It will provide more in-depth information beyond this 3-minute introduction.</p>
        <div style="text-align: center; margin-top: 15px;">
          <a href="https://baloo8721.github.io/Web3-Real-Estate-Calculator/" target="_blank" style="display: inline-block; background: linear-gradient(135deg, #f7931a, #ffb347); color: #0f172a; text-decoration: none; padding: 8px 20px; border-radius: 20px; font-weight: 500; box-shadow: 0 4px 8px rgba(0,0,0,0.1); transition: all 0.3s ease;">
            <span style="display: flex; align-items: center; gap: 8px;">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 16px; height: 16px;">
                <path d="M5 12h14M12 5l7 7-7 7"/>
              </svg>
              Explore Blockchain 101
            </span>
          </a>
        </div>
      </div>
      
      <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 30px;">
        <div style="display: flex; gap: 5px;">
          
          <!-- Calculator Button -->
          <a href="https://baloo8721.github.io/Web3-Real-Estate-Calculator/" target="_blank" style="text-decoration: none; display: flex; flex-direction: column; align-items: center; width: 100px;">
            <div class="tool-button" style="width: 60px; height: 60px; margin-bottom: 8px;">
              <div class="button-glow"></div>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="#26c6da" stroke-width="1.5" class="tool-icon" style="width: 30px; height: 30px;">
                <rect x="4" y="3" width="16" height="18" rx="2" stroke="#26c6da" fill="rgba(38, 198, 218, 0.1)"/>
                <line x1="8" y1="7" x2="16" y2="7" stroke="#26c6da" stroke-linecap="round"/>
                <line x1="8" y1="11" x2="10" y2="11" stroke="#26c6da" stroke-linecap="round"/>
                <line x1="14" y1="11" x2="16" y2="11" stroke="#26c6da" stroke-linecap="round"/>
                <line x1="8" y1="15" x2="10" y2="15" stroke="#26c6da" stroke-linecap="round"/>
                <line x1="14" y1="15" x2="16" y2="15" stroke="#26c6da" stroke-linecap="round"/>
              </svg>
            </div>
            <div style="font-size: 12px; color: #26c6da; text-align: center;">Calculator</div>
          </a>
          
          <!-- 3D Virtual Office Button -->
          <a href="https://spatial.io" target="_blank" style="text-decoration: none; display: flex; flex-direction: column; align-items: center; width: 100px;">
            <div class="tool-button" style="width: 60px; height: 60px; margin-bottom: 8px;">
              <div class="button-glow"></div>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="#26c6da" stroke-width="1.5" class="tool-icon" style="width: 30px; height: 30px;">
                <path d="M12 3L4 7v10l8 4 8-4V7l-8-4z" stroke="#26c6da" fill="rgba(38, 198, 218, 0.1)"/>
                <path d="M12 3v8l8 4" stroke="#26c6da" stroke-linecap="round"/>
                <path d="M12 11l-8 4" stroke="#26c6da" stroke-linecap="round"/>
                <path d="M4 7l8 4 8-4" stroke="#26c6da" stroke-linecap="round"/>
              </svg>
            </div>
            <div style="font-size: 12px; color: #26c6da; text-align: center;">3D Office</div>
          </a>
        </div>
        
        <button class="select-done" id="crypto-done">Done</button>
      </div>
    </div>
  </div>
</div>
  
  <div class="language-selector">
    <span onclick="changeLanguage('en')">English</span> |
    <span onclick="changeLanguage('es')">Español</span> |
    <span onclick="changeLanguage('zh')">中文</span> |
    <span onclick="changeLanguage('ar')">العربية</span> |
    <span class="more-languages">
      More ▼
      <div class="language-dropdown" style="display: none; position: absolute; background: rgba(30, 40, 60, 0.95); padding: 10px; border-radius: 8px; margin-top: 5px; z-index: 100; min-width: 180px; box-shadow: 0 4px 12px rgba(0,0,0,0.2);">
        <div class="dropdown-section">
          <span onclick="changeLanguage('ru')">Русский</span>
          <span onclick="changeLanguage('pt')">Português</span>
          <span onclick="changeLanguage('fr')">Français</span>
          <span onclick="changeLanguage('it')">Italiano</span>
          <span onclick="changeLanguage('de')">Deutsch</span>
          <span onclick="changeLanguage('ja')">日本語</span>
          <span onclick="changeLanguage('sv')">Svenska</span>
          <span onclick="changeLanguage('ko')">한국어</span>
        </div>
        <div style="height: 1px; background: rgba(255,255,255,0.1); margin: 8px 0;"></div>
        <div class="dropdown-section">
          <span onclick="document.getElementById('about-overlay').style.display = 'flex'; setTimeout(function() { document.getElementById('about-overlay').style.opacity = '1'; }, 10); closeAllLanguageDropdowns();">
            <i class="fas fa-info-circle" style="margin-right: 8px;"></i>About
          </span>
          <span onclick="window.open('https://baloo8721.github.io/Web3-Real-Estate-Calculator/', '_blank')">
            <i class="fas fa-calculator" style="margin-right: 8px;"></i>Calculator
          </span>
          <span onclick="window.open('https://www.spatial.io/', '_blank'); closeAllLanguageDropdowns();">
            <i class="fas fa-video" style="margin-right: 8px;"></i>Virtual Office
          </span>
          <span onclick="document.getElementById('chatbotButton').click(); closeAllLanguageDropdowns();">
            <i class="fas fa-robot" style="margin-right: 8px;"></i>Chat A.I.
          </span>
          <span onclick="document.getElementById('crypto-overlay').style.display = 'flex'; setTimeout(function() { document.getElementById('crypto-overlay').style.opacity = '1'; }, 10); closeAllLanguageDropdowns();">
            <i class="fas fa-bitcoin-sign" style="margin-right: 8px;"></i>Learn Crypto
          </span>
          <a href="https://baloo8721.github.io/Web3-Real-Estate-Calculator/" target="_blank" style="display: block; padding: 8px 12px; color: #e2e8f0; text-decoration: none; transition: all 0.2s ease; border-radius: 4px;" onmouseover="this.style.background='rgba(38, 198, 218, 0.1)'" onmouseout="this.style.background='transparent'" onclick="closeAllLanguageDropdowns()">
            <i class="fas fa-link" style="margin-right: 8px; color: #26c6da;"></i>Blockchain 101
          </a>
        </div>
      </div>
    </span>
  </div>

  <div class="container">
    <h1 data-lang="title" style="font-size: 1.76rem; font-weight: 500; line-height: 1.2;">Unlock Your Florida Property</h1>
    <p class="subtitle" data-lang="subtitle">Free, Fast Agent Matches Powered by Licensed <span class="web3-bold">Experts</span>, <span class="web3-bold">A.I</span> & <span class="web3-bold">Web3</span></p>
    <div class="form-box" style="position: relative;">
      <!-- About Button -->
      <a id="about-button" style="position: absolute; top: 5px; right: 15px; color: #a0aec0; font-size: 12px; cursor: pointer; z-index: 100; text-align: right;" onclick="document.getElementById('about-overlay').style.display = 'flex'; setTimeout(function() { document.getElementById('about-overlay').style.opacity = '1'; }, 10);">
        <i class="fas fa-info-circle"></i> About
      </a>
      <form id="referralForm" onsubmit="submitToSupabase(event)">

        <!-- Basic Information Fields -->
        <div class="form-step" style="margin-bottom: 8px;">
          <input type="text" id="name" name="name" class="w-full p-2 border rounded bg-gray-700 text-white" placeholder="Name" required>
        </div>
        
        <div class="form-step" style="margin-bottom: 8px;">
          <input type="email" id="email" name="email" class="w-full p-2 border rounded bg-gray-700 text-white" placeholder="Email" required>
        </div>
        
        <div class="form-step" style="margin-bottom: 8px;">
          <input type="tel" id="phone" name="phone" class="w-full p-2 border rounded bg-gray-700 text-white" placeholder="Phone (Optional)">
        </div>
        
        <div id="budget-form-step" class="form-step" style="margin-top: 20px; padding: 15px; border-radius: 8px; background-color: rgba(26, 32, 44, 0.5); position: relative;">
          <div class="text-sm text-white mb-2">Location (From → To)</div>
          <div class="flex flex-row" style="display: flex !important; flex-direction: row !important; justify-content: space-between;">
            <div style="width: 47%; position: relative;">
              <input type="text" id="currentLocation" name="currentLocation" class="w-full p-2 border rounded bg-gray-700 text-white" placeholder="Current Home" required autocomplete="off">
              <div id="currentLocationResults" class="autocomplete-results"></div>
              <div id="currentLocationQuickSelect" class="location-quick-select"></div>
            </div>
            <div style="width: 47%; position: relative;">
              <input type="text" id="desiredLocation" name="desiredLocation" class="w-full p-2 border rounded bg-gray-700 text-white" placeholder="Desired Move" required autocomplete="off">
              <div id="desiredLocationResults" class="autocomplete-results"></div>
              <div id="desiredLocationQuickSelect" class="location-quick-select"></div>
            </div>
          </div>
          <div class="mt-1 text-center">
            <span style="font-size: 11px; color: #666666; font-style: italic;">Map data © <a href="https://www.openstreetmap.org/copyright" target="_blank" style="color: #666666; text-decoration: none;">OpenStreetMap</a></span>
          </div>
        </div>
        
        <div class="form-step" style="margin-bottom: 8px;">
          <select id="clientType" name="clientType" class="w-full p-2 border rounded bg-gray-700 placeholder-select" required>
            <option value="" disabled selected style="color: #d0d0d0; font-weight: 300;">Client Type</option>
            <option value="Buyer">🏠 Buyer</option>
            <option value="Seller">📈 Seller</option>
            <option value="Investor">💰 Investor</option>
            <option value="Renter">🔑 Renter</option>
          </select>
        </div>
        
        <div class="form-step" style="margin-bottom: 8px;">
          <select id="propertyType" name="propertyType" class="w-full p-2 border rounded bg-gray-700 placeholder-select" required>
            <option value="" disabled selected style="color: #d0d0d0; font-weight: 300;">Property Type</option>
            <option value="Single-family">🏠 Single-family</option>
            <option value="Condo">🏢 Condo</option>
            <option value="Townhouse">🏡 Townhouse</option>
            <option value="Multi-family">🏘️ Multi-family</option>
            <option value="Commercial">🏬 Commercial</option>
            <option value="Land">🌳 Land</option>
            <option value="Vacation/Second Home">🏖️ Vacation/Second Home</option>
            <option value="Senior Living">👴 Senior Living</option>
            <option value="Farm/Ranch">🚜 Farm/Ranch</option>
            <option value="Historic Property">🏛️ Historic Property</option>
            <option value="Planned Urban Development">🏙️ PUD</option>
          </select>
        </div>
        
        <div id="budget-form-step" class="form-step" style="margin-top: 20px; padding: 15px; border-radius: 8px; background-color: rgba(26, 32, 44, 0.5); position: relative;">
          <div class="text-sm text-white mb-3">Budget/Price ($)</div>
          <div style="display: flex; flex-direction: row; align-items: center; justify-content: space-between; flex-wrap: wrap;">
            <!-- Left side: Slider and output -->
            <div style="flex: 1 1 300px; min-width: 250px;">
              <input type="range" id="budget" name="budget" min="100000" max="3000000" step="25000" value="300000" class="slider" style="width: 100%; background: linear-gradient(90deg, #26c6da 0%, #64b5f6 50%, #ab47bc 100%); height: 6px; border-radius: 3px; appearance: none; outline: none;" oninput="updateBudgetVisualization(this.value)" data-component-name="<input />">
              
              <div style="display: flex; justify-content: space-between; margin-top: 8px;" data-component-name="<div />">
                <span style="font-size: 12px; color: #26c6da;">$100k</span>
                <div style="display: flex; align-items: center; gap: 8px;">
                  <output id="budget-output" for="budget" style="font-size: 18px; font-weight: 600; color: #ffffff; text-shadow: 0 0 10px rgba(38, 198, 218, 0.5); cursor: pointer;" onclick="enableDirectBudgetInput()" data-component-name="<output />">$300,000</output>
                  <input type="text" id="budget-direct-input" style="display: none; font-size: 18px; font-weight: 600; color: #ffffff; background: transparent; border: none; border-bottom: 1px solid #26c6da; width: 120px; text-align: center; outline: none;" onblur="applyDirectBudgetInput()" onkeydown="handleBudgetInputKeydown(event)" />
                  <span style="font-size: 18px; color: #f7931a; font-weight: 600; position: relative;">
                    <span id="btc-amount" style="cursor: pointer;" title="Click to edit BTC amount" onclick="makeBtcEditable()"></span>
                  </span>
                </div>
                <span style="font-size: 12px; color: #ab47bc;">$3M+</span>
              </div>
              
              <!-- Payment Estimate -->
              <div id="payment-estimate" style="margin-top: 15px; background-color: rgba(38, 198, 218, 0.1); border-radius: 6px; padding: 10px; border-left: 3px solid #26c6da;">
                <div style="position: relative; text-align: center; margin-bottom: 0px;">
                  <div style="font-size: 14px; color: #ffffff;">Estimated Monthly Payment</div>
                  <div style="font-size: 12px; color: #a0aec0; text-align: center;">30yr fixed @ 7.0%</div>
                </div>
                <div style="position: relative; margin-bottom: 10px; margin-top: 5px;">
                  <div style="display: flex; align-items: center; justify-content: center; width: 100%;" data-component-name="<div />">
                    <span id="type-hint" style="font-size: 12px; color: #a0aec0; margin-right: 5px; opacity: 0.7; cursor: pointer; transition: opacity 0.2s;" title="Click to edit">✏️</span>
                    <div id="monthly-payment" style="font-size: 20px; font-weight: 600; color: #26c6da; text-align: center;">$2,532</div>
                    <span style="font-size: 11px; color: #f7931a; font-weight: 600; position: relative; margin-left: 8px;">
                      <span id="sats-amount" style="cursor: pointer;" title="Click to edit Satoshi amount" onclick="makeSatsEditable()"></span>
                    </span>
                  </div>
                </div>
                <div id="payment-breakdown" style="margin-top: 0px; font-size: 11px; color: #a0aec0; line-height: 1.3;">
                  Includes principal & interest, property tax (0.82%), PMI (1%), and insurance. Based on 5% down payment.
                  <button id="show-details" style="background: none; border: none; color: #26c6da; padding: 0; font-size: 11px; cursor: pointer; text-decoration: underline; display: inline-flex; align-items: center;" type="button" onclick="event.preventDefault();"><span id="toggle-icon" style="margin-right: 3px;">▶</span> Show breakdown</button>
                </div>
                <div id="payment-details" style="display: none; margin-top: 8px; font-size: 11px; color: #a0aec0;">
                  <div style="display: flex; justify-content: space-between; margin-bottom: 2px;">
                    <span>Principal & Interest:</span>
                    <span id="pi-amount">$1,330</span>
                  </div>
                  <div style="display: flex; justify-content: space-between; margin-bottom: 2px;">
                    <span>Property Tax (0.82%):</span>
                    <span id="tax-amount">$375</span>
                  </div>
                  <div style="display: flex; justify-content: space-between; margin-bottom: 2px;">
                    <span>PMI (1%):</span>
                    <span id="pmi-amount">$208</span>
                  </div>
                  <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                    <span>Insurance:</span>
                    <span id="insurance-amount">$110</span>
                  </div>
                  
                  <!-- Chart visualization inside payment details -->
                  <div style="display: flex; justify-content: center; margin-top: 15px;">
                    <div style="width: 100%; height: 120px;">
                      <canvas id="budgetChart"></canvas>
                    </div>
                  </div>
                  
                  <div id="calculator-link" style="margin-top: 15px; display: flex; justify-content: space-between; align-items: center; border-top: 1px solid rgba(255, 255, 255, 0.1); padding-top: 10px;">
                     <div style="font-size: 11px; color: #a0aec0;">
                      Need more calculations? Try our Advanced <a href="https://baloo8721.github.io/Web3-Real-Estate-Calculator/" target="_blank" style="color: #26c6da; text-decoration: underline;">Real Estate and Crypto Calculator</a> for Clients, Agents and Investors
                    </div>
                    
                    <style>
                      .calc-button:hover {
                        background-color: rgba(38, 198, 218, 0.2);
                        transform: scale(1.05);
                        box-shadow: 0 0 8px rgba(38, 198, 218, 0.3);
                      }
                    </style>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Chart visualization removed from here -->
          </div>
        </div>
        
        <script>
          // Initialize the budget chart
          let budgetChart;
          
          // Add calculator button to the correct budget form step div (the one with Budget/Price)
          document.addEventListener('DOMContentLoaded', function() {
            // Find the div that contains 'Budget/Price'
            const formSteps = document.querySelectorAll('.form-step');
            let budgetFormStep = null;
            
            for (const step of formSteps) {
              if (step.textContent.includes('Budget/Price')) {
                budgetFormStep = step;
                break;
              }
            }
            
            if (budgetFormStep) {
              // Make sure it has position: relative
              if (getComputedStyle(budgetFormStep).position !== 'relative') {
                budgetFormStep.style.position = 'relative';
              }
              
              // Create container for button and text
              const calcContainer = document.createElement('div');
              calcContainer.style.position = 'absolute';
              calcContainer.style.right = '10px';
              calcContainer.style.top = '10px';
              calcContainer.style.zIndex = '100';
              calcContainer.style.display = 'flex';
              calcContainer.style.alignItems = 'center';
              calcContainer.style.gap = '5px';
              
              // Create Open text link
              const openLink = document.createElement('a');
              openLink.href = 'https://baloo8721.github.io/Web3-Real-Estate-Calculator/';
              openLink.target = '_blank';
              openLink.style.textDecoration = 'underline';
              openLink.style.color = '#26c6da';
              openLink.style.fontSize = '12px';
              openLink.style.fontWeight = '400';
              openLink.style.transition = 'all 0.2s ease';
              openLink.textContent = 'Open';
              openLink.style.marginRight = '2px';
              openLink.addEventListener('mouseover', function() {
                this.style.color = '#64b5f6';
              });
              openLink.addEventListener('mouseout', function() {
                this.style.color = '#26c6da';
              });
              
              // Create calculator button with tooltip
              const calcButton = document.createElement('div');
              calcButton.style.position = 'relative';
              calcButton.style.display = 'inline-block';
              
              const buttonLink = document.createElement('a');
              buttonLink.href = 'https://baloo8721.github.io/Web3-Real-Estate-Calculator/';
              buttonLink.target = '_blank';
              buttonLink.style.textDecoration = 'none';
              
              const buttonDiv = document.createElement('div');
              buttonDiv.className = 'calc-button';
              buttonDiv.style.width = '34px';
              buttonDiv.style.height = '34px';
              buttonDiv.style.backgroundColor = 'rgba(38, 198, 218, 0.1)';
              buttonDiv.style.borderRadius = '50%';
              buttonDiv.style.display = 'flex';
              buttonDiv.style.justifyContent = 'center';
              buttonDiv.style.alignItems = 'center';
              buttonDiv.style.transition = 'all 0.2s ease';
              buttonDiv.style.cursor = 'pointer';
              
              // Add tooltip
              const tooltip = document.createElement('div');
              tooltip.textContent = 'Open Calculator';
              tooltip.style.position = 'absolute';
              tooltip.style.bottom = '100%';
              tooltip.style.left = '50%';
              tooltip.style.transform = 'translateX(-50%)';
              tooltip.style.backgroundColor = '#1a202c';
              tooltip.style.color = '#e2e8f0';
              tooltip.style.padding = '4px 8px';
              tooltip.style.borderRadius = '4px';
              tooltip.style.fontSize = '12px';
              tooltip.style.whiteSpace = 'nowrap';
              tooltip.style.opacity = '0';
              tooltip.style.transition = 'opacity 0.2s';
              tooltip.style.pointerEvents = 'none';
              tooltip.style.marginBottom = '5px';
              tooltip.id = 'calc-tooltip';
              
              // Show/hide tooltip on hover
              buttonDiv.addEventListener('mouseenter', () => {
                tooltip.style.opacity = '1';
              });
              
              buttonDiv.addEventListener('mouseleave', () => {
                tooltip.style.opacity = '0';
              });
              
              // Add the Font Awesome calculator icon to the button div
              buttonDiv.innerHTML = `<i class="fas fa-calculator" style="color: #26c6da; font-size: 16px;"></i>`;
              
              // Add elements to the link
              buttonLink.appendChild(buttonDiv);
              
              // Add tooltip and link to container
              calcButton.appendChild(tooltip);
              calcButton.appendChild(buttonLink);
              
              // Add elements to container
              calcContainer.appendChild(openLink);
              calcContainer.appendChild(calcButton);
              
              // Add container to form step
              budgetFormStep.appendChild(calcContainer);
              console.log('Added calculator button with Open text to Budget/Price Range section');
            } else {
              console.error('Could not find Budget/Price Range section');
            }
          });
          
          
          document.addEventListener('DOMContentLoaded', function() {
            // Toggle payment details visibility
            document.getElementById('show-details').addEventListener('click', function() {
              const detailsElement = document.getElementById('payment-details');
              const chartContainer = document.getElementById('chart-container');
              const toggleIcon = document.getElementById('toggle-icon');
              
              if (detailsElement.style.display === 'none') {
                detailsElement.style.display = 'block';
                chartContainer.style.display = 'block';
                this.innerHTML = '<span id="toggle-icon" style="margin-right: 3px;">&#9650;</span> Hide breakdown';
              } else {
                detailsElement.style.display = 'none';
                chartContainer.style.display = 'none';
                this.innerHTML = '<span id="toggle-icon" style="margin-right: 3px;">&#9654;</span> Show breakdown';
              }
              
              return false;
            });
            
            const ctx = document.getElementById('budgetChart').getContext('2d');
            
            // Create initial chart
            budgetChart = new Chart(ctx, {
              type: 'bar',
              data: {
                labels: ['Principal', 'Interest', 'Taxes', 'PMI', 'Insurance'],
                datasets: [{
                  data: [210000, 60000, 18000, 15000, 12000],
                  backgroundColor: [
                    '#26c6da',
                    '#64b5f6',
                    '#7e57c2',
                    '#9575cd',
                    '#ab47bc'
                  ],
                  borderWidth: 0,
                  borderRadius: 4,
                  barPercentage: 0.8,
                  categoryPercentage: 0.9
                }]
              },
              options: {
                indexAxis: 'y',  // Horizontal bar chart
                responsive: true,
                maintainAspectRatio: false,
                devicePixelRatio: 1,
                scales: {
                  x: {
                    display: false,
                    grid: {
                      display: false
                    }
                  },
                  y: {
                    grid: {
                      display: false
                    },
                    ticks: {
                      color: '#a0aec0',
                      font: {
                        size: 10
                      }
                    }
                  }
                },
                layout: {
                  padding: {
                    top: 5,
                    bottom: 5
                  }
                },
                plugins: {
                  legend: {
                    display: false
                  },
                  tooltip: {
                    callbacks: {
                      label: function(context) {
                        const value = context.raw;
                        return `$${value.toLocaleString()}`;
                      }
                    }
                  }
                },
                animation: {
                  duration: 500
                }
              }
            });
            
            // Initialize with default value
            updateBudgetVisualization(300000);
            
            // Make the monthly payment clickable
            const paymentElement = document.getElementById('monthly-payment');
            const typeHint = document.getElementById('type-hint');
            paymentElement.style.cursor = 'pointer';
            paymentElement.title = 'Click to edit monthly payment';
            paymentElement.addEventListener('click', function() {
              typeHint.style.display = 'none';
              makePaymentEditable();
            });
          });
          
          // Function to calculate home price from monthly payment
          function calculateHomePriceFromMonthlyPayment(desiredMonthlyPayment) {
            // Constants
            const downPaymentPercent = 0.05; // 5% down payment
            const interestRate = 0.07; // 7.0% annual
            const loanTermYears = 30;
            const monthlyRate = interestRate / 12;
            const numberOfPayments = loanTermYears * 12;
            const monthlyTaxRate = 0.0082 / 12; // 0.82% annual property tax
            const monthlyPMIRate = 0.01 / 12; // 1% PMI
            const insurancePer300k = 2325 / 12; // $2,325/year for $300k home

            // Function to calculate monthly payment for a given home price
            function calculateMonthlyPayment(homePrice) {
              const loanAmount = homePrice * (1 - downPaymentPercent);
              const principalAndInterest = loanAmount * 
                (monthlyRate * Math.pow(1 + monthlyRate, numberOfPayments)) / 
                (Math.pow(1 + monthlyRate, numberOfPayments) - 1);
              const monthlyTax = homePrice * monthlyTaxRate;
              const monthlyPMI = loanAmount * monthlyPMIRate;
              const monthlyInsurance = (insurancePer300k * homePrice) / 300000;
              return principalAndInterest + monthlyTax + monthlyPMI + monthlyInsurance;
            }

            // Binary search to find home price that matches desired payment
            let low = 100000; // Min home price
            let high = 3000000; // Max home price
            let mid;
            let bestMatch = low;
            const tolerance = 1; // $1 tolerance

            while (low <= high) {
              mid = Math.floor((low + high) / 2);
              const payment = calculateMonthlyPayment(mid);
              
              if (Math.abs(payment - desiredMonthlyPayment) <= tolerance) {
                bestMatch = mid;
                break;
              } else if (payment < desiredMonthlyPayment) {
                bestMatch = mid; // This is our best guess so far
                low = mid + 1;
              } else {
                high = mid - 1;
              }
              
              // Prevent infinite loop
              if (high - low <= 1) break;
            }

            // Round to nearest $1000 for cleaner numbers
            return Math.round(bestMatch / 1000) * 1000;
          }
          
          // Make monthly payment editable
          function makePaymentEditable() {
            const paymentElement = document.getElementById('monthly-payment');
            const originalPayment = paymentElement.textContent;
            
            // Create an input element
            const input = document.createElement('input');
            input.type = 'text';
            input.value = originalPayment.replace(/\D/g, ''); // Remove non-digits
            input.style.width = (originalPayment.length * 10) + 'px';
            input.style.border = '1px solid #26c6da';
            input.style.borderRadius = '4px';
            input.style.padding = '2px 5px';
            input.style.color = '#26c6da';
            input.style.background = 'rgba(38, 198, 218, 0.1)';
            input.style.textAlign = 'center';
            input.style.fontSize = '20px';
            input.style.fontWeight = '600';
            input.style.maxWidth = '150px';
            
            // Replace the payment text with the input
            paymentElement.textContent = '';
            paymentElement.appendChild(input);
            input.focus();
            
            // Handle input submission
            async function handleSubmit() {
              const value = input.value.replace(/\D/g, ''); // Remove non-digits
              if (value) {
                const monthlyPayment = parseInt(value);
                if (monthlyPayment > 0) {
                  const homePrice = calculateHomePriceFromMonthlyPayment(monthlyPayment);
                  
                  // Update the slider and all calculations
                  document.getElementById('budget').value = homePrice;
                  
                  // Update the display with the exact amount the user entered
                  paymentElement.textContent = '$' + monthlyPayment.toLocaleString();
                  
                  // Update the budget output display
                  const formattedHomePrice = Math.round(homePrice).toLocaleString();
                  document.getElementById('budget-output').textContent = '$' + formattedHomePrice;
                  
                  // Get current BTC price
                  const btcPrice = await fetchBTCPrice();
                  
                  // Update the BTC amount display
                  const btcValue = homePrice / btcPrice;
                  const btcDisplay = btcValue >= 0.01 ? btcValue.toFixed(2) : btcValue.toFixed(6);
                  document.getElementById('btc-amount').textContent = `₿${btcDisplay}`;
                  
                  // Update the Satoshi equivalent for the monthly payment
                  updateSatsEquivalent();
                  
                  // Update the visualization with the new home price (skip payment update to avoid recursion)
                  updateBudgetVisualization(homePrice, true);
                  
                  return; // Exit early to prevent restoring original payment
                }
              }
              // If we get here, there was an error or no valid input
              // Restore original display
              paymentElement.textContent = originalPayment;
              paymentElement.style.cursor = 'pointer';
              paymentElement.addEventListener('click', makePaymentEditable);
            }
            
            // Handle Enter key or focus out
            input.addEventListener('keydown', function(e) {
              if (e.key === 'Enter') {
                handleSubmit();
              } else if (e.key === 'Escape') {
                paymentElement.textContent = originalPayment;
                paymentElement.style.cursor = 'pointer';
                paymentElement.addEventListener('click', makePaymentEditable);
              }
            });
            
            input.addEventListener('blur', handleSubmit);
            
            // Remove click handler while editing
            paymentElement.style.cursor = 'default';
            paymentElement.removeEventListener('click', makePaymentEditable);
          }

          // Function to update budget visualization
          // Enable direct budget input when clicking on the budget output
          function enableDirectBudgetInput() {
            const budgetOutput = document.getElementById('budget-output');
            const directInput = document.getElementById('budget-direct-input');
            
            // Hide the output and show the input
            budgetOutput.style.display = 'none';
            directInput.style.display = 'inline-block';
            
            // Set the input value to the current budget (without $ and commas)
            const currentValue = budgetOutput.textContent.replace(/[^0-9]/g, '');
            directInput.value = currentValue;
            
            // Focus the input and select all text
            directInput.focus();
            directInput.select();
          }
          
          // Handle Enter key in the direct budget input
          function handleBudgetInputKeydown(event) {
            if (event.key === 'Enter') {
              applyDirectBudgetInput();
            } else if (event.key === 'Escape') {
              // Cancel editing on Escape key
              const budgetOutput = document.getElementById('budget-output');
              const directInput = document.getElementById('budget-direct-input');
              
              directInput.style.display = 'none';
              budgetOutput.style.display = 'inline-block';
            }
          }
          
          // Apply the direct budget input value
          function applyDirectBudgetInput() {
            const directInput = document.getElementById('budget-direct-input');
            const budgetOutput = document.getElementById('budget-output');
            const budgetSlider = document.getElementById('budget');
            
            // Get the input value and validate it
            let inputValue = directInput.value.replace(/[^0-9]/g, '');
            
            // Ensure the value is within the slider's range
            let numericValue = parseInt(inputValue);
            
            if (isNaN(numericValue) || numericValue < 100000) {
              numericValue = 100000; // Minimum value
            } else if (numericValue > 3000000) {
              numericValue = 3000000; // Maximum value
            }
            
            // Update the slider value
            budgetSlider.value = numericValue;
            
            // Hide the input and show the output
            directInput.style.display = 'none';
            budgetOutput.style.display = 'inline-block';
            
            // Update the visualization with the new value
            updateBudgetVisualization(numericValue);
            
            // Update the BTC equivalent amount
            updateBTCEquivalent(numericValue);
          }
          
          function updateBudgetVisualization(value, skipPaymentUpdate = false) {
            // Format the output with commas
            const formattedValue = parseInt(value).toLocaleString();
            document.getElementById('budget-output').textContent = '$' + formattedValue;
            
            const homeValue = parseInt(value);
            const downPaymentPercent = 0.05; // 5% down payment
            const loanAmount = homeValue * (1 - downPaymentPercent); // 95% of home value
            
            const interestRate = 0.07; // 7.0%
            const loanTermYears = 30;
            const monthlyRate = interestRate / 12;
            const numberOfPayments = loanTermYears * 12;
            
            const principalAndInterest = loanAmount * 
              (monthlyRate * Math.pow(1 + monthlyRate, numberOfPayments)) / 
              (Math.pow(1 + monthlyRate, numberOfPayments) - 1);
            
            const monthlyTax = (homeValue * 0.0082) / 12; // 0.82% property tax (national average)
            const monthlyPMI = (loanAmount * 0.01) / 12; // 1% PMI (for 5% down)
            // Insurance calculation based on $2,325/year for a $300k home, scaled proportionally
            const monthlyInsurance = (2325 * (homeValue / 300000)) / 12;
            
            const monthlyPayment = principalAndInterest + monthlyTax + monthlyPMI + monthlyInsurance;
            
            // Only update the payment display if not explicitly told to skip it
            if (!skipPaymentUpdate) {
              document.getElementById('monthly-payment').textContent = '$' + Math.round(monthlyPayment).toLocaleString();
            }
            
            // Always update the BTC equivalent for the home price
            updateBTCEquivalent(homeValue);
            
            // Update the Satoshi equivalent for the monthly payment if not skipping payment update
            if (!skipPaymentUpdate) {
              updateSatsEquivalent();
            }
            
            document.getElementById('pi-amount').textContent = '$' + Math.round(principalAndInterest).toLocaleString();
            document.getElementById('tax-amount').textContent = '$' + Math.round(monthlyTax).toLocaleString();
            document.getElementById('pmi-amount').textContent = '$' + Math.round(monthlyPMI).toLocaleString();
            document.getElementById('insurance-amount').textContent = '$' + Math.round(monthlyInsurance).toLocaleString();
            
            const principal = loanAmount; // 95% of home value (5% down payment)
            const interest = loanAmount * 1.42; // Total interest over 30 years
            const taxes = (homeValue * 0.0082) * 30; // 30 years of property taxes at 0.82% (national average)
            const pmi = (loanAmount * 0.01) * 8; // Assume PMI for 8 years until 20% equity
            const insurance = (2325 * (homeValue / 300000)) * 30; // 30 years of insurance based on $2,325/year for a $300k home
            
            if (budgetChart) {
              budgetChart.data.datasets[0].data = [principal, interest, taxes, pmi, insurance];
              budgetChart.update('none'); // Update without animation for smoother experience
            }
            
            const percentage = (homeValue - 100000) / 900000 * 100;
            document.getElementById('budget').style.background = 
              `linear-gradient(90deg, #26c6da 0%, #64b5f6 ${percentage}%, #ab47bc 100%)`;
          }
        </script>
        
        <div class="form-step">
          <select id="timeline" name="timeline" class="w-full p-2 border rounded bg-gray-700 text-white" required>
            <option value="" disabled selected>Timeline</option>
            <option value="Immediate">⚡ Immediate</option>
            <option value="1-3 Months">📅 1-3 Months</option>
            <option value="3-6 Months">📆 3-6 Months</option>
            <option value="6+ Months">🕒 6+ Months</option>
          </select>
        </div>
        
        <!-- Mortgage Preapproval section removed as requested -->
        
        <div class="form-step" id="specialties-section" style="margin-top: 20px; padding: 15px; border-radius: 8px; background-color: rgba(26, 32, 44, 0.5); position: relative;">
          <div class="mb-2" style="text-align: center;">
            <span style="font-family: 'Inter', sans-serif; font-weight: 600; font-size: 0.9rem; color: white; background: linear-gradient(90deg, #26c6da, #64b5f6); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; letter-spacing: 1px;">AGENT SPECIALTIES</span>
          </div>
          <div class="mb-4" style="text-align: center; margin-top: -8px;">
            <span style="font-family: 'Inter', sans-serif; font-size: 0.75rem; color: #a0aec0; font-style: italic;">Select all that apply</span>
          </div>
          <div class="checkbox-group" style="margin-bottom: 30px;">
            <!-- Row 1: Crypto - Luxury - First-time Buyer -->
            <div>
              <input type="checkbox" id="specialty-crypto" name="specialty" value="Crypto" class="checkbox-toggle">
              <label for="specialty-crypto" class="checkbox-label" title="Buy or sell with Bitcoin, Ethereum, or other cryptocurrencies">₿ Crypto</label>
            </div>
            
            <div>
              <input type="checkbox" id="specialty-luxury" name="specialty" value="Luxury" class="checkbox-toggle">
              <label for="specialty-luxury" class="checkbox-label" title="Premium properties">✨ Luxury</label>
            </div>
            
            <div>
              <input type="checkbox" id="specialty-first-time" name="specialty" value="First-Time Buyer" class="checkbox-toggle">
              <label for="specialty-first-time" class="checkbox-label" title="New buyers">🏠 First-Time Buyer</label>
            </div>
            
            <!-- Row 2: Commercial - Senior Living - Military -->
            <div>
              <input type="checkbox" id="specialty-commercial" name="specialty" value="Commercial" class="checkbox-toggle">
              <label for="specialty-commercial" class="checkbox-label" title="Business properties">🏬 Commercial</label>
            </div>
            
            <div>
              <input type="checkbox" id="specialty-senior" name="specialty" value="Senior Real Estate" class="checkbox-toggle">
              <label for="specialty-senior" class="checkbox-label" title="50+ client moves">👴 Senior Living</label>
            </div>
            
            <div>
              <input type="checkbox" id="specialty-military" name="specialty" value="Military Relocation" class="checkbox-toggle">
              <label for="specialty-military" class="checkbox-label" title="PCS and VA loans">🎖️ Military</label>
            </div>
            
            <!-- Row 3: International Buyer - Probate & Divorce -->
            <div>
              <input type="checkbox" id="specialty-international" name="specialty" value="International Buyer" class="checkbox-toggle">
              <label for="specialty-international" class="checkbox-label" title="Foreign buyers">🌍 International Buyer</label>
            </div>
            
            <div>
              <input type="checkbox" id="specialty-probate-divorce" name="specialty" value="Probate & Divorce" class="checkbox-toggle">
              <label for="specialty-probate-divorce" class="checkbox-label" title="Navigate estate settlements or divorce property sales">⚖️ Probate & Divorce</label>
            </div>
            
            <div class="full-width-mobile">
              <input type="checkbox" id="specialty-management-dev" name="specialty" value="Management & Development" class="checkbox-toggle">
              <label for="specialty-management-dev" class="checkbox-label" title="Manage rentals or develop planned communities and rural properties">👜 Property Management / PUD</label>
            </div>
            
            <!-- Items with sub-labels (full width on mobile) -->
            <div class="full-width-mobile">
              <input type="checkbox" id="specialty-investment" name="specialty" value="Investment Properties" class="checkbox-toggle">
              <label for="specialty-investment" class="checkbox-label" title="Invest in rental properties, flips, or landlord opportunities">💰 Investment Properties
                <span class="sub-label">Rentals, Flips, Landlording</span>
              </label>
            </div>
            
            <div class="full-width-mobile">
              <input type="checkbox" id="specialty-distressed" name="specialty" value="Distressed Properties" class="checkbox-toggle">
              <label for="specialty-distressed" class="checkbox-label" title="Find deals on foreclosed homes, short sales, or bank-owned properties">🏦 Distressed Properties
                <span class="sub-label">Foreclosure, Short Sale, REO</span>
              </label>
            </div>
            
            <div class="full-width-mobile">
              <input type="checkbox" id="specialty-lifestyle" name="specialty" value="Lifestyle & Specialty Homes" class="checkbox-toggle">
              <label for="specialty-lifestyle" class="checkbox-label" title="Discover vacation homes, historic properties, or eco-conscious living">🏝️ Vacation/Second Home
                <span class="sub-label">Historic, Eco-Friendly</span>
              </label>
            </div>
          </div>
          
          <div class="mb-4 mt-12" style="text-align: center;">
            <span style="font-family: 'Inter', sans-serif; font-weight: 600; font-size: 0.9rem; color: white; background: linear-gradient(90deg, #26c6da, #64b5f6); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; letter-spacing: 1px;">MORTGAGE PREAPPROVAL</span>
          </div>
          <div class="flex flex-wrap gap-2" style="margin-bottom: 30px; display: flex; justify-content: center;">
            <input type="radio" id="preapproval-no" name="preapproval" value="No" class="checkbox-toggle">
            <label for="preapproval-no" class="checkbox-label">❌ No</label>
            
            <input type="radio" id="preapproval-yes" name="preapproval" value="Yes" class="checkbox-toggle">
            <label for="preapproval-yes" class="checkbox-label">✅ Yes</label>
            
            <input type="radio" id="preapproval-explore" name="preapproval" value="Explore Financing" class="checkbox-toggle">
            <label for="preapproval-explore" class="checkbox-label">🔍 Explore Financing</label>
            
            <div id="preapproval-amount-container" style="display: none; width: 100%; margin-top: 10px;">
              <input type="text" id="preapproval-amount" name="preapprovalAmount" placeholder="Preapproval Amount ($)" class="w-full p-2 border rounded bg-gray-700 text-white">
            </div>
          </div>
          
          <!-- Conditional checkboxes based on client type -->
          <div id="needToSellContainer" style="display: none;">
            <div class="checkbox-item">
              <input type="checkbox" id="needToSell" name="needToSell" class="checkbox-toggle">
              <label for="needToSell" class="checkbox-label" title="Need to sell current home before buying?">🏠 Need to sell current home before buying?</label>
            </div>
          </div>
          
          <div id="needToBuyContainer" style="display: none;">
            <div class="checkbox-item">
              <input type="checkbox" id="needToBuy" name="needToBuy" class="checkbox-toggle">
              <label for="needToBuy" class="checkbox-label" title="Need to buy a new home after selling?">🏡 Need to buy a new home after selling?</label>
            </div>
          </div>
          
          <div id="needToSellRentContainer" style="display: none;">
            <div class="checkbox-item">
              <input type="checkbox" id="needToSellRent" name="needToSellRent" class="checkbox-toggle">
              <label for="needToSellRent" class="checkbox-label" title="Need to sell current home before renting?">🏠 Need to sell current home before renting?</label>
            </div>
          </div>
        </div>
        
        <div class="form-step">
          <textarea id="notes" name="notes" class="w-full p-2 border rounded bg-gray-700 text-white" placeholder="Additional notes or must-haves..." maxlength="200"></textarea>
        </div>

        <div class="form-step">
          <select id="referralSource" name="referralSource" class="w-full p-2 border rounded bg-gray-700 text-white" required data-placeholder="How Did You Find Us?">
            <option value="" disabled selected>How Did You Find Us?</option>
            <option value="Website">🌐 Website</option>
            <option value="Social Media">📱 Social Media</option>
            <option value="Propy">🏢 Propy</option>
            <option value="Keller Williams">🏠 Keller Williams</option>
            <option value="Friend/Family">👪 Friend/Family</option>
            <option value="Other">📌 Other</option>
          </select>
        </div>

        <button type="submit" class="submit-btn" data-lang="submit">Find My Expert Agent Now!</button>
      </form>
    </div>
    
    <!-- Tool Buttons Section -->
    <div style="margin: 20px auto; max-width: 600px; padding: 0 15px;">
      <div class="tool-buttons-grid" style="display: grid; grid-template-columns: repeat(3, 1fr); justify-content: center; gap: 20px; align-items: start; min-width: 0;">
        <!-- Calculator Button -->
          <a href="https://baloo8721.github.io/Web3-Real-Estate-Calculator/" target="_blank" class="tool-link">
            <div class="tool-button">
              <div class="button-glow"></div>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="#26c6da" stroke-width="1.5" class="tool-icon" style="width: 34px; height: 34px; margin-top: 0; margin-bottom: 0;">
                <rect x="4" y="3" width="16" height="18" rx="2" stroke="#26c6da" fill="rgba(38, 198, 218, 0.1)"/>
                <line x1="8" y1="7" x2="16" y2="7" stroke="#26c6da" stroke-linecap="round"/>
                <line x1="8" y1="11" x2="10" y2="11" stroke="#26c6da" stroke-linecap="round"/>
                <line x1="14" y1="11" x2="16" y2="11" stroke="#26c6da" stroke-linecap="round"/>
                <line x1="8" y1="15" x2="10" y2="15" stroke="#26c6da" stroke-linecap="round"/>
                <line x1="14" y1="15" x2="16" y2="15" stroke="#26c6da" stroke-linecap="round"/>
              </svg>
            </div>
            <div class="tool-title">Real Estate | Crypto</div>
            <div class="tool-description">Free Calculator for Clients, Agents & Investors</div>
          </a>
        
        <!-- Spatial.io Virtual Office Button -->
          <a href="https://spatial.io" target="_blank" class="tool-link" style="padding-top: 0;">
            <div class="tool-button" style="margin-top: 0;">
              <div class="button-glow"></div>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="#26c6da" stroke-width="1.5" class="tool-icon" style="width: 34px; height: 34px; margin-top: 0; margin-bottom: 0;">
                <path d="M12 3L4 7v10l8 4 8-4V7l-8-4z" stroke="#26c6da" fill="rgba(38, 198, 218, 0.1)"/>
                <path d="M12 3v8l8 4" stroke="#26c6da" stroke-linecap="round"/>
                <path d="M12 11l-8 4" stroke="#26c6da" stroke-linecap="round"/>
                <path d="M4 7l8 4 8-4" stroke="#26c6da" stroke-linecap="round"/>
                <circle cx="12" cy="3" r="1" fill="#26c6da" opacity="0.8"/>
                <circle cx="4" cy="7" r="1" fill="#26c6da" opacity="0.8"/>
                <circle cx="20" cy="7" r="1" fill="#26c6da" opacity="0.8"/>
              </svg>
            </div>
            <div class="tool-title">3D Virtual Office</div>
            <div class="tool-description">Explore our immersive metaverse workspace</div>
          </a>
          
        <!-- Bitcoin Education Button -->
          <a href="javascript:void(0)" onclick="document.getElementById('crypto-overlay').style.display = 'flex'; setTimeout(function() { document.getElementById('crypto-overlay').style.opacity = '1'; }, 10);" class="tool-link">
            <div class="tool-button">
              <div class="button-glow"></div>
              <i class="fab fa-bitcoin tool-icon" style="font-size: 34px; color: #f7931a; margin-top: 0; margin-bottom: 0;"></i>
            </div>
            <div class="tool-title">Learn Crypto</div>
            <div class="tool-description">3-minute guide to Bitcoin, Blockchain & Web3</div>
          </a>
      </div>
    </div>
    
    <style>
      /* Tool Button Wrapper */
      .tool-button-wrapper {
        width: 100%;
        max-width: 480px;
        margin: 0;
        flex: 1 1 400px;
        position: relative;
        border-radius: 12px;
        background: rgba(30, 40, 60, 0.2);
        padding: 16px 20px;
        border: 1px solid rgba(38, 198, 218, 0.2);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        overflow: hidden;
        display: flex;
        align-items: center;
      }
      
      .tool-button-wrapper::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 2px;
        background: linear-gradient(90deg, #26c6da, #64b5f6);
        opacity: 0.7;
        transition: all 0.3s ease;
      }
      
      .tool-button-wrapper:hover {
        transform: translateY(-3px);
        box-shadow: 0 12px 28px rgba(0, 0, 0, 0.3);
        border-color: rgba(38, 198, 218, 0.4);
      }
      
      .tool-button-wrapper:hover::before {
        opacity: 1;
        height: 3px;
      }
      
      /* Tool Button */
      .tool-button {
        width: 78px;
        height: 78px;
        min-width: 78px;
        background: linear-gradient(135deg, rgba(30, 40, 60, 0.9), rgba(20, 25, 40, 0.9));
        border-radius: 12px;
        display: flex;
        justify-content: center;
        align-items: center;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        margin-right: 18px;
        position: relative;
        overflow: hidden;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        border: 1px solid rgba(255, 255, 255, 0.05);
      }
      
      .tool-button .tool-icon {
        width: 45px;
        height: 45px;
        display: block;
        margin: 0 auto;
        transition: all 0.3s ease;
      }
      
      .tool-button a {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100%;
        height: 100%;
      }
      
      .tool-button:hover .tool-icon {
        transform: scale(1.05);
        filter: drop-shadow(0 0 6px rgba(38, 198, 218, 0.6));
      }
      
      .tool-button-wrapper:hover .tool-button {
        transform: scale(1.05);
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.4);
      }
      
      /* Button Content */
      .tool-content {
        flex: 1;
        min-width: 0;
      }
      
      .tool-content {
        display: flex !important;
        flex-direction: column !important;
        align-items: center !important;
        justify-content: center;
        min-height: 100%;
        padding: 4px 0;
        text-align: center !important;
        gap: 2px;
      }

      .tool-title {
        font-size: 16px;
        color: #26c6da;
        font-weight: 600;
        margin: 16px 0 0 0;
        letter-spacing: 0.3px;
        line-height: 1.2;
        white-space: normal;
        overflow: visible;
        text-overflow: clip;
        text-align: center !important;
        display: block;
        width: 100%;
      }
      
      .tool-description {
        font-size: 13px;
        color: #ffffff;
        line-height: 1.3;
        opacity: 0.9;
        white-space: normal;
        overflow: visible;
        text-align: center !important;
        display: block;
        width: 100%;
      }
      
      /* Click Arrow */
      .click-arrow {
        position: absolute;
        right: 12px;
        bottom: 12px;
        opacity: 0.7;
        transition: all 0.3s ease;
      }
      
      .click-arrow svg {
        width: 18px;
        height: 18px;
      }
      
      .tool-button-wrapper:hover .click-arrow {
        transform: translateX(3px);
        opacity: 1;
      }
      
      /* Button Glow Effect */
      .button-glow {
        position: absolute;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle at center, rgba(38, 198, 218, 0.3) 0%, transparent 70%);
        opacity: 0;
        transition: opacity 0.5s ease;
        pointer-events: none;
      }
      
      .tool-button-wrapper:hover .button-glow {
        opacity: 0.8;
      }
      
      /* Tool Link */
      .tool-link {
        text-decoration: none;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        width: 100%;
        height: 100%;
      }
      
      /* Responsive Adjustments */
      @media (max-width: 768px) {
        .tool-buttons-grid {
          display: grid !important;
          grid-template-columns: repeat(3, 1fr) !important;
          gap: 10px !important;
          width: 100%;
          overflow-x: hidden;
        }
        
        .tool-link {
          width: 100%;
          min-width: 0;
          overflow: hidden;
        }
        
        .tool-button {
          width: 60px;
          height: 60px;
          min-width: 60px;
          margin: 0 auto;
        }
        
        .tool-button .tool-icon {
          width: 30px;
          height: 30px;
          font-size: 30px !important;
        }
        
        .tool-title {
          font-size: 12px;
          white-space: normal;
          text-align: center;
          margin-top: 8px;
        }
        
        .tool-description {
          font-size: 10px;
          white-space: normal;
          text-align: center;
        }
        
        /* Additional mobile styles */
        .tool-button-wrapper {
          font-size: 15px;
        }
        
        .tool-description {
          font-size: 12px;
        }
      }
      
      .tool-button-wrapper:hover .tool-icon {
        transform: scale(1.1);
      }
      
      .tool-button-wrapper:hover .click-arrow {
        transform: translateX(5px);
        opacity: 1;
      }
      
      .tool-button-wrapper:active {
        transform: translateY(0px);
      }
    </style>
    
    <style>
      .calc-button-large:hover {
        background-color: rgba(38, 198, 218, 0.2);
        transform: scale(1.05);
        box-shadow: 0 0 12px rgba(38, 198, 218, 0.4);
      }
    </style>
    <!-- Services/Affiliates Section (Propy only) -->
    <div class="services-affiliates" style="margin: 30px auto; max-width: 600px; color: #e0e6ed; font-size: 0.95em;">
      <div style="max-width: 600px; display: flex; justify-content: center;">
        <!-- Propy Box -->
        <div
          style="background: rgba(30, 40, 60, 0); border-radius: 8px; padding: 20px; width: 255px; height: 150px; display: inline-flex; flex-direction: column; align-items: center; justify-content: center;">
          <a href="https://propy.com" target="_blank" style="display: block; position: relative; left: 0px; top: -5px;">
            <img src="Logos/propy-logo-1.png" alt="Propy Logo" style="height: 30px; width: auto; display: block;">
          </a>
          <p
            style="margin: 0; line-height: 1.2; text-align: center; color: #e0e6ed; position: relative; left: 0px; top: 18px;">
            <a href="https://propy.com" target="_blank" style="color: #26c6da; text-decoration: none; font-weight: 500;"
              data-lang="propy_link">Propy</a> - <span data-lang="propy_text">Streamlined title and real estate
              transactions with blockchain tech.</span>
          </p>
        </div>
      </div>

      <!-- Web3 Education -->
      <div style="position: relative; margin-top: 40px; margin-bottom: 30px;">
        <p style="position: relative; margin-left: 0px; margin-top: 0px; max-width: 600px; line-height: 1.4;">
          <span data-lang="web3_education">Web3 Education:</span>
          <a href="https://cyrin.io" target="_blank" style="color: #26c6da; text-decoration: none;"
            data-lang="cyrin">Cyrin</a> |
          <a href="https://updraft.io" target="_blank" style="color: #26c6da; text-decoration: none;"
            data-lang="updraft">Updraft</a> |
          <a href="https://your-web3-site.com" target="_blank" style="color: #26c6da; text-decoration: none;"
            data-lang="your_courses">Your Courses</a> -
          <span data-lang="web3_text">Learn blockchain for real estate.</span>
        </p>
      </div>

      <!-- Foreclosure Resources -->
      <div style="position: relative; margin-bottom: 20px;">
        <p style="position: relative; margin-left: 0px; margin-top: 0px; max-width: 600px; line-height: 1.4;">
          <a href="https://www.nar.realtor/short-sales-foreclosures" target="_blank"
            style="color: #26c6da; text-decoration: none; font-weight: 500;" data-lang="foreclosure_link">Free
            Foreclosure/Short Sale Resources</a> -
          <span data-lang="foreclosure_text">Get help and info from NAR.</span>
        </p>
      </div>
    </div>
  </div>
  <!-- Footer pushed down -->
  <footer style="margin-top: 40px; padding-bottom: 20px;">
    <a href="https://tylerbelisle.kw.com/" target="_blank" class="powered-by">Powered by <span
        style="text-decoration: underline; text-decoration-color: #666; text-underline-offset: 2px;">Web3RealtorFL</span>
      - Bridging Real Estate & Blockchain</a>
  </footer>

  <!-- Thank You Popup -->
  <div id="thankYouPopup" class="popup">
    <div class="popup-content">
      <div class="popup-icon">
        <i class="fas fa-check-circle"></i>
      </div>
      <h3 class="popup-title">Success!</h3>
      <p class="popup-message" data-lang="thank_you">Thank you for submitting! An expert agent will contact you shortly.</p>
      <button class="popup-button" onclick="closePopup()">
        <span>Continue</span>
      </button>
    </div>
  </div>

  <!-- Hidden iframe for form submission -->
  <iframe name="hiddenIframe" style="display:none;"></iframe>

  <!-- Chatbot Button -->
  <button class="chatbot-button" id="chatbotButton" aria-label="Open chat assistant">
    <i class="fas fa-robot"></i>
  </button>

  <script>
    // Chat button functionality
    document.addEventListener('DOMContentLoaded', function() {
      const chatButton = document.getElementById('chatbotButton');
      if (chatButton) {
        chatButton.addEventListener('click', function() {
          // Open chatbot in a new tab
          window.open('/chatbot/index.html', '_blank', 'width=500,height=700');
        });
      }
    });

    // Keep your original throttle function
    function throttle(func, limit) {
      let inThrottle;
      return function () {
        if (!inThrottle) {
          func.apply(this, arguments);
          inThrottle = true;
          setTimeout(() => inThrottle = false, limit);
        }
      };
    }
    
    // Function to submit form data to Supabase
    async function submitToSupabase(event) {
      event.preventDefault();
      
      // Get form data
      const name = document.getElementById('name').value;
      const email = document.getElementById('email').value;
      
      if (!name || !email) {
        alert(translations[currentLanguage].please_fill_name_email || 'Please fill in your name and email before submitting.');
        return;
      }
      
      // Specialty mapping for combined options
      const specialtyMap = {
        'Investment Properties': ['Investor', 'Landlord'],
        'Distressed Properties': ['Foreclosure', 'Short Sale', 'REO'],
        'Lifestyle & Specialty Homes': ['Vacation/Second Home', 'Historic', 'Eco-Friendly'],
        'Management & Development': ['Property Management', 'PUD', 'Farm/Ranch'],
        'Probate & Divorce': ['Probate', 'Divorce']
      };
      
      const form = document.getElementById('referralForm');
      const formData = new FormData(form);
      const specialties = Array.from(form.querySelectorAll('input[name="specialty"]:checked')).map(input => input.value);
      
      // Map combined specialties to individual components
      
      // Create data object for submission
      const data = {
        name: formData.get('name'),
        email: formData.get('email'),
        phone: formData.get('phone'),
        current_location: formData.get('currentLocation'),
        desired_location: formData.get('desiredLocation'),
        client_type: formData.get('clientType'),
        property_type: formData.get('propertyType'),
        budget: formData.get('budget'),
        timeline: formData.get('timeline'),
        need_to_sell: document.getElementById('needToSell')?.checked || false,
        need_to_buy: document.getElementById('needToBuy')?.checked || false,
        need_to_sell_rent: document.getElementById('needToSellRent')?.checked || false,
        mortgage_preapproval: document.querySelector('input[name="preapproval"]:checked')?.value || 'No',
        preapproval_amount: document.getElementById('preapproval-yes')?.checked ? document.getElementById('preapproval-amount').value : null,
        specialties: specialties.join(', '),
        notes: formData.get('notes'),
        referral_source: formData.get('referralSource'),
        status: 'New',
        created_at: new Date().toISOString()
      };
      
      console.log('Form data:', data);
      
      try {
        // Uncomment and update this section when ready to send to Supabase
        // const response = await fetch('YOUR_SUPABASE_URL/rest/v1/referrals', {
        //   method: 'POST',
        //   headers: {
        //     'Content-Type': 'application/json',
        //     'apikey': 'YOUR_SUPABASE_API_KEY'
        //   },
        //   body: JSON.stringify(data)
        // });
        // 
        // if (!response.ok) {
        //   throw new Error('Failed to submit form');
        // }
        
        // Show success message with animation
        const popup = document.getElementById('thankYouPopup');
        popup.style.display = 'flex';
        form.reset();
        
        // Reset conditional fields
        document.getElementById('needToSellContainer').style.display = 'none';
        document.getElementById('needToBuyContainer').style.display = 'none';
        document.getElementById('needToSellRentContainer').style.display = 'none';
        document.getElementById('needToSell').checked = false;
        document.getElementById('needToBuy').checked = false;
        document.getElementById('needToSellRent').checked = false;
      } catch (error) {
        console.error('Error submitting form:', error);
        alert('There was an error submitting the form. Please try again.');
      }
    }
    
    // Function to close the thank you popup
    function closePopup() {
      const popup = document.getElementById('thankYouPopup');
      const popupContent = popup.querySelector('.popup-content');
      
      // Add fade-out animation
      popupContent.style.opacity = '0';
      popupContent.style.transform = 'translateY(20px)';
      
      // Fade out the background
      setTimeout(() => {
        popup.style.opacity = '0';
      }, 100);
      
      // Hide the popup after animation completes
      setTimeout(() => {
        popup.style.display = 'none';
        // Reset for next time
        popupContent.style.opacity = '';
        popupContent.style.transform = '';
        popup.style.opacity = '';
      }, 400);
    }
    
    // Initialize form functionality when DOM is loaded
    document.addEventListener('DOMContentLoaded', function() {
      const clientType = document.getElementById('clientType');
      const needToSellContainer = document.getElementById('needToSellContainer');
      const needToBuyContainer = document.getElementById('needToBuyContainer');
      const needToSellRentContainer = document.getElementById('needToSellRentContainer');
      
      // Initialize mortgage preapproval functionality
      initMortgagePreapproval();
      
      // Function to update toggle visibility based on selected client types
      function updateClientTypeToggles() {
        const selectedOptions = Array.from(clientType.selectedOptions).map(opt => opt.value);
        
        // Show/hide toggles based on selected client types
        needToSellContainer.style.display = selectedOptions.includes('Buyer') ? 'block' : 'none';
        needToBuyContainer.style.display = selectedOptions.includes('Seller') ? 'block' : 'none';
        needToSellRentContainer.style.display = selectedOptions.includes('Renter') ? 'block' : 'none';
        
        // If no client type is selected, hide all toggles
        if (selectedOptions.length === 0) {
          needToSellContainer.style.display = 'none';
          needToBuyContainer.style.display = 'none';
          needToSellRentContainer.style.display = 'none';
        }
      }
      
      // Initialize toggles on page load
      updateClientTypeToggles();
      
      // Listen for changes on the client type select
      clientType.addEventListener('change', updateClientTypeToggles);
      
      // Also listen for custom events from the custom select
      document.addEventListener('customSelectChange', function(e) {
        if (e.detail && e.detail.selectId === 'clientType') {
          updateClientTypeToggles();
        }
      });
    });

    // Parallax effect with improved mobile handling
    function updateParallax() {
      // Detect mobile and Chrome browser
      const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
      const isChrome = /Chrome/i.test(navigator.userAgent);

      // Apply fixed background for mobile devices (especially Chrome)
      if (isMobile) {
        // For mobile devices, use a fixed background approach instead of parallax
        document.body.style.height = '100vh';
        document.body.style.minHeight = '100vh';

        // If it's Chrome mobile, ensure background stays fixed
        if (isChrome) {
          const bg = document.querySelector('body::before');
          if (bg) {
            // Reset any transform to prevent the zooming effect
            bg.style.transform = 'none';
            // Force hardware acceleration to reduce flickering
            bg.style.backfaceVisibility = 'hidden';
            bg.style.willChange = 'transform';
          }
        }
        return;
      }

      // Only apply parallax on desktop
      if (window.innerWidth > 768) {
        const scrollY = window.scrollY;
        const bg = document.querySelector('body::before');
        if (bg) {
          bg.style.transform = `translateY(${scrollY * 0.3}px)`;
        }
      }
      document.body.style.height = '100vh';
      document.body.style.minHeight = '100vh';
    }

    // Mortgage preapproval functionality
    function initMortgagePreapproval() {
      const preapprovalNo = document.getElementById('preapproval-no');
      const preapprovalYes = document.getElementById('preapproval-yes');
      const preapprovalExplore = document.getElementById('preapproval-explore');
      const preapprovalAmountContainer = document.getElementById('preapproval-amount-container');
      
      if (preapprovalNo && preapprovalYes && preapprovalExplore && preapprovalAmountContainer) {
        preapprovalNo.addEventListener('change', function() {
          preapprovalAmountContainer.style.display = 'none';
        });
        
        preapprovalYes.addEventListener('change', function() {
          preapprovalAmountContainer.style.display = 'block';
        });
        
        preapprovalExplore.addEventListener('change', function() {
          preapprovalAmountContainer.style.display = 'none';
        });
      }
    }
    
    // Handle select placeholder color
    function initSelectPlaceholders() {
      const selectElements = document.querySelectorAll('.placeholder-select');
      selectElements.forEach(select => {
        // Set initial color based on whether a value is selected
        if (select.value === '') {
          select.style.color = '#d0d0d0';
        } else {
          select.style.color = 'white';
        }
        
        // Update color when selection changes
        select.addEventListener('change', function() {
          if (this.value === '') {
            this.style.color = '#d0d0d0';
          } else {
            this.style.color = 'white';
          }
        });
      });
    }
    
    // Call the function to initialize
    initSelectPlaceholders();
    
    // About and Crypto Popup Functionality
    document.addEventListener('DOMContentLoaded', function() {
      const aboutButton = document.getElementById('about-button');
      const aboutOverlay = document.getElementById('about-overlay');
      const closeAbout = document.getElementById('close-about');
      const cryptoOverlay = document.getElementById('crypto-overlay');
      const closeCrypto = document.getElementById('close-crypto');
      
      // Open about overlay
      aboutButton.addEventListener('click', function() {
        aboutOverlay.style.display = 'flex';
        // Add fade-in animation
        setTimeout(function() {
          aboutOverlay.style.opacity = '1';
        }, 10);
      });
      
      // Close about overlay
      closeAbout.addEventListener('click', function() {
        aboutOverlay.style.opacity = '0';
        setTimeout(function() {
          aboutOverlay.style.display = 'none';
        }, 300);
      });
      
      // Done button for about overlay
      const aboutDone = document.getElementById('about-done');
      aboutDone.addEventListener('click', function() {
        aboutOverlay.style.opacity = '0';
        setTimeout(function() {
          aboutOverlay.style.display = 'none';
        }, 300);
      });
      
      // Close overlay when clicking outside the popup
      aboutOverlay.addEventListener('click', function(e) {
        if (e.target === aboutOverlay) {
          aboutOverlay.style.opacity = '0';
          setTimeout(function() {
            aboutOverlay.style.display = 'none';
          }, 300);
        }
      });
      
      // Close crypto overlay
      closeCrypto.addEventListener('click', function() {
        cryptoOverlay.style.opacity = '0';
        setTimeout(function() {
          cryptoOverlay.style.display = 'none';
        }, 300);
      });
      
      // Done button for crypto overlay
      const cryptoDone = document.getElementById('crypto-done');
      cryptoDone.addEventListener('click', function() {
        cryptoOverlay.style.opacity = '0';
        setTimeout(function() {
          cryptoOverlay.style.display = 'none';
        }, 300);
      });
      
      // Close crypto overlay when clicking outside the popup
      cryptoOverlay.addEventListener('click', function(e) {
        if (e.target === cryptoOverlay) {
          cryptoOverlay.style.opacity = '0';
          setTimeout(function() {
            cryptoOverlay.style.display = 'none';
          }, 300);
        }
      });
    });
    
    // Event listeners
    window.addEventListener('scroll', throttle(updateParallax, 16));
    window.addEventListener('resize', updateParallax);
    window.addEventListener('load', () => {
      updateParallax();
      document.body.style.height = '100vh';
      document.body.style.minHeight = '100vh';
      window.scrollTo({ top: 0, behavior: 'smooth' });
      
      // Initialize location autocomplete
      initLocationAutocomplete();
      
      // Initialize clear specialties button
      initClearSpecialtiesButton();
    });
    
    // Function to initialize the clear specialties button
    function initClearSpecialtiesButton() {
      // Find the specialties section
      const specialtiesSection = document.getElementById('specialties-section');
      
      if (specialtiesSection) {
        // Create the clear button
        const clearButton = document.createElement('button');
        clearButton.id = 'clear-specialties';
        clearButton.type = 'button';
        clearButton.title = 'Clear all selections';
        clearButton.innerHTML = '<span style="display: flex; align-items: center; gap: 4px;">🔄 Clear</span>';
        
        // Style the button as a simple text link
        clearButton.style.position = 'absolute';
        clearButton.style.top = '10px';
        clearButton.style.right = '15px';
        clearButton.style.backgroundColor = 'transparent';
        clearButton.style.color = '#26C6DA';
        clearButton.style.border = 'none';
        clearButton.style.padding = '0';
        clearButton.style.cursor = 'pointer';
        clearButton.style.fontSize = '12px';
        clearButton.style.zIndex = '100';
        clearButton.style.opacity = '0.8';
        clearButton.style.transition = 'color 0.2s ease, opacity 0.2s ease';
        clearButton.style.display = 'none'; // Initially hide the button
        
        // Add hover effect
        clearButton.onmouseover = function() {
          this.style.color = '#4DD0E1';
          this.style.opacity = '1';
        };
        clearButton.onmouseout = function() {
          this.style.color = '#26C6DA';
          this.style.opacity = '0.8';
        };
        
        // Add click handler
        clearButton.addEventListener('click', function() {
          // Get all specialty checkboxes
          const specialtyCheckboxes = document.querySelectorAll('input[name="specialty"]');
          
          // Uncheck all checkboxes
          specialtyCheckboxes.forEach(checkbox => {
            checkbox.checked = false;
          });
          
          // Also clear preapproval radio options
          const preapprovalRadios = document.querySelectorAll('input[name="preapproval"]');
          preapprovalRadios.forEach(radio => {
            radio.checked = false;
          });
          
          // Hide preapproval amount container if visible
          const preapprovalAmountContainer = document.getElementById('preapproval-amount-container');
          if (preapprovalAmountContainer) {
            preapprovalAmountContainer.style.display = 'none';
          }
          
          // Clear preapproval amount input if it exists
          const preapprovalAmount = document.getElementById('preapproval-amount');
          if (preapprovalAmount) {
            preapprovalAmount.value = '';
          }
          
          // Add a subtle flash effect
          this.style.opacity = '1';
          this.style.color = '#4DD0E1';
          setTimeout(() => {
            this.style.opacity = '0.8';
            this.style.color = '#26C6DA';
            // Hide the button after clearing
            this.style.display = 'none';
          }, 300);
        });
        
        // Add the button to the section
        specialtiesSection.appendChild(clearButton);
        
        // Function to check if any specialty is selected and show/hide clear button
        function updateClearButtonVisibility() {
          const specialtyCheckboxes = document.querySelectorAll('input[name="specialty"]');
          const anyChecked = Array.from(specialtyCheckboxes).some(checkbox => checkbox.checked);
          
          clearButton.style.display = anyChecked ? 'block' : 'none';
        }
        
        // Add change event listeners to all specialty checkboxes
        const specialtyCheckboxes = document.querySelectorAll('input[name="specialty"]');
        specialtyCheckboxes.forEach(checkbox => {
          checkbox.addEventListener('change', updateClearButtonVisibility);
        });
        
        // Initial check in case any checkboxes are pre-selected
        updateClearButtonVisibility();
        
        console.log('Clear button added to specialties section with conditional visibility');
      } else {
        console.error('Specialties section not found');
      }
    }
    
    // Nominatim autocomplete functionality
    let nominatimCache = {};
    let lastRequestTime = 0;
    const requestDelay = 1000; // 1 second delay between requests (Nominatim policy)
    
    function initLocationAutocomplete() {
      setupAutocomplete('currentLocation', 'currentLocationResults', 'currentLocationQuickSelect');
      setupAutocomplete('desiredLocation', 'desiredLocationResults', 'desiredLocationQuickSelect');
      
      // Initialize location data
      initLocationData();
    }
    
    // Location data for quick selection
    let locationData = {};
    let currentLevel = 'countries';
    let navigationHistory = [];
    let currentInputId = null; // Make this a global variable
    
    function initLocationData() {
      // Popular countries with regions/states and major cities
      locationData = {
        countries: [
          { id: 'us', name: 'United States', icon: '🇺🇸' },
          { id: 'ca_country', name: 'Canada', icon: '🇨🇦' },
          { id: 'mx', name: 'Mexico', icon: '🇲🇽' },
          { id: 'uk', name: 'United Kingdom', icon: '🇬🇧' },
          { id: 'fr', name: 'France', icon: '🇫🇷' },
          { id: 'de', name: 'Germany', icon: '🇩🇪' },
          { id: 'es', name: 'Spain', icon: '🇪🇸' },
          { id: 'it', name: 'Italy', icon: '🇮🇹' },
          { id: 'au', name: 'Australia', icon: '🇦🇺' },
          { id: 'jp', name: 'Japan', icon: '🇯🇵' },
          { id: 'cn', name: 'China', icon: '🇨🇳' },
          { id: 'in', name: 'India', icon: '🇮🇳' },
          { id: 'br', name: 'Brazil', icon: '🇧🇷' },
          { id: 'ae', name: 'United Arab Emirates', icon: '🇦🇪' },
          { id: 'za', name: 'South Africa', icon: '🇿🇦' },
          { id: 'ru', name: 'Russia', icon: '🇷🇺' },
          { id: 'sg', name: 'Singapore', icon: '🇸🇬' },
          { id: 'kr', name: 'South Korea', icon: '🇰🇷' },
          { id: 'th', name: 'Thailand', icon: '🇹🇭' },
          { id: 'nl', name: 'Netherlands', icon: '🇳🇱' },
          { id: 'se', name: 'Sweden', icon: '🇸🇪' },
          { id: 'ch', name: 'Switzerland', icon: '🇨🇭' },
          { id: 'nz', name: 'New Zealand', icon: '🇳🇿' },
          { id: 'pt', name: 'Portugal', icon: '🇵🇹' },
          { id: 'gr', name: 'Greece', icon: '🇬🇷' },
          { id: 'ie', name: 'Ireland', icon: '🇮🇪' },
          { id: 'at', name: 'Austria', icon: '🇦🇹' },
          { id: 'pl', name: 'Poland', icon: '🇵🇱' },
          { id: 'no', name: 'Norway', icon: '🇳🇴' },
          { id: 'dk', name: 'Denmark', icon: '🇩🇰' },
          { id: 'fi', name: 'Finland', icon: '🇫🇮' },
          { id: 'il', name: 'Israel', icon: '🇮🇱' },
          { id: 'tr', name: 'Turkey', icon: '🇹🇷' },
          { id: 'ar', name: 'Argentina', icon: '🇦🇷' },
          { id: 'cl', name: 'Chile', icon: '🇨🇱' },
          { id: 'co', name: 'Colombia', icon: '🇨🇴' },
          { id: 'pe', name: 'Peru', icon: '🇵🇪' },
          { id: 'eg', name: 'Egypt', icon: '🇪🇬' },
          { id: 'sa', name: 'Saudi Arabia', icon: '🇸🇦' },
          { id: 'qa', name: 'Qatar', icon: '🇶🇦' },
          { id: 'my', name: 'Malaysia', icon: '🇲🇾' },
          { id: 'id', name: 'Indonesia', icon: '🇮🇩' },
          { id: 'ph', name: 'Philippines', icon: '🇵🇭' },
          { id: 'vn', name: 'Vietnam', icon: '🇻🇳' },
          { id: 'ua', name: 'Ukraine', icon: '🇺🇦' },
          { id: 'hu', name: 'Hungary', icon: '🇭🇺' },
          { id: 'cz', name: 'Czech Republic', icon: '🇨🇿' },
          { id: 'ro', name: 'Romania', icon: '🇷🇴' },
          { id: 'be', name: 'Belgium', icon: '🇧🇪' },
        ],
        us: [
          { id: 'al', name: 'Alabama', icon: '🌻' },
          { id: 'ak', name: 'Alaska', icon: '❄️' },
          { id: 'az', name: 'Arizona', icon: '🌵' },
          { id: 'ar', name: 'Arkansas', icon: '🐼' },
          { id: 'ca', name: 'California', icon: '🏄' },
          { id: 'co', name: 'Colorado', icon: '⛰️' },
          { id: 'ct', name: 'Connecticut', icon: '🍁' },
          { id: 'de', name: 'Delaware', icon: '🐬' },
          { id: 'fl', name: 'Florida', icon: '🌴' },
          { id: 'ga', name: 'Georgia', icon: '🍑' },
          { id: 'hi', name: 'Hawaii', icon: '🌼' },
          { id: 'id', name: 'Idaho', icon: '🌵' },
          { id: 'il', name: 'Illinois', icon: '🌆' },
          { id: 'in', name: 'Indiana', icon: '🏎️' },
          { id: 'ia', name: 'Iowa', icon: '🌽' },
          { id: 'ks', name: 'Kansas', icon: '🌽' },
          { id: 'ky', name: 'Kentucky', icon: '🍲' },
          { id: 'la', name: 'Louisiana', icon: '🍺' },
          { id: 'me', name: 'Maine', icon: '🦞' },
          { id: 'md', name: 'Maryland', icon: '🌬️' },
          { id: 'ma', name: 'Massachusetts', icon: '🦞' },
          { id: 'mi', name: 'Michigan', icon: '🚗' },
          { id: 'mn', name: 'Minnesota', icon: '🌲' },
          { id: 'ms', name: 'Mississippi', icon: '🌺' },
          { id: 'mo', name: 'Missouri', icon: '🌟' },
          { id: 'mt', name: 'Montana', icon: '🐎' },
          { id: 'ne', name: 'Nebraska', icon: '🌽' },
          { id: 'nv', name: 'Nevada', icon: '🎰' },
          { id: 'nh', name: 'New Hampshire', icon: '🌲' },
          { id: 'nj', name: 'New Jersey', icon: '🏖️' },
          { id: 'nm', name: 'New Mexico', icon: '🌅' },
          { id: 'ny', name: 'New York', icon: '🗽' },
          { id: 'nc', name: 'North Carolina', icon: '🌲' },
          { id: 'nd', name: 'North Dakota', icon: '🌽' },
          { id: 'oh', name: 'Ohio', icon: '🌟' },
          { id: 'ok', name: 'Oklahoma', icon: '🐮' },
          { id: 'or', name: 'Oregon', icon: '🌲' },
          { id: 'pa', name: 'Pennsylvania', icon: '🏛️' },
          { id: 'ri', name: 'Rhode Island', icon: '⛵' },
          { id: 'sc', name: 'South Carolina', icon: '🌴' },
          { id: 'sd', name: 'South Dakota', icon: '🐎' },
          { id: 'tn', name: 'Tennessee', icon: '🎸' },
          { id: 'tx', name: 'Texas', icon: '🤠' },
          { id: 'ut', name: 'Utah', icon: '⛰️' },
          { id: 'vt', name: 'Vermont', icon: '🍁' },
          { id: 'va', name: 'Virginia', icon: '⚓' },
          { id: 'wa', name: 'Washington', icon: '☕' },
          { id: 'wv', name: 'West Virginia', icon: '⛰️' },
          { id: 'wi', name: 'Wisconsin', icon: '🧀' },
          { id: 'wy', name: 'Wyoming', icon: '🐎' },
          { id: 'dc', name: 'District of Columbia', icon: '🏛️' },
        ],
        fl: [
          { id: 'miami', name: 'Miami', icon: '🏝️' },
          { id: 'orlando', name: 'Orlando', icon: '🏰' },
          { id: 'tampa', name: 'Tampa', icon: '⚓' },
          { id: 'jacksonville', name: 'Jacksonville', icon: '🌉' },
          { id: 'palmharbor', name: 'Palm Harbor', icon: '🌴' },
          { id: 'ftlauderdale', name: 'Fort Lauderdale', icon: '🛥️' },
          { id: 'westpalmbeach', name: 'West Palm Beach', icon: '🏖️' },
          { id: 'tallahassee', name: 'Tallahassee', icon: '🏛️' },
          { id: 'gainesville', name: 'Gainesville', icon: '🐊' },
          { id: 'sarasota', name: 'Sarasota', icon: '🌅' },
          { id: 'naples', name: 'Naples', icon: '🏌️' },
          { id: 'keywest', name: 'Key West', icon: '🐠' },
        ],
        ca: [
          { id: 'losangeles', name: 'Los Angeles', icon: '🎬' },
          { id: 'sanfrancisco', name: 'San Francisco', icon: '🌁' },
          { id: 'sandiego', name: 'San Diego', icon: '🏄' },
          { id: 'sanjose', name: 'San Jose', icon: '💻' },
          { id: 'sacramento', name: 'Sacramento', icon: '🏛️' },
          { id: 'fresno', name: 'Fresno', icon: '🌲' },
          { id: 'oakland', name: 'Oakland', icon: '🏙️' },
        ],
        ny: [
          { id: 'newyorkcity', name: 'New York City', icon: '🗽' },
          { id: 'buffalo', name: 'Buffalo', icon: '❄️' },
          { id: 'rochester', name: 'Rochester', icon: '📷' },
          { id: 'syracuse', name: 'Syracuse', icon: '🏛️' },
          { id: 'albany', name: 'Albany', icon: '🏙️' },
        ],
        // Add UAE cities
        ae: [
          { id: 'dubai', name: 'Dubai', icon: '🌇' },
          { id: 'abudhabi', name: 'Abu Dhabi', icon: '🏘️' },
          { id: 'sharjah', name: 'Sharjah', icon: '🏯' },
          { id: 'ajman', name: 'Ajman', icon: '🏖️' },
          { id: 'fujairah', name: 'Fujairah', icon: '🚢' },
          { id: 'rasalkhaimah', name: 'Ras Al Khaimah', icon: '🌌' },
          { id: 'ummalquwain', name: 'Umm Al Quwain', icon: '🌞' },
        ],
        
        // Add UK cities
        uk: [
          { id: 'london', name: 'London', icon: '🚇' },
          { id: 'manchester', name: 'Manchester', icon: '⚽' },
          { id: 'birmingham', name: 'Birmingham', icon: '🏛️' },
          { id: 'liverpool', name: 'Liverpool', icon: '🎶' },
          { id: 'edinburgh', name: 'Edinburgh', icon: '🏰' },
          { id: 'glasgow', name: 'Glasgow', icon: '🍁' },
          { id: 'leeds', name: 'Leeds', icon: '🏙️' },
          { id: 'bristol', name: 'Bristol', icon: '🚢' },
          { id: 'cardiff', name: 'Cardiff', icon: '🏰' },
          { id: 'belfast', name: 'Belfast', icon: '🏚️' },
        ],
        
        // Add Canadian cities
        ca_country: [
          { id: 'toronto', name: 'Toronto', icon: '🗽' },
          { id: 'montreal', name: 'Montreal', icon: '🍽️' },
          { id: 'vancouver', name: 'Vancouver', icon: '🏔️' },
          { id: 'calgary', name: 'Calgary', icon: '🐮' },
          { id: 'ottawa', name: 'Ottawa', icon: '🏛️' },
          { id: 'edmonton', name: 'Edmonton', icon: '🌃' },
          { id: 'quebec', name: 'Quebec City', icon: '🌹' },
          { id: 'winnipeg', name: 'Winnipeg', icon: '❄️' },
          { id: 'halifax', name: 'Halifax', icon: '🚢' },
          { id: 'victoria', name: 'Victoria', icon: '🌷' },
          { id: 'mississauga', name: 'Mississauga', icon: '🏙️' },
          { id: 'brampton', name: 'Brampton', icon: '🍁' },
          { id: 'surrey', name: 'Surrey', icon: '🌲' },
          { id: 'laval', name: 'Laval', icon: '🌇' },
          { id: 'hamilton', name: 'Hamilton', icon: '🏚️' },
          { id: 'kitchener', name: 'Kitchener', icon: '🍷' },
        ],
        
        // Add Mexican cities
        mx: [
          { id: 'mexicocity', name: 'Mexico City', icon: '🏛️' },
          { id: 'guadalajara', name: 'Guadalajara', icon: '🍹' },
          { id: 'monterrey', name: 'Monterrey', icon: '⛰️' },
          { id: 'puebla', name: 'Puebla', icon: '🍞' },
          { id: 'tijuana', name: 'Tijuana', icon: '🎧' },
          { id: 'cancun', name: 'Cancún', icon: '🏖️' },
          { id: 'acapulco', name: 'Acapulco', icon: '🌴' },
          { id: 'playa', name: 'Playa del Carmen', icon: '🏖️' },
          { id: 'cozumel', name: 'Cozumel', icon: '🦈' },
          { id: 'puertovallarta', name: 'Puerto Vallarta', icon: '🌞' },
          { id: 'cabosanlucas', name: 'Cabo San Lucas', icon: '🌊' },
        ],
        
        // Add French cities
        fr: [
          { id: 'paris', name: 'Paris', icon: '🏰' },
          { id: 'marseille', name: 'Marseille', icon: '⛵' },
          { id: 'lyon', name: 'Lyon', icon: '🍷' },
          { id: 'toulouse', name: 'Toulouse', icon: '🚀' },
          { id: 'nice', name: 'Nice', icon: '🏖️' },
          { id: 'nantes', name: 'Nantes', icon: '🌺' },
          { id: 'strasbourg', name: 'Strasbourg', icon: '🎄' },
          { id: 'montpellier', name: 'Montpellier', icon: '🌱' },
          { id: 'bordeaux', name: 'Bordeaux', icon: '🍷' },
          { id: 'lille', name: 'Lille', icon: '🏛️' },
          { id: 'cannes', name: 'Cannes', icon: '🎥' },
        ],
        
        // Add German cities
        de: [
          { id: 'berlin', name: 'Berlin', icon: '🏛️' },
          { id: 'hamburg', name: 'Hamburg', icon: '⛵' },
          { id: 'munich', name: 'Munich', icon: '🍺' },
          { id: 'cologne', name: 'Cologne', icon: '💍' },
          { id: 'frankfurt', name: 'Frankfurt', icon: '🏢' },
          { id: 'stuttgart', name: 'Stuttgart', icon: '🚗' },
          { id: 'dusseldorf', name: 'Düsseldorf', icon: '🌇' },
          { id: 'leipzig', name: 'Leipzig', icon: '🎵' },
          { id: 'dresden', name: 'Dresden', icon: '🏛️' },
          { id: 'hannover', name: 'Hannover', icon: '🌾' },
          { id: 'nuremberg', name: 'Nuremberg', icon: '🎄' },
        ],
        
        // Add Spanish cities
        es: [
          { id: 'madrid', name: 'Madrid', icon: '🏛️' },
          { id: 'barcelona', name: 'Barcelona', icon: '🏖️' },
          { id: 'valencia', name: 'Valencia', icon: '🍊' },
          { id: 'seville', name: 'Seville', icon: '🌺' },
          { id: 'malaga', name: 'Málaga', icon: '🌞' },
          { id: 'bilbao', name: 'Bilbao', icon: '🌊' },
          { id: 'granada', name: 'Granada', icon: '🎨' },
          { id: 'ibiza', name: 'Ibiza', icon: '🍿' },
          { id: 'palma', name: 'Palma de Mallorca', icon: '🌴' },
          { id: 'tenerife', name: 'Tenerife', icon: '🗻' },
          { id: 'alicante', name: 'Alicante', icon: '🏖️' },
        ],
        
        // Add Italian cities
        it: [
          { id: 'rome', name: 'Rome', icon: '🏛️' },
          { id: 'milan', name: 'Milan', icon: '👗' },
          { id: 'naples', name: 'Naples', icon: '🍕' },
          { id: 'turin', name: 'Turin', icon: '🚗' },
          { id: 'florence', name: 'Florence', icon: '🎨' },
          { id: 'venice', name: 'Venice', icon: '🚣' },
          { id: 'bologna', name: 'Bologna', icon: '🍝' },
          { id: 'verona', name: 'Verona', icon: '💖' },
          { id: 'genoa', name: 'Genoa', icon: '🚢' },
          { id: 'sicily', name: 'Sicily', icon: '🍌' },
          { id: 'sardinia', name: 'Sardinia', icon: '🏖️' },
        ],
        
        // Add Japanese cities
        jp: [
          { id: 'tokyo', name: 'Tokyo', icon: '🗽' },
          { id: 'osaka', name: 'Osaka', icon: '🍜' },
          { id: 'kyoto', name: 'Kyoto', icon: '🎑' },
          { id: 'yokohama', name: 'Yokohama', icon: '🚢' },
          { id: 'sapporo', name: 'Sapporo', icon: '❄️' },
          { id: 'nagoya', name: 'Nagoya', icon: '🚗' },
          { id: 'kobe', name: 'Kobe', icon: '🍖' },
          { id: 'fukuoka', name: 'Fukuoka', icon: '🍺' },
          { id: 'hiroshima', name: 'Hiroshima', icon: '☮️' },
          { id: 'okinawa', name: 'Okinawa', icon: '🌴' },
          { id: 'nara', name: 'Nara', icon: '🦌' },
        ],
        
        // Add Chinese cities
        cn: [
          { id: 'beijing', name: 'Beijing', icon: '🏛️' },
          { id: 'shanghai', name: 'Shanghai', icon: '💰' },
          { id: 'guangzhou', name: 'Guangzhou', icon: '🚉' },
          { id: 'shenzhen', name: 'Shenzhen', icon: '💻' },
          { id: 'chengdu', name: 'Chengdu', icon: '🐼' },
          { id: 'xian', name: 'Xi\'an', icon: '🐭' },
          { id: 'hangzhou', name: 'Hangzhou', icon: '🌏' },
          { id: 'chongqing', name: 'Chongqing', icon: '🌃' },
          { id: 'tianjin', name: 'Tianjin', icon: '🏙️' },
          { id: 'hongkong', name: 'Hong Kong', icon: '🗽' },
          { id: 'macau', name: 'Macau', icon: '🎰' },
        ],
        
        // Add Indian cities
        in: [
          { id: 'mumbai', name: 'Mumbai', icon: '🏛️' },
          { id: 'delhi', name: 'Delhi', icon: '🚌' },
          { id: 'bangalore', name: 'Bangalore', icon: '💻' },
          { id: 'hyderabad', name: 'Hyderabad', icon: '🍔' },
          { id: 'chennai', name: 'Chennai', icon: '🌍' },
          { id: 'kolkata', name: 'Kolkata', icon: '🚛' },
          { id: 'pune', name: 'Pune', icon: '🌻' },
          { id: 'jaipur', name: 'Jaipur', icon: '🐮' },
          { id: 'ahmedabad', name: 'Ahmedabad', icon: '🚩' },
          { id: 'goa', name: 'Goa', icon: '🏖️' },
          { id: 'kochi', name: 'Kochi', icon: '🚣' },
        ],
        
        // Add Brazilian cities
        br: [
          { id: 'saopaulo', name: 'São Paulo', icon: '🏛️' },
          { id: 'riodejaneiro', name: 'Rio de Janeiro', icon: '🏖️' },
          { id: 'brasilia', name: 'Brasília', icon: '🏚️' },
          { id: 'salvador', name: 'Salvador', icon: '🎉' },
          { id: 'fortaleza', name: 'Fortaleza', icon: '🌴' },
          { id: 'recife', name: 'Recife', icon: '🐬' },
          { id: 'portoalegre', name: 'Porto Alegre', icon: '🍷' },
          { id: 'manaus', name: 'Manaus', icon: '🌲' },
          { id: 'curitiba', name: 'Curitiba', icon: '🌿' },
          { id: 'belohorizonte', name: 'Belo Horizonte', icon: '⛰️' },
          { id: 'florianopolis', name: 'Florianópolis', icon: '🏖️' },
        ],
        
        // Add South African cities
        za: [
          { id: 'johannesburg', name: 'Johannesburg', icon: '🏛️' },
          { id: 'capetown', name: 'Cape Town', icon: '🗽' },
          { id: 'durban', name: 'Durban', icon: '🏖️' },
          { id: 'pretoria', name: 'Pretoria', icon: '🌺' },
          { id: 'portelizabeth', name: 'Port Elizabeth', icon: '🚢' },
          { id: 'bloemfontein', name: 'Bloemfontein', icon: '🌼' },
          { id: 'stellenbosch', name: 'Stellenbosch', icon: '🍷' },
          { id: 'kimberley', name: 'Kimberley', icon: '💎' },
          { id: 'eastlondon', name: 'East London', icon: '🌊' },
          { id: 'nelspruit', name: 'Nelspruit', icon: '🌲' },
        ],
        
        // Add Russian cities
        ru: [
          { id: 'moscow', name: 'Moscow', icon: '🏛️' },
          { id: 'saintpetersburg', name: 'Saint Petersburg', icon: '🌉' },
          { id: 'novosibirsk', name: 'Novosibirsk', icon: '❄️' },
          { id: 'yekaterinburg', name: 'Yekaterinburg', icon: '🌃' },
          { id: 'kazan', name: 'Kazan', icon: '🏠' },
          { id: 'sochi', name: 'Sochi', icon: '🏖️' },
          { id: 'vladivostok', name: 'Vladivostok', icon: '🚢' },
          { id: 'kaliningrad', name: 'Kaliningrad', icon: '🌲' },
          { id: 'nizhnynovgorod', name: 'Nizhny Novgorod', icon: '🚉' },
          { id: 'samara', name: 'Samara', icon: '🌍' },
        ],
        
        // Add Singapore regions
        sg: [
          { id: 'central', name: 'Central Region', icon: '🏛️' },
          { id: 'east', name: 'East Region', icon: '🌅' },
          { id: 'north', name: 'North Region', icon: '🚢' },
          { id: 'northeast', name: 'North-East Region', icon: '🌇' },
          { id: 'west', name: 'West Region', icon: '🌍' },
          { id: 'sentosa', name: 'Sentosa', icon: '🏖️' },
          { id: 'marinabay', name: 'Marina Bay', icon: '🌃' },
          { id: 'orchard', name: 'Orchard Road', icon: '🛍️' },
          { id: 'changi', name: 'Changi', icon: '✈️' },
          { id: 'jurongeast', name: 'Jurong East', icon: '🏢' },
        ],
        
        // Add South Korean cities
        kr: [
          { id: 'seoul', name: 'Seoul', icon: '🏛️' },
          { id: 'busan', name: 'Busan', icon: '🏖️' },
          { id: 'incheon', name: 'Incheon', icon: '✈️' },
          { id: 'daegu', name: 'Daegu', icon: '🌼' },
          { id: 'daejeon', name: 'Daejeon', icon: '💻' },
          { id: 'gwangju', name: 'Gwangju', icon: '🌇' },
          { id: 'suwon', name: 'Suwon', icon: '🏙️' },
          { id: 'ulsan', name: 'Ulsan', icon: '🚗' },
          { id: 'jeju', name: 'Jeju', icon: '🌍' },
          { id: 'gangneung', name: 'Gangneung', icon: '⛸️' },
        ],
        
        // Add Thai cities
        th: [
          { id: 'bangkok', name: 'Bangkok', icon: '🏛️' },
          { id: 'chiangmai', name: 'Chiang Mai', icon: '🚟' },
          { id: 'phuket', name: 'Phuket', icon: '🏖️' },
          { id: 'pattaya', name: 'Pattaya', icon: '🌴' },
          { id: 'krabi', name: 'Krabi', icon: '🌊' },
          { id: 'kohsamui', name: 'Koh Samui', icon: '🌴' },
          { id: 'ayutthaya', name: 'Ayutthaya', icon: '🐮' },
          { id: 'huahin', name: 'Hua Hin', icon: '🏖️' },
          { id: 'chiangrai', name: 'Chiang Rai', icon: '⛰️' },
          { id: 'kohphangan', name: 'Koh Phangan', icon: '🌟' },
        ],
        
        // Add Australian cities
        au: [
          { id: 'sydney', name: 'Sydney', icon: '🏛️' },
          { id: 'melbourne', name: 'Melbourne', icon: '🏖️' },
          { id: 'brisbane', name: 'Brisbane', icon: '🌴' },
          { id: 'perth', name: 'Perth', icon: '🌅' },
          { id: 'adelaide', name: 'Adelaide', icon: '🍷' },
          { id: 'goldcoast', name: 'Gold Coast', icon: '🏄' },
          { id: 'canberra', name: 'Canberra', icon: '🏛️' },
          { id: 'hobart', name: 'Hobart', icon: '⛵' },
          { id: 'darwin', name: 'Darwin', icon: '🌼' },
        ],
        
        // Add Texas cities
        tx: [
          { id: 'houston', name: 'Houston', icon: '🚀' },
          { id: 'dallas', name: 'Dallas', icon: '🌟' },
          { id: 'austin', name: 'Austin', icon: '🎸' },
          { id: 'sanantonio', name: 'San Antonio', icon: '🌵' },
          { id: 'fortworth', name: 'Fort Worth', icon: '🤠' },
          { id: 'elpaso', name: 'El Paso', icon: '🏔️' },
          { id: 'arlington', name: 'Arlington', icon: '⚾' },
          { id: 'corpuschristi', name: 'Corpus Christi', icon: '🏖️' },
          { id: 'plano', name: 'Plano', icon: '🏐' },
          { id: 'laredo', name: 'Laredo', icon: '🔮' },
        ],
        
        // Add California cities
        ca: [
          { id: 'losangeles', name: 'Los Angeles', icon: '🎬' },
          { id: 'sanfrancisco', name: 'San Francisco', icon: '🌁' },
          { id: 'sandiego', name: 'San Diego', icon: '🏄' },
          { id: 'sanjose', name: 'San Jose', icon: '💻' },
          { id: 'sacramento', name: 'Sacramento', icon: '🏛️' },
          { id: 'fresno', name: 'Fresno', icon: '🌲' },
          { id: 'oakland', name: 'Oakland', icon: '🏙️' },
          { id: 'longbeach', name: 'Long Beach', icon: '🏖️' },
          { id: 'bakersfield', name: 'Bakersfield', icon: '🌽' },
          { id: 'anaheim', name: 'Anaheim', icon: '🌟' },
          { id: 'santaana', name: 'Santa Ana', icon: '🌵' },
          { id: 'riverside', name: 'Riverside', icon: '🌲' },
          { id: 'stockton', name: 'Stockton', icon: '🚢' },
          { id: 'irvine', name: 'Irvine', icon: '🏫' },
          { id: 'sanbernadino', name: 'San Bernardino', icon: '🏔️' },
          { id: 'modesto', name: 'Modesto', icon: '🌽' },
        ],
        
        // Add New York cities
        ny: [
          { id: 'newyorkcity', name: 'New York City', icon: '🗽' },
          { id: 'buffalo', name: 'Buffalo', icon: '❄️' },
          { id: 'rochester', name: 'Rochester', icon: '📷' },
          { id: 'syracuse', name: 'Syracuse', icon: '🏛️' },
          { id: 'albany', name: 'Albany', icon: '🏙️' },
          { id: 'yonkers', name: 'Yonkers', icon: '🏡' },
          { id: 'newrochelle', name: 'New Rochelle', icon: '🌇' },
          { id: 'mountvernon', name: 'Mount Vernon', icon: '🌲' },
          { id: 'schenectady', name: 'Schenectady', icon: '🛠️' },
          { id: 'utica', name: 'Utica', icon: '🏚️' },
          { id: 'whiteplaints', name: 'White Plains', icon: '🏙️' },
        ],
      };
    }
    
    function setupAutocomplete(inputId, resultsId, quickSelectId) {
      const input = document.getElementById(inputId);
      const resultsContainer = document.getElementById(resultsId);
      const quickSelectContainer = document.getElementById(quickSelectId);
      let selectedIndex = -1;
      let activeContainer = null;
      
      // Show quick select on focus
      input.addEventListener('focus', function() {
        // Hide any other open quick selects
        document.querySelectorAll('.location-quick-select').forEach(el => {
          el.style.display = 'none';
        });
        document.querySelectorAll('.autocomplete-results').forEach(el => {
          el.style.display = 'none';
        });
        
        // Reset navigation history and show countries
        navigationHistory = [];
        currentLevel = 'countries';
        currentInputId = inputId;
        showQuickSelectLevel(quickSelectContainer, 'countries');
      });
      
      input.addEventListener('input', throttle(async function() {
        const query = input.value.trim();
        
        // Hide quick select when typing
        quickSelectContainer.style.display = 'none';
        
        if (query.length < 3) {
          resultsContainer.style.display = 'none';
          return;
        }
        
        try {
          const results = await searchLocation(query);
          displayResults(results, resultsContainer, input);
          activeContainer = resultsContainer;
        } catch (error) {
          console.error('Error searching locations:', error);
        }
      }, 300));
      
      // Handle keyboard navigation
      input.addEventListener('keydown', function(e) {
        let items;
        
        if (activeContainer === resultsContainer) {
          items = resultsContainer.querySelectorAll('.autocomplete-item');
        } else if (quickSelectContainer.style.display === 'block') {
          items = quickSelectContainer.querySelectorAll('.quick-select-item');
          activeContainer = quickSelectContainer;
        } else {
          return;
        }
        
        if (e.key === 'ArrowDown') {
          e.preventDefault();
          selectedIndex = Math.min(selectedIndex + 1, items.length - 1);
          updateSelection(items, selectedIndex);
        } else if (e.key === 'ArrowUp') {
          e.preventDefault();
          selectedIndex = Math.max(selectedIndex - 1, -1);
          updateSelection(items, selectedIndex);
        } else if (e.key === 'Enter' && selectedIndex >= 0) {
          e.preventDefault();
          items[selectedIndex].click();
        } else if (e.key === 'Escape') {
          if (navigationHistory.length > 0) {
            // Go back one level in quick select
            const prevLevel = navigationHistory.pop();
            showQuickSelectLevel(quickSelectContainer, prevLevel);
          } else {
            // Close everything
            resultsContainer.style.display = 'none';
            quickSelectContainer.style.display = 'none';
            activeContainer = null;
          }
          selectedIndex = -1;
        }
      });
      
      // Handle clicks on the quick select container to prevent closing
      quickSelectContainer.addEventListener('click', function(e) {
        e.stopPropagation();
      });
      
      // Hide results when clicking outside
      document.addEventListener('click', function(e) {
        // Check if the click is outside both containers and the input
        if (e.target !== input && 
            !resultsContainer.contains(e.target) && 
            !quickSelectContainer.contains(e.target)) {
          resultsContainer.style.display = 'none';
          quickSelectContainer.style.display = 'none';
          activeContainer = null;
          
          // Clean up the keyboard navigation event listener if it exists
          if (quickSelectContainer.keyNavHandler) {
            document.removeEventListener('keydown', quickSelectContainer.keyNavHandler);
            quickSelectContainer.keyNavHandler = null;
          }
        }
      });
    }
    
    function showQuickSelectLevel(container, level) {
      container.innerHTML = '';
      selectedIndex = -1;
      let typeBuffer = '';
      let typeBufferTimeout = null;
      
      // Add title
      const title = document.createElement('div');
      title.className = 'quick-select-title';
      
      if (level === 'countries') {
        title.textContent = 'Select a Country';
      } else if (level === 'us') {
        title.textContent = 'Select a State';
      } else {
        title.textContent = 'Select a City';
      }
      
      container.appendChild(title);
      
      // Add back button if we're not at the top level
      if (navigationHistory.length > 0) {
        const backButton = document.createElement('div');
        backButton.className = 'back-button';
        backButton.innerHTML = '<i class="fas fa-arrow-left"></i> Back';
        backButton.addEventListener('click', function(e) {
          e.stopPropagation(); // Prevent event bubbling
          const prevLevel = navigationHistory.pop();
          showQuickSelectLevel(container, prevLevel);
        });
        container.appendChild(backButton);
      }
      
      // Add keyboard navigation by first letter
      const handleKeyNavigation = function(e) {
        // Only process if the quick select is visible
        if (container.style.display !== 'block') return;
        
        // Ignore special keys like arrows, enter, etc.
        if (e.key.length > 1) return;
        
        // Add the key to the buffer
        typeBuffer += e.key.toLowerCase();
        
        // Clear the timeout if it exists
        if (typeBufferTimeout) clearTimeout(typeBufferTimeout);
        
        // Set a timeout to clear the buffer after 1 second
        typeBufferTimeout = setTimeout(() => {
          typeBuffer = '';
        }, 1000);
        
        // Find the first item that starts with the buffer
        const items = container.querySelectorAll('.quick-select-item');
        let found = false;
        
        for (let i = 0; i < items.length; i++) {
          // Get the name part from the item's data attribute
          const itemElement = items[i];
          const itemName = itemElement.getAttribute('data-name').toLowerCase();
          
          if (itemName.startsWith(typeBuffer)) {
            // Scroll to the item and center it in the view
            itemElement.scrollIntoView({ block: 'center', behavior: 'smooth' });
            
            // Highlight the item
            items.forEach(item => item.classList.remove('selected'));
            itemElement.classList.add('selected');
            selectedIndex = i;
            found = true;
            break;
          }
        }
        
        // If no match was found with the current buffer, try with just the first character
        // This helps when users type too fast and the buffer doesn't match any item
        if (!found && typeBuffer.length > 1) {
          const firstChar = typeBuffer.charAt(0);
          for (let i = 0; i < items.length; i++) {
            const itemName = items[i].getAttribute('data-name').toLowerCase();
            if (itemName.startsWith(firstChar)) {
              items[i].scrollIntoView({ block: 'center', behavior: 'smooth' });
              items.forEach(item => item.classList.remove('selected'));
              items[i].classList.add('selected');
              selectedIndex = i;
              break;
            }
          }
        }
      };
      
      // Add the event listener to the document
      document.addEventListener('keydown', handleKeyNavigation);
      
      // Store the event listener reference for removal when needed
      container.keyNavHandler = handleKeyNavigation;
      
      // Add items
      if (locationData[level]) {
        locationData[level].forEach(item => {
          const element = document.createElement('div');
          element.className = 'quick-select-item';
          element.setAttribute('data-name', item.name); // Add data-name attribute for keyboard navigation
          element.innerHTML = `<span class="icon">${item.icon}</span> ${item.name}`;
          
          element.addEventListener('click', function(e) {
            e.stopPropagation(); // Prevent event bubbling
            
            if (locationData[item.id]) {
              // If this item has children, navigate to them
              navigationHistory.push(level);
              showQuickSelectLevel(container, item.id);
            } else {
              // This is a leaf node (city), select it
              let fullLocation = item.name;
              
              // Build the full location string based on navigation history
              if (navigationHistory.length > 0) {
                const parentLevel = navigationHistory[navigationHistory.length - 1];
                const parentItem = locationData[parentLevel].find(i => i.id === level);
                
                if (parentItem) {
                  if (parentLevel === 'countries') {
                    fullLocation += `, ${parentItem.name}`;
                  } else {
                    fullLocation += `, ${parentItem.name}`;
                    
                    // Add country if available
                    if (navigationHistory.length > 1) {
                      const countryLevel = navigationHistory[0];
                      const countryItem = locationData.countries.find(i => i.id === countryLevel);
                      if (countryItem) {
                        fullLocation += `, ${countryItem.name}`;
                      }
                    }
                  }
                }
              }
              
              // Set the input value and hide the quick select
              const input = document.getElementById(currentInputId);
              input.value = fullLocation;
              container.style.display = 'none';
            }
          });
          
          container.appendChild(element);
        });
      }
      
      container.style.display = 'block';
    }
    
    function updateSelection(items, selectedIndex) {
      items.forEach((item, index) => {
        if (index === selectedIndex) {
          item.classList.add('selected');
          item.scrollIntoView({ block: 'nearest' });
        } else {
          item.classList.remove('selected');
        }
      });
    }
    
    async function searchLocation(query) {
      // Check cache first
      if (nominatimCache[query]) {
        return nominatimCache[query];
      }
      
      // Respect rate limiting
      const now = Date.now();
      const timeToWait = Math.max(0, requestDelay - (now - lastRequestTime));
      
      if (timeToWait > 0) {
        await new Promise(resolve => setTimeout(resolve, timeToWait));
      }
      
      // Make the API request
      lastRequestTime = Date.now();
      const response = await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(query)}&limit=5&addressdetails=1`, {
        headers: {
          'User-Agent': 'WebRealtorFL-App/1.0' // Required by Nominatim policy
        }
      });
      
      if (!response.ok) {
        throw new Error('Failed to fetch location data');
      }
      
      const data = await response.json();
      
      // Process and format the results
      const results = data.map(item => {
        let formattedAddress = '';
        
        if (item.address) {
          const parts = [];
          if (item.address.city || item.address.town || item.address.village) {
            parts.push(item.address.city || item.address.town || item.address.village);
          }
          if (item.address.state) {
            parts.push(item.address.state);
          }
          if (item.address.country) {
            parts.push(item.address.country);
          }
          formattedAddress = parts.join(', ');
        } else {
          formattedAddress = item.display_name;
        }
        
        return {
          display: formattedAddress,
          full: item.display_name
        };
      });
      
      // Cache the results
      nominatimCache[query] = results;
      
      return results;
    }
    
    function displayResults(results, container, input) {
      container.innerHTML = '';
      
      if (results.length === 0) {
        container.style.display = 'none';
        return;
      }
      
      results.forEach(result => {
        const item = document.createElement('div');
        item.className = 'autocomplete-item';
        item.textContent = result.display;
        item.title = result.full;
        
        item.addEventListener('click', () => {
          input.value = result.display;
          container.style.display = 'none';
        });
        
        container.appendChild(item);
      });
      
      container.style.display = 'block';
    }
  </script>
  <script>
    const translations = {
      en: {
        title: "Unlock Your Florida Property",
        subtitle: "Free, Fast Agent Matches Powered by Licensed <span class='web3-bold'>Experts</span>, <span class='web3-bold'>A.I</span> & <span class='web3-bold'>Web3</span>",
        // Basic Information Fields
        name: "Name",
        email: "Email",
        phone: "Phone (Optional)",
        // Location Fields
        location_header: "Location (From → To)",
        current_location: "Current Home",
        desired_location: "Desired Move",
        // Client Type Dropdown
        client_type: "Client Type",
        type_buyer: "🏠 Buyer",
        type_seller: "📈 Seller",
        type_investor: "💰 Investor",
        type_renter: "🔑 Renter",
        // Property Type Dropdown
        property_type: "Property Type",
        single_family: "🏠 Single-family",
        condo: "🏢 Condo",
        townhouse: "🏡 Townhouse",
        multi_family: "🏘️ Multi-family",
        commercial: "🏬 Commercial",
        land: "🌳 Land",
        vacation_home: "🏖️ Vacation/Second Home",
        senior_living: "👴 Senior Living",
        farm_ranch: "🚜 Farm/Ranch",
        historic_property: "🏛️ Historic Property",
        pud: "🏙️ PUD",
        // Budget Range
        budget_range: "Budget/Price Range ($)",
        // Timeline Dropdown
        timeline: "Timeline",
        immediate: "⚡ Immediate",
        "1_3_months": "📅 1-3 Months",
        "3_6_months": "📆 3-6 Months",
        "6_plus_months": "🕒 6+ Months",
        // Specialties & Resources
        specialties: "Specialties & Resources",
        specialty_crypto: "🪙 Crypto",
        specialty_luxury: "✨ Luxury",
        specialty_divorce: "⚖️ Divorce",
        specialty_foreclosure: "🏚️ Foreclosure",
        specialty_reo: "🏦 REO",
        specialty_short_sale: "📉 Short Sale",
        specialty_first_time: "🏠 First-Time Buyer",
        specialty_commercial: "🏬 Commercial",
        specialty_investor: "💰 Investor",
        specialty_renter: "🏠 Renter",
        specialty_landlord: "🏡 Landlord",
        specialty_senior: "👴 Senior Real Estate",
        specialty_military: "🎖️ Military Relocation",
        specialty_probate: "📜 Probate",
        specialty_eco: "🌱 Eco-Friendly",
        specialty_international: "🌍 International Buyer",
        specialty_property_mgmt: "🔧 Property Management",
        // Notes Field
        notes: "Additional notes or must-haves...",
        // Referral Source Dropdown
        referral_source: "How Did You Find Us?",
        referral_website: "🌐 Website",
        referral_social: "📱 Social Media",
        referral_propy: "🏢 Propy",
        referral_kw: "🏠 Keller Williams",
        referral_friend: "👪 Friend/Family",
        referral_other: "📌 Other",
        // Submit Button
        submit: "Find My Expert Agent Now!",
        // System Messages
        thank_you: "Thank you for submitting! An agent will contact you soon.",
        ok: "OK",
        submitting: "Submitting...",
        please_fill_name_email: "Please fill in your name and email before submitting.",
        // Language Selection
        select_language: "Select your preferred language",
        lang_english: "English",
        lang_spanish: "Spanish",
        lang_chinese: "Chinese",
        lang_arabic: "Arabic",
        lang_russian: "Russian",
        lang_portuguese: "Portuguese",
        lang_french: "French",
        lang_italian: "Italian",
        lang_german: "German",
        lang_japanese: "Japanese",
        lang_swedish: "Swedish",
        lang_korean: "Korean",
        // Footer Links
        propy_link: "Propy",
        propy_text: "Streamlined title and real estate transactions with blockchain tech.",
        web3_education: "Web3 Education:",
        cyrin: "Cyrin",
        updraft: "Updraft",
        your_courses: "Your Courses",
        web3_text: "Learn blockchain for real estate.",
        foreclosure_link: "Free Foreclosure/Short Sale Resources",
        foreclosure_text: "Get help and info from NAR.",
        using_crypto: "Using Crypto"
      },
      es: {
        title: "Desbloquea Tu Propiedad en Florida",
        subtitle: "Conexiones Gratuitas y Rápidas con Agentes por Expertos Licenciados en FL y <span class='web3-bold'>Web3</span>",
        // Basic Information Fields
        name: "Nombre",
        email: "Email",
        phone: "Teléfono (Opcional)",
        // Location Fields
        location_header: "Ubicación (Desde → Hasta)",
        current_location: "Hogar Actual",
        desired_location: "Mudanza Deseada",
        // Client Type Dropdown
        client_type: "Tipo de Cliente",
        type_buyer: "🏠 Comprador",
        type_seller: "📈 Vendedor",
        type_investor: "💰 Inversionista",
        type_renter: "🔑 Inquilino",
        // Property Type Dropdown
        property_type: "Tipo de Propiedad",
        single_family: "🏠 Unifamiliar",
        condo: "🏢 Condominio",
        townhouse: "🏡 Casa adosada",
        multi_family: "🏘️ Multifamiliar",
        commercial: "🏬 Comercial",
        land: "🌳 Terreno",
        // Budget Range
        budget_range: "Rango de Presupuesto ($)",
        // Timeline Dropdown
        timeline: "Cronograma",
        immediate: "⚡ Inmediato",
        "1_3_months": "📅 1-3 Meses",
        "3_6_months": "📆 3-6 Meses",
        "6_plus_months": "🕒 6+ Meses",
        // Specialties & Resources
        specialties: "Especialidades y Recursos",
        specialty_crypto: "🪙 Crypto",
        specialty_luxury: "✨ Lujo",
        specialty_divorce: "⚖️ Divorcio",
        specialty_foreclosure: "🏚️ Ejecución hipotecaria",
        specialty_reo: "🏦 REO",
        specialty_short_sale: "📉 Venta corta",
        specialty_first_time: "🏠 Comprador primerizo",
        specialty_commercial: "🏬 Comercial",
        specialty_investor: "💰 Inversionista",
        specialty_renter: "🏠 Inquilino",
        specialty_landlord: "🏡 Propietario",
        specialty_senior: "👴 Inmuebles para Mayores",
        specialty_military: "🎖️ Reubicación Militar",
        specialty_probate: "📜 Sucesiones",
        specialty_eco: "🌱 Ecológico",
        specialty_international: "🌍 Comprador Internacional",
        specialty_property_mgmt: "🔧 Administración de Propiedades",
        // Notes Field
        notes: "Notas adicionales o requisitos...",
        // Referral Source Dropdown
        referral_source: "¿Cómo nos encontraste?",
        referral_website: "🌐 Sitio web",
        referral_social: "📱 Redes sociales",
        referral_propy: "🏢 Propy",
        referral_kw: "🏠 Keller Williams",
        referral_friend: "👪 Amigo/Familia",
        referral_other: "📌 Otro",
        // Submit Button
        submit: "¡Encuentra Mi Agente Experto Ahora!",
        // System Messages
        thank_you: "¡Gracias por enviar! Un agente se pondrá en contacto contigo pronto.",
        ok: "OK",
        submitting: "Enviando...",
        please_fill_name_email: "Por favor, completa tu nombre y correo electrónico antes de enviar.",
        // Language Selection
        select_language: "Selecciona tu idioma preferido",
        lang_english: "Inglés",
        lang_spanish: "Español",
        lang_chinese: "Chino",
        lang_arabic: "Árabe",
        lang_russian: "Ruso",
        lang_portuguese: "Portugués",
        lang_french: "Francés",
        lang_italian: "Italiano",
        lang_german: "Alemán",
        lang_japanese: "Japonés",
        lang_swedish: "Sueco",
        lang_korean: "Coreano",
        // Footer Links
        propy_link: "Propy",
        propy_text: "Transacciones inmobiliarias simplificadas con tecnología blockchain.",
        web3_education: "Educación Web3:",
        cyrin: "Cyrin",
        updraft: "Updraft",
        your_courses: "Tus Cursos",
        web3_text: "Aprende blockchain para bienes raíces.",
        foreclosure_link: "Recursos gratuitos de ejecución hipotecaria/venta corta",
        foreclosure_text: "Obtén ayuda e información de NAR.",
        using_crypto: "Usando Crypto"
      },
      zh: {
        title: "解锁您的佛罗里达房产",
        subtitle: "由佛罗里达州许可专家和<span class='web3-bold'>Web3</span>赋能的免费快速代理匹配",
        // Basic Information Fields
        name: "姓名",
        email: "电子邮件",
        phone: "电话（可选）",
        // Location Fields
        location_header: "位置（从 → 到）",
        current_location: "当前家庭",
        desired_location: "期望搬家",
        // Client Type Dropdown
        client_type: "客户类型",
        type_buyer: "🏠 买家",
        type_seller: "📈 卖家",
        type_investor: "💰 投资者",
        type_renter: "🔑 租户",
        // Property Type Dropdown
        property_type: "房产类型",
        single_family: "🏠 独栋别墅",
        condo: "🏢 公寓",
        townhouse: "🏡 联排别墅",
        multi_family: "🏘️ 多户住宅",
        commercial: "🏬 商业地产",
        land: "🌳 土地",
        // Budget Range
        budget_range: "预算/价格范围 ($)",
        // Timeline Dropdown
        timeline: "时间表",
        immediate: "⚡ 立即",
        "1_3_months": "📅 1-3 个月",
        "3_6_months": "📆 3-6 个月",
        "6_plus_months": "🕒 6+ 个月",
        // Specialties & Resources
        specialties: "专业与资源",
        specialty_crypto: "🪙 加密货币",
        specialty_luxury: "✨ 豪华房产",
        specialty_divorce: "⚖️ 离婚",
        specialty_foreclosure: "🏚️ 止赔",
        specialty_reo: "🏦 银行收回房产",
        specialty_short_sale: "📉 短售",
        specialty_first_time: "🏠 首次购房者",
        specialty_commercial: "🏬 商业地产",
        specialty_investor: "💰 投资者",
        specialty_renter: "🏠 租户",
        specialty_landlord: "🏡 房东",
        specialty_senior: "👴 老年人房地产",
        specialty_military: "🎖️ 军人迁移",
        specialty_probate: "📜 遗产管理",
        specialty_eco: "🌱 生态环保",
        specialty_international: "🌍 国际买家",
        specialty_property_mgmt: "🔧 物业管理",
        // Notes Field
        notes: "其他要求或必要条件...",
        // Referral Source Dropdown
        referral_source: "您是如何找到我们的？",
        referral_website: "🌐 网站",
        referral_social: "📱 社交媒体",
        referral_propy: "🏢 Propy",
        referral_kw: "🏠 Keller Williams",
        referral_friend: "👪 朋友/家人",
        referral_other: "📌 其他",
        // Submit Button
        submit: "立即找到我的专家代理！",
        // System Messages
        thank_you: "感谢您的提交！代理将尽快与您联系。",
        ok: "确定",
        submitting: "提交中...",
        please_fill_name_email: "提交前请填写您的姓名和电子邮件。",
        // Language Selection
        select_language: "选择您的首选语言",
        lang_english: "英语",
        lang_spanish: "西班牙语",
        lang_chinese: "中文",
        lang_arabic: "阿拉伯语",
        lang_russian: "俄语",
        lang_portuguese: "葡萄牙语",
        lang_french: "法语",
        lang_italian: "意大利语",
        lang_german: "德语",
        lang_japanese: "日语",
        lang_swedish: "瑞典语",
        lang_korean: "韩语",
        // Footer Links
        propy_link: "Propy",
        propy_text: "使用区块链技术简化的房地产交易。",
        web3_education: "Web3 教育:",
        cyrin: "Cyrin",
        updraft: "Updraft",
        your_courses: "您的课程",
        web3_text: "学习房地产区块链。",
        foreclosure_link: "免费止赔/短售资源",
        foreclosure_text: "从 NAR 获取帮助和信息。",
        using_crypto: "使用加密货币"
      },
      ar: {
        title: "افتح عقارك في فلوريدا",
        subtitle: "مطابقة وكلاء مجانية وسريعة مدعومة من خبراء فلوريدا المرخصين و <span class='web3-bold'>Web3</span>",
        // Basic Information Fields
        name: "الاسم",
        email: "البريد الإلكتروني",
        phone: "الهاتف (اختياري)",
        // Location Fields
        location_header: "الموقع (من → إلى)",
        current_location: "المنزل الحالي",
        desired_location: "الانتقال المرغوب",
        // Client Type Dropdown
        client_type: "نوع العميل",
        type_buyer: "🏠 مشتري",
        type_seller: "📈 بائع",
        type_investor: "💰 مستثمر",
        type_renter: "🔑 مستأجر",
        // Property Type Dropdown
        property_type: "نوع العقار",
        single_family: "🏠 منزل عائلي واحد",
        condo: "🏢 شقة",
        townhouse: "🏡 منزل متلاصق",
        multi_family: "🏘️ متعدد العائلات",
        commercial: "🏬 تجاري",
        land: "🌳 أرض",
        vacation_home: "🏖️ منزل عطلات/منزل ثانٍ",
        senior_living: "👴 سكن كبار السن",
        farm_ranch: "🚜 مزرعة/مرعى",
        historic_property: "🏛️ عقار تاريخي",
        pud: "🏙️ تطوير حضري مخطط",
        // Budget Range
        budget_range: "نطاق الميزانية/السعر ($)",
        // Timeline Dropdown
        timeline: "الجدول الزمني",
        immediate: "⚡ فوري",
        "1_3_months": "📅 1-3 أشهر",
        "3_6_months": "📆 3-6 أشهر",
        "6_plus_months": "🕒 6+ أشهر",
        // Specialties & Resources
        specialties: "التخصصات والموارد",
        specialty_crypto: "🪙 عملات رقمية",
        specialty_luxury: "✨ فاخر",
        specialty_divorce: "⚖️ طلاق",
        specialty_foreclosure: "🏚️ حجز",
        specialty_reo: "🏦 عقارات مملوكة للبنك",
        specialty_short_sale: "📉 بيع قصير",
        specialty_first_time: "🏠 مشتري للمرة الأولى",
        specialty_commercial: "🏬 تجاري",
        specialty_investor: "💰 مستثمر",
        specialty_renter: "🏠 مستأجر",
        specialty_landlord: "🏡 مالك",
        specialty_senior: "👴 عقارات كبار السن",
        specialty_military: "🎖️ انتقال عسكري",
        specialty_probate: "📜 الوصاية",
        specialty_eco: "🌱 صديق للبيئة",
        specialty_international: "🌍 مشتري دولي",
        specialty_property_mgmt: "🔧 إدارة الممتلكات",
        // Notes Field
        notes: "ملاحظات إضافية أو متطلبات أساسية...",
        // Referral Source Dropdown
        referral_source: "كيف وجدتنا؟",
        referral_website: "🌐 موقع الويب",
        referral_social: "📱 وسائل التواصل الاجتماعي",
        referral_propy: "🏢 بروبي",
        referral_kw: "🏠 كيلر ويليامز",
        referral_friend: "👪 صديق/عائلة",
        referral_other: "📌 أخرى",
        // Submit Button
        submit: "ابحث عن وكيلي الخبير الآن!",
        // System Messages
        thank_you: "شكراً للتقديم! سيتصل بك وكيل قريباً.",
        ok: "حسناً",
        submitting: "جاري التقديم...",
        please_fill_name_email: "يرجى ملء اسمك وبريدك الإلكتروني قبل التقديم.",
        // Language Selection
        select_language: "اختر لغتك المفضلة",
        lang_english: "الإنجليزية",
        lang_spanish: "الإسبانية",
        lang_chinese: "الصينية",
        lang_arabic: "العربية",
        lang_russian: "الروسية",
        lang_portuguese: "البرتغالية",
        lang_french: "الفرنسية",
        lang_italian: "الإيطالية",
        lang_german: "الألمانية",
        lang_japanese: "اليابانية",
        lang_swedish: "السويدية",
        lang_korean: "الكورية",
        // Footer Links
        propy_link: "Propy",
        propy_text: "معاملات العقارات المبسطة بتقنية بلوكتشين.",
        web3_education: "تعليم Web3:",
        cyrin: "Cyrin",
        updraft: "Updraft",
        your_courses: "دوراتك",
        web3_text: "تعلم بلوكتشين للعقارات.",
        foreclosure_link: "موارد مجانية للحجز/البيع القصير",
        foreclosure_text: "احصل على مساعدة ومعلومات من NAR.",
        using_crypto: "استخدام العملات الرقمية"
      },
      ru: {
        title: "Откройте свою недвижимость во Флориде",
        subtitle: "Бесплатный, быстрый подбор агентов от лицензированных экспертов Флориды и <span class='web3-bold'>Web3</span>",
        // Basic Information Fields
        name: "Имя",
        email: "Электронная почта",
        phone: "Телефон (необязательно)",
        // Location Fields
        location_header: "Местоположение (Откуда → Куда)",
        current_location: "Текущий дом",
        desired_location: "Желаемый переезд",
        // Client Type Dropdown
        client_type: "Тип клиента",
        type_buyer: "🏠 Покупатель",
        type_seller: "📈 Продавец",
        type_investor: "💰 Инвестор",
        type_renter: "🔑 Арендатор",
        // Property Type Dropdown
        property_type: "Тип недвижимости",
        single_family: "🏠 Дом на одну семью",
        condo: "🏢 Квартира",
        townhouse: "🏡 Таунхаус",
        multi_family: "🏘️ Многоквартирный дом",
        commercial: "🏬 Коммерческая",
        land: "🌳 Земля",
        vacation_home: "🏖️ Дом для отдыха/Второй дом",
        senior_living: "👴 Жилье для пожилых",
        farm_ranch: "🚜 Ферма/Ранчо",
        historic_property: "🏛️ Историческая недвижимость",
        pud: "🏙️ Планируемая городская застройка",
        // Budget Range
        budget_range: "Диапазон бюджета/цены ($)",
        // Timeline Dropdown
        timeline: "Временные рамки",
        immediate: "⚡ Немедленно",
        "1_3_months": "📅 1-3 месяца",
        "3_6_months": "📆 3-6 месяцев",
        "6_plus_months": "🕒 6+ месяцев",
        // Specialties & Resources
        specialties: "Специализации и ресурсы",
        specialty_crypto: "🪙 Криптовалюта",
        specialty_luxury: "✨ Премиум-класс",
        specialty_divorce: "⚖️ Развод",
        specialty_foreclosure: "🏚️ Отчуждение за долги",
        specialty_reo: "🏦 Имущество банка",
        specialty_short_sale: "📉 Короткая продажа",
        specialty_first_time: "🏠 Покупатель впервые",
        specialty_commercial: "🏬 Коммерческая",
        specialty_investor: "💰 Инвестор",
        specialty_renter: "🏠 Арендатор",
        specialty_landlord: "🏡 Арендодатель",
        specialty_senior: "👴 Недвижимость для пожилых",
        specialty_military: "🎖️ Военный переезд",
        specialty_probate: "📜 Наследственное имущество",
        specialty_eco: "🌱 Экологичное жилье",
        specialty_international: "🌍 Международный покупатель",
        specialty_property_mgmt: "🔧 Управление недвижимостью",
        // Notes Field
        notes: "Дополнительные примечания или обязательные требования...",
        // Referral Source Dropdown
        referral_source: "Как вы нас нашли?",
        referral_website: "🌐 Веб-сайт",
        referral_social: "📱 Социальные сети",
        referral_propy: "🏢 Propy",
        referral_kw: "🏠 Keller Williams",
        referral_friend: "👪 Друзья/Семья",
        referral_other: "📌 Другое",
        // Submit Button
        submit: "Найти моего эксперта-агента сейчас!",
        // System Messages
        thank_you: "Спасибо за отправку! Агент свяжется с вами в ближайшее время.",
        ok: "OK",
        submitting: "Отправка...",
        please_fill_name_email: "Пожалуйста, заполните ваше имя и электронную почту перед отправкой.",
        // Language Selection
        select_language: "Выберите предпочитаемый язык",
        lang_english: "Английский",
        lang_spanish: "Испанский",
        lang_chinese: "Китайский",
        lang_arabic: "Арабский",
        lang_russian: "Русский",
        lang_portuguese: "Португальский",
        lang_french: "Французский",
        lang_italian: "Итальянский",
        lang_german: "Немецкий",
        lang_japanese: "Японский",
        lang_swedish: "Шведский",
        lang_korean: "Корейский",
        // Footer Links
        propy_link: "Propy",
        propy_text: "Упрощенные сделки с недвижимостью с использованием блокчейн-технологий.",
        web3_education: "Образование Web3:",
        cyrin: "Cyrin",
        updraft: "Updraft",
        your_courses: "Ваши курсы",
        web3_text: "Изучайте блокчейн для недвижимости.",
        foreclosure_link: "Бесплатные ресурсы по отчуждению/коротким продажам",
        foreclosure_text: "Получите помощь и информацию от NAR.",
        using_crypto: "Использование криптовалюты"
      },
      pt: {
        title: "Desbloqueie Sua Propriedade na Flórida",
        subtitle: "Conexões Gratuitas e Rápidas com Agentes por Especialistas Licenciados na FL e <span class='web3-bold'>Web3</span>",
        // Basic Information Fields
        name: "Nome",
        email: "Email",
        phone: "Telefone (Opcional)",
        // Location Fields
        location_header: "Localização (De → Para)",
        current_location: "Casa Atual",
        desired_location: "Mudança Desejada",
        // Client Type Dropdown
        client_type: "Tipo de Cliente",
        type_buyer: "🏠 Comprador",
        type_seller: "📈 Vendedor",
        type_investor: "💰 Investidor",
        type_renter: "🔑 Locador",
        // Property Type Dropdown
        property_type: "Tipo de Propriedade",
        single_family: "🏠 Casa Unifamiliar",
        condo: "🏢 Condomínio",
        townhouse: "🏡 Casa Geminada",
        multi_family: "🏘️ Multifamiliar",
        commercial: "🏬 Comercial",
        land: "🌳 Terreno",
        // Budget Range
        budget_range: "Faixa de Orçamento/Preço ($)",
        // Timeline Dropdown
        timeline: "Cronograma",
        immediate: "⚡ Imediato",
        "1_3_months": "📅 1-3 Meses",
        "3_6_months": "📆 3-6 Meses",
        "6_plus_months": "🕒 6+ Meses",
        // Specialties & Resources
        specialties: "Especialidades e Recursos",
        specialty_crypto: "🪙 Cripto",
        specialty_luxury: "✨ Luxo",
        specialty_divorce: "⚖️ Divórcio",
        specialty_foreclosure: "🏚️ Execução Hipotecária",
        specialty_reo: "🏦 REO",
        specialty_short_sale: "📉 Venda Curta",
        specialty_first_time: "🏠 Comprador de Primeira Viagem",
        specialty_commercial: "🏬 Comercial",
        specialty_investor: "💰 Investidor",
        specialty_renter: "🏠 Locador",
        specialty_landlord: "🏡 Proprietário",
        specialty_senior: "👴 Imóveis para Idosos",
        specialty_military: "🎖️ Relocação Militar",
        specialty_probate: "📜 Inventário",
        specialty_eco: "🌱 Ecológico",
        specialty_international: "🌍 Comprador Internacional",
        specialty_property_mgmt: "🔧 Administração de Propriedades",
        // Notes Field
        notes: "Notas adicionais ou requisitos essenciais...",
        // Submit Button
        submit: "Encontre Meu Agente Especialista Agora!",
        // System Messages
        thank_you: "Obrigado pelo envio! Um agente entrará em contato em breve.",
        ok: "OK",
        submitting: "Enviando...",
        please_fill_name_email: "Por favor, preencha seu nome e e-mail antes de enviar.",
        // Language Selection
        select_language: "Selecione seu idioma preferido",
        lang_english: "Inglês",
        lang_spanish: "Espanhol",
        lang_chinese: "Chinês",
        lang_arabic: "Árabe",
        lang_russian: "Russo",
        lang_portuguese: "Português",
        lang_french: "Francês",
        lang_italian: "Italiano",
        lang_german: "Alemão",
        lang_japanese: "Japonês",
        lang_swedish: "Sueco",
        lang_korean: "Coreano",
        // Footer Links
        propy_link: "Propy",
        propy_text: "Transações imobiliárias simplificadas com tecnologia blockchain.",
        web3_education: "Educação Web3:",
        cyrin: "Cyrin",
        updraft: "Updraft",
        your_courses: "Seus Cursos",
        web3_text: "Aprenda blockchain para imóveis.",
        foreclosure_link: "Recursos Gratuitos para Execução Hipotecária/Venda Curta",
        foreclosure_text: "Obtenha ajuda e informações da NAR.",
        using_crypto: "Usando Criptomoedas"
      },
      fr: {
        title: "Débloquez Votre Propriété en Floride",
        subtitle: "Mise en Relation Gratuite et Rapide avec des Agents par des Experts Licenciés FL et <span class='web3-bold'>Web3</span>",
        // Basic Information Fields
        name: "Nom",
        email: "Email",
        phone: "Téléphone (Optionnel)",
        // Location Fields
        location_header: "Localisation (De → Vers)",
        current_location: "Domicile Actuel",
        desired_location: "Déménagement Souhaité",
        // Client Type Dropdown
        client_type: "Type de Client",
        type_buyer: "🏠 Acheteur",
        type_seller: "📈 Vendeur",
        type_investor: "💰 Investisseur",
        type_renter: "🔑 Locataire",
        // Property Type Dropdown
        property_type: "Type de Propriété",
        single_family: "🏠 Maison Individuelle",
        condo: "🏢 Appartement",
        townhouse: "🏡 Maison de Ville",
        multi_family: "🏘️ Multi-familial",
        commercial: "🏬 Commercial",
        land: "🌳 Terrain",
        vacation_home: "🏖️ Maison de Vacances/Résidence Secondaire",
        senior_living: "👴 Résidence Senior",
        farm_ranch: "🚜 Ferme/Ranch",
        historic_property: "🏛️ Propriété Historique",
        pud: "🏙️ Développement Urbain Planifié",
        // Budget Range
        budget_range: "Fourchette de Budget/Prix ($)",
        // Timeline Dropdown
        timeline: "Calendrier",
        immediate: "⚡ Immédiat",
        "1_3_months": "📅 1-3 Mois",
        "3_6_months": "📆 3-6 Mois",
        "6_plus_months": "🕒 6+ Mois",
        // Specialties & Resources
        specialties: "Spécialités et Ressources",
        specialty_crypto: "🪙 Crypto",
        specialty_luxury: "✨ Luxe",
        specialty_divorce: "⚖️ Divorce",
        specialty_foreclosure: "🏚️ Saisie",
        specialty_reo: "🏦 REO",
        specialty_short_sale: "📉 Vente Courte",
        specialty_first_time: "🏠 Premier Acheteur",
        specialty_commercial: "🏬 Commercial",
        specialty_investor: "💰 Investisseur",
        specialty_renter: "🏠 Locataire",
        specialty_landlord: "🏡 Propriétaire",
        specialty_senior: "👴 Immobilier pour Seniors",
        specialty_military: "🎖️ Relocalisation Militaire",
        specialty_probate: "📜 Succession",
        specialty_eco: "🌱 Écologique",
        specialty_international: "🌍 Acheteur International",
        specialty_property_mgmt: "🔧 Gestion Immobilière",
        // Notes Field
        notes: "Notes supplémentaires ou exigences essentielles...",
        // Submit Button
        submit: "Trouvez Mon Agent Expert Maintenant !",
        // System Messages
        thank_you: "Merci pour votre soumission ! Un agent vous contactera bientôt.",
        ok: "OK",
        submitting: "Envoi en cours...",
        please_fill_name_email: "Veuillez remplir votre nom et email avant de soumettre.",
        // Language Selection
        select_language: "Sélectionnez votre langue préférée",
        lang_english: "Anglais",
        lang_spanish: "Espagnol",
        lang_chinese: "Chinois",
        lang_arabic: "Arabe",
        lang_russian: "Russe",
        lang_portuguese: "Portugais",
        lang_french: "Français",
        lang_italian: "Italien",
        lang_german: "Allemand",
        lang_japanese: "Japonais",
        lang_swedish: "Suédois",
        lang_korean: "Coréen",
        // Footer Links
        propy_link: "Propy",
        propy_text: "Transactions immobilières simplifiées avec la technologie blockchain.",
        web3_education: "Éducation Web3 :",
        cyrin: "Cyrin",
        updraft: "Updraft",
        your_courses: "Vos Cours",
        web3_text: "Apprenez la blockchain pour l'immobilier.",
        foreclosure_link: "Ressources Gratuites sur les Saisies/Ventes Courtes",
        foreclosure_text: "Obtenez de l'aide et des informations de NAR.",
        using_crypto: "Utilisation des Cryptomonnaies"
      },
      it: {
        title: "Sblocca la Tua Proprietà in Florida",
        subtitle: "Abbinamenti Gratuiti e Veloci con Agenti Forniti da Esperti Autorizzati FL e <span class='web3-bold'>Web3</span>",
        // Basic Information Fields
        name: "Nome",
        email: "Email",
        phone: "Telefono (Opzionale)",
        // Location Fields
        location_header: "Posizione (Da → A)",
        current_location: "Casa Attuale",
        desired_location: "Trasferimento Desiderato",
        // Client Type Dropdown
        client_type: "Tipo di Cliente",
        type_buyer: "🏠 Acquirente",
        type_seller: "📈 Venditore",
        type_investor: "💰 Investitore",
        type_renter: "🔑 Affittuario",
        // Property Type Dropdown
        property_type: "Tipo di Proprietà",
        single_family: "🏠 Monofamiliare",
        condo: "🏢 Condominio",
        townhouse: "🏡 Casa a Schiera",
        multi_family: "🏘️ Multifamiliare",
        commercial: "🏬 Commerciale",
        land: "🌳 Terreno",
        vacation_home: "🏖️ Casa Vacanze/Seconda Casa",
        senior_living: "👴 Residenza per Anziani",
        farm_ranch: "🚜 Fattoria/Ranch",
        historic_property: "🏛️ Proprietà Storica",
        pud: "🏙️ Sviluppo Urbano Pianificato",
        // Budget Range
        budget_range: "Fascia di Budget/Prezzo ($)",
        // Timeline Dropdown
        timeline: "Tempistica",
        immediate: "⚡ Immediato",
        "1_3_months": "📅 1-3 Mesi",
        "3_6_months": "📆 3-6 Mesi",
        "6_plus_months": "🕒 6+ Mesi",
        // Specialties & Resources
        specialties: "Specialità e Risorse",
        specialty_crypto: "🪙 Crypto",
        specialty_luxury: "✨ Lusso",
        specialty_divorce: "⚖️ Divorzio",
        specialty_foreclosure: "🏚️ Pignoramento",
        specialty_reo: "🏦 REO",
        specialty_short_sale: "📉 Vendita Breve",
        specialty_first_time: "🏠 Primo Acquirente",
        specialty_commercial: "🏬 Commerciale",
        specialty_investor: "💰 Investitore",
        specialty_renter: "🏠 Affittuario",
        specialty_landlord: "🏡 Proprietario",
        specialty_senior: "👴 Immobili per Anziani",
        specialty_military: "🎖️ Trasferimento Militare",
        specialty_probate: "📜 Successione",
        specialty_eco: "🌱 Ecosostenibile",
        specialty_international: "🌍 Acquirente Internazionale",
        specialty_property_mgmt: "🔧 Gestione Immobiliare",
        // Notes Field
        notes: "Note aggiuntive o requisiti essenziali...",
        // Submit Button
        submit: "Trova il Mio Agente Esperto Ora!",
        // System Messages
        thank_you: "Grazie per l'invio! Un agente ti contatterà presto.",
        ok: "OK",
        submitting: "Invio in corso...",
        please_fill_name_email: "Per favore, compila il tuo nome ed email prima di inviare.",
        // Language Selection
        select_language: "Seleziona la tua lingua preferita",
        lang_english: "Inglese",
        lang_spanish: "Spagnolo",
        lang_chinese: "Cinese",
        lang_arabic: "Arabo",
        lang_russian: "Russo",
        lang_portuguese: "Portoghese",
        lang_french: "Francese",
        lang_italian: "Italiano",
        lang_german: "Tedesco",
        lang_japanese: "Giapponese",
        lang_swedish: "Svedese",
        lang_korean: "Coreano",
        // Footer Links
        propy_link: "Propy",
        propy_text: "Transazioni immobiliari semplificate con tecnologia blockchain.",
        web3_education: "Educazione Web3:",
        cyrin: "Cyrin",
        updraft: "Updraft",
        your_courses: "I Tuoi Corsi",
        web3_text: "Impara la blockchain per il settore immobiliare.",
        foreclosure_link: "Risorse Gratuite su Pignoramenti/Vendite Brevi",
        foreclosure_text: "Ottieni aiuto e informazioni da NAR.",
        using_crypto: "Utilizzo delle Criptovalute"
      },
      de: {
        title: "Erschließen Sie Ihre Immobilie in Florida",
        subtitle: "Kostenlose, schnelle Vermittlung von Maklern durch lizenzierte FL-Experten & <span class='web3-bold'>Web3</span>",
        // Basic Information Fields
        name: "Name",
        email: "E-Mail",
        phone: "Telefon (Optional)",
        // Location Fields
        location_header: "Standort (Von → Nach)",
        current_location: "Aktuelles Zuhause",
        desired_location: "Gewünschter Umzug",
        // Client Type Dropdown
        client_type: "Kundentyp",
        type_buyer: "🏠 Käufer",
        type_seller: "📈 Verkäufer",
        type_investor: "💰 Investor",
        type_renter: "🔑 Mieter",
        // Property Type Dropdown
        property_type: "Immobilientyp",
        single_family: "🏠 Einfamilienhaus",
        condo: "🏢 Eigentumswohnung",
        townhouse: "🏡 Reihenhaus",
        multi_family: "🏘️ Mehrfamilienhaus",
        commercial: "🏬 Gewerbeimmobilie",
        land: "🌳 Grundstück",
        vacation_home: "🏖️ Ferienhaus/Zweitwohnsitz",
        senior_living: "👴 Seniorenwohnen",
        farm_ranch: "🚜 Bauernhof/Ranch",
        historic_property: "🏛️ Historische Immobilie",
        pud: "🏙️ Geplante Stadtentwicklung",
        // Budget Range
        budget_range: "Budget/Preisbereich ($)",
        // Timeline Dropdown
        timeline: "Zeitplan",
        immediate: "⚡ Sofort",
        "1_3_months": "📅 1-3 Monate",
        "3_6_months": "📆 3-6 Monate",
        "6_plus_months": "🕒 6+ Monate",
        // Specialties & Resources
        specialties: "Spezialgebiete & Ressourcen",
        specialty_crypto: "🪙 Krypto",
        specialty_luxury: "✨ Luxus",
        specialty_divorce: "⚖️ Scheidung",
        specialty_foreclosure: "🏚️ Zwangsvollstreckung",
        specialty_reo: "🏦 REO",
        specialty_short_sale: "📉 Kurzverkauf",
        specialty_first_time: "🏠 Erstkauf",
        specialty_commercial: "🏬 Gewerbe",
        specialty_investor: "💰 Investor",
        specialty_renter: "🏠 Mieter",
        specialty_landlord: "🏡 Vermieter",
        // Notes Field
        notes: "Zusätzliche Notizen oder Anforderungen...",
        // Submit Button
        submit: "Finden Sie jetzt meinen Experten-Makler!",
        // System Messages
        thank_you: "Vielen Dank für Ihre Anfrage! Ein Makler wird sich in Kürze bei Ihnen melden.",
        ok: "OK",
        submitting: "Wird gesendet...",
        please_fill_name_email: "Bitte füllen Sie Ihren Namen und Ihre E-Mail-Adresse aus, bevor Sie absenden.",
        // Language Selection
        select_language: "Wählen Sie Ihre bevorzugte Sprache",
        lang_english: "Englisch",
        lang_spanish: "Spanisch",
        lang_chinese: "Chinesisch",
        lang_arabic: "Arabisch",
        lang_russian: "Russisch",
        lang_portuguese: "Portugiesisch",
        lang_french: "Französisch",
        lang_italian: "Italienisch",
        lang_german: "Deutsch",
        lang_japanese: "Japanisch",
        lang_swedish: "Schwedisch",
        lang_korean: "Koreanisch",
        // Footer Links
        propy_link: "Propy",
        propy_text: "Vereinfachte Immobilientransaktionen mit Blockchain-Technologie.",
        web3_education: "Web3-Bildung:",
        cyrin: "Cyrin",
        updraft: "Updraft",
        your_courses: "Ihre Kurse",
        web3_text: "Lernen Sie Blockchain für Immobilien.",
        foreclosure_link: "Kostenlose Ressourcen zu Zwangsvollstreckung/Kurzverkauf",
        foreclosure_text: "Erhalten Sie Hilfe und Informationen von NAR.",
        using_crypto: "Verwendung von Kryptowährungen"
      },
      ja: {
        title: "フロリダの物件を解放しましょう",
        subtitle: "フロリダ州公認の専門家と<span class='web3-bold'>Web3</span>による無料・迅速なエージェントマッチング",
        // Basic Information Fields
        name: "お名前",
        email: "メールアドレス",
        phone: "電話番号（任意）",
        // Location Fields
        location_header: "場所（から → へ）",
        current_location: "現在の家",
        desired_location: "希望の移転先",
        // Client Type Dropdown
        client_type: "クライアントタイプ",
        type_buyer: "🏠 買い手",
        type_seller: "📈 売り手",
        type_investor: "💰 投資家",
        type_renter: "🔑 賃借人",
        // Property Type Dropdown
        property_type: "物件タイプ",
        single_family: "🏠 一戸建て",
        condo: "🏢 マンション",
        townhouse: "🏡 タウンハウス",
        multi_family: "🏘️ マルチファミリー",
        commercial: "🏬 商業用",
        land: "🌳 土地",
        vacation_home: "🏖️ バケーションホーム/セカンドハウス",
        senior_living: "👴 シニア向け住宅",
        farm_ranch: "🚜 農場/牧場",
        historic_property: "🏛️ 歴史的建造物",
        pud: "🏙️ 計画的都市開発",
        // Budget Range
        budget_range: "予算/価格帯 ($)",
        // Timeline Dropdown
        timeline: "タイムライン",
        immediate: "⚡ 即時",
        "1_3_months": "📅 1-3ヶ月",
        "3_6_months": "📆 3-6ヶ月",
        "6_plus_months": "🕒 6+ヶ月",
        // Specialties & Resources
        specialties: "専門分野とリソース",
        specialty_crypto: "🪙 暗号資産",
        specialty_luxury: "✨ 高級物件",
        specialty_divorce: "⚖️ 離婚",
        specialty_foreclosure: "🏚️ 差し押え",
        specialty_reo: "🏦 REO",
        specialty_short_sale: "📉 ショートセール",
        specialty_first_time: "🏠 初回買い手",
        specialty_commercial: "🏬 商業用",
        specialty_investor: "💰 投資家",
        specialty_renter: "🏠 賃借人",
        specialty_landlord: "🏡 家主",
        // Notes Field
        notes: "追加メモや必要条件...",
        // Submit Button
        submit: "専門エージェントを今すぐ探す！",
        // System Messages
        thank_you: "送信ありがとうございます！エージェントがまもなく連絡します。",
        ok: "OK",
        submitting: "送信中...",
        please_fill_name_email: "送信前にお名前とメールアドレスを入力してください。",
        // Language Selection
        select_language: "希望言語を選択してください",
        lang_english: "英語",
        lang_spanish: "スペイン語",
        lang_chinese: "中国語",
        lang_arabic: "アラビア語",
        lang_russian: "ロシア語",
        lang_portuguese: "ポルトガル語",
        lang_french: "フランス語",
        lang_italian: "イタリア語",
        lang_german: "ドイツ語",
        lang_japanese: "日本語",
        lang_swedish: "スウェーデン語",
        lang_korean: "韓国語",
        // Footer Links
        propy_link: "Propy",
        propy_text: "ブロックチェーン技術で合理化された不動産取引。",
        web3_education: "Web3教育:",
        cyrin: "Cyrin",
        updraft: "Updraft",
        your_courses: "あなたのコース",
        web3_text: "不動産のためのブロックチェーンを学ぶ。",
        foreclosure_link: "差し押え/ショートセールの無料リソース",
        foreclosure_text: "NARからのヘルプと情報を入手。",
        using_crypto: "暗号資産の使用"
      },
      sv: {
        title: "Lås upp din fastighet i Florida",
        subtitle: "Gratis, snabb mäklaranpassning från licensierade FL-experter och <span class='web3-bold'>Web3</span>",
        // Basic Information Fields
        name: "Namn",
        email: "E-post",
        phone: "Telefon (Valfritt)",
        // Location Fields
        location_header: "Plats (Från → Till)",
        current_location: "Nuvarande hem",
        desired_location: "Önskad flytt",
        // Client Type Dropdown
        client_type: "Kundtyp",
        type_buyer: "🏠 Köpare",
        type_seller: "📈 Säljare",
        type_investor: "💰 Investerare",
        type_renter: "🔑 Hyresgäst",
        // Property Type Dropdown
        property_type: "Fastighetstyp",
        single_family: "🏠 Enfamiljshus",
        condo: "🏢 Bostadsrätt",
        townhouse: "🏡 Radhus",
        multi_family: "🏘️ Flerfamiljshus",
        commercial: "🏬 Kommersiell",
        land: "🌳 Mark",
        vacation_home: "🏖️ Semesterhus/Andra Bostad",
        senior_living: "👴 Seniorboende",
        farm_ranch: "🚜 Gård/Ranch",
        historic_property: "🏛️ Historisk Fastighet",
        pud: "🏙️ Planerad Stadsutveckling",
        // Budget Range
        budget_range: "Budget/Prisintervall ($)",
        // Timeline Dropdown
        timeline: "Tidsram",
        immediate: "⚡ Omedelbart",
        "1_3_months": "📅 1-3 Månader",
        "3_6_months": "📆 3-6 Månader",
        "6_plus_months": "🕒 6+ Månader",
        // Specialties & Resources
        specialties: "Specialiteter & Resurser",
        specialty_crypto: "🪙 Krypto",
        specialty_luxury: "✨ Lyx",
        specialty_divorce: "⚖️ Skilsmässa",
        specialty_foreclosure: "🏚️ Utmatning",
        specialty_reo: "🏦 REO",
        specialty_short_sale: "📉 Kort försäljning",
        specialty_first_time: "🏠 Förstagångsköpare",
        specialty_commercial: "🏬 Kommersiell",
        specialty_investor: "💰 Investerare",
        specialty_renter: "🏠 Hyresgäst",
        specialty_landlord: "🏡 Hyresvärd",
        // Notes Field
        notes: "Ytterligare anteckningar eller måsten...",
        // Submit Button
        submit: "Hitta min expertmäklare nu!",
        // System Messages
        thank_you: "Tack för din inskickning! En mäklare kommer att kontakta dig snart.",
        ok: "OK",
        submitting: "Skickar...",
        please_fill_name_email: "Vänligen fyll i ditt namn och e-post innan du skickar.",
        // Language Selection
        select_language: "Välj ditt föredragna språk",
        lang_english: "Engelska",
        lang_spanish: "Spanska",
        lang_chinese: "Kinesiska",
        lang_arabic: "Arabiska",
        lang_russian: "Ryska",
        lang_portuguese: "Portugisiska",
        lang_french: "Franska",
        lang_italian: "Italienska",
        lang_german: "Tyska",
        lang_japanese: "Japanska",
        lang_swedish: "Svenska",
        lang_korean: "Koreanska",
        // Footer Links
        propy_link: "Propy",
        propy_text: "Effektiviserade fastighets- och titeltransaktioner med blockkedjeteknik.",
        web3_education: "Web3-utbildning:",
        cyrin: "Cyrin",
        updraft: "Updraft",
        your_courses: "Dina kurser",
        web3_text: "Lär dig blockkedja för fastigheter.",
        foreclosure_link: "Gratis resurser för utmatning/kort försäljning",
        foreclosure_text: "Få hjälp och information från NAR.",
        using_crypto: "Använda kryptovaluta"
      },
      ko: {
        title: "플로리다 부동산을 활용하세요",
        subtitle: "플로리다 주 라이센스 전문가와 <span class='web3-bold'>Web3</span>이 제공하는 무료, 신속한 에이전트 매칭",
        // Basic Information Fields
        name: "이름",
        email: "이메일",
        phone: "전화번호 (선택사항)",
        // Location Fields
        location_header: "위치 (에서 → 로)",
        current_location: "현재 집",
        desired_location: "원하는 이사지",
        // Client Type Dropdown
        client_type: "고객 유형",
        type_buyer: "🏠 구매자",
        type_seller: "📈 판매자",
        type_investor: "💰 투자자",
        type_renter: "🔑 임대인",
        // Property Type Dropdown
        property_type: "부동산 유형",
        single_family: "🏠 단독주택",
        condo: "🏢 콘도",
        townhouse: "🏡 타운하우스",
        multi_family: "🏘️ 다가구",
        commercial: "🏬 상업용",
        land: "🌳 토지",
        vacation_home: "🏖️ 휴가용 주택/세컨드 홈",
        senior_living: "👴 시니어 리빙",
        farm_ranch: "🚜 농장/목장",
        historic_property: "🏛️ 역사적 건물",
        pud: "🏙️ 계획된 도시 개발",
        // Budget Range
        budget_range: "예산/가격 범위 ($)",
        // Timeline Dropdown
        timeline: "일정",
        immediate: "⚡ 즉시",
        "1_3_months": "📅 1-3개월",
        "3_6_months": "📆 3-6개월",
        "6_plus_months": "🕒 6+개월",
        // Specialties & Resources
        specialties: "전문 분야 및 자원",
        specialty_crypto: "🪙 암호화폐",
        specialty_luxury: "✨ 고급",
        specialty_divorce: "⚖️ 이혼",
        specialty_foreclosure: "🏚️ 경매",
        specialty_reo: "🏦 REO",
        specialty_short_sale: "📉 쇼트세일",
        specialty_first_time: "🏠 처음 구매자",
        specialty_commercial: "🏬 상업용",
        specialty_investor: "💰 투자자",
        specialty_renter: "🏠 임대인",
        specialty_landlord: "🏡 임대인",
        // Notes Field
        notes: "추가 메모 또는 필수 사항...",
        // Submit Button
        submit: "지금 전문 에이전트 찾기!",
        // System Messages
        thank_you: "제출해 주셔서 감사합니다! 에이전트가 곧 연락드릴 것입니다.",
        ok: "OK",
        submitting: "제출 중...",
        please_fill_name_email: "제출하기 전에 이름과 이메일을 입력해주세요.",
        // Language Selection
        select_language: "원하는 언어를 선택하세요",
        lang_english: "영어",
        lang_spanish: "스페인어",
        lang_chinese: "중국어",
        lang_arabic: "아랍어",
        lang_russian: "러시아어",
        lang_portuguese: "포르투칼어",
        lang_french: "프랑스어",
        lang_italian: "이탈리아어",
        lang_german: "독일어",
        lang_japanese: "일본어",
        lang_swedish: "스웨덴어",
        lang_korean: "한국어",
        // Footer Links
        propy_link: "Propy",
        propy_text: "블록체인 기술을 활용한 간소화된 부동산 거래.",
        web3_education: "Web3 교육:",
        cyrin: "Cyrin",
        updraft: "Updraft",
        your_courses: "나의 강좌",
        web3_text: "부동산을 위한 블록체인 학습.",
        foreclosure_link: "무료 경매/쇼트세일 자원",
        foreclosure_text: "NAR에서 도움과 정보를 받으세요.",
        using_crypto: "암호화폐 사용"
      }
    };
    // Initialize the form with English as default language
    updateFormLanguage('en');

    function updateFormLanguage(lang) {
      document.querySelectorAll('[data-lang]').forEach(element => {
        const key = element.getAttribute('data-lang');
        if (translations[lang] && translations[lang][key]) {
          if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
            element.placeholder = translations[lang][key];
          } else {
            element.innerHTML = translations[lang][key];
          }
        }
      });
    }

    // Function to change language
    function changeLanguage(lang) {
      updateFormLanguage(lang);
      // Close the dropdown after selecting a language
      const dropdown = document.querySelector('.language-dropdown');
      if (dropdown) {
        dropdown.style.display = 'none';
      }
      // You could also store the language preference in localStorage if needed
      // localStorage.setItem('preferredLanguage', lang);
    }
    
    // Function to close all language dropdowns
    function closeAllLanguageDropdowns() {
      document.querySelectorAll('.language-dropdown').forEach(dropdown => {
        dropdown.style.display = 'none';
      });
    }

    // Add event listener for the More Languages dropdown toggle
    document.addEventListener('DOMContentLoaded', function() {
      const moreLanguages = document.querySelector('.more-languages');
      
      // Toggle dropdown when clicking on More Languages
      if (moreLanguages) {
        moreLanguages.addEventListener('click', function(e) {
          e.stopPropagation(); // Prevent event from reaching document
          // Only toggle if clicking on the More Languages text itself, not its children
          if (e.target === this) {
            const dropdown = this.querySelector('.language-dropdown');
            const isVisible = dropdown.style.display === 'block';
            closeAllLanguageDropdowns(); // Close all dropdowns first
            if (!isVisible) {
              dropdown.style.display = 'block';
            }
          }
        });
      }
      
      // Close dropdown when clicking anywhere else on the document
      document.addEventListener('click', function() {
        closeAllLanguageDropdowns();
      });
      
      // Prevent clicks inside the dropdown from closing it
      document.querySelectorAll('.language-dropdown').forEach(dropdown => {
        dropdown.addEventListener('click', function(e) {
          e.stopPropagation();
        });
      });
    });
  </script>
  
  <!-- Custom Select Overlay -->
  <div id="selectOverlay" class="select-overlay">
    <div class="select-container">
      <div class="select-header">
        <h3 id="selectTitle"></h3>
      </div>
      <div id="selectSubtitle" class="select-subtitle"></div>
      <div id="selectOptions" class="options-container"></div>
      <div class="select-actions">
        <button class="select-done">Done</button>
      </div>
    </div>
  </div>
  
  <script>
  // Custom Select Functionality
  class CustomSelect {
    constructor(selectElement) {
      this.select = selectElement;
      this.isMultiple = selectElement.multiple;
      this.options = Array.from(selectElement.querySelectorAll('option')).filter(opt => opt.value);
      this.button = document.createElement('button');
      this.button.className = 'custom-select-button';
      this.button.type = 'button';
      
      this.updateButton();
      
      this.select.parentNode.insertBefore(this.button, this.select);
      this.select.style.display = 'none';
      
      this.button.addEventListener('click', (e) => {
        e.stopPropagation();
        this.toggle();
      });
    }
    
    updateButton() {
      const selectedOptions = this.options.filter(opt => opt.selected);
      const placeholder = this.select.querySelector('option[value=""][disabled]');
      const defaultText = placeholder ? placeholder.textContent : 'Select...';
      
      if (selectedOptions.length === 0) {
        this.button.innerHTML = `
          <span class="selected-value">
            <span class="selected-text">${defaultText}</span>
          </span>
          <span class="dropdown-arrow">▼</span>
        `;
      } else if (this.isMultiple && this.select.id !== 'timeline') {
        const tags = selectedOptions.map(option => {
          const icon = option.textContent.match(/\p{Emoji}/u)?.[0] || '';
          const label = option.textContent.replace(/\p{Emoji}/u, '').trim();
          return `
            <span class="selected-tag">
              <span class="tag-icon">${icon}</span>
              <span class="tag-label">${label}</span>
              <span class="tag-remove" data-value="${option.value}">×</span>
            </span>
          `;
        }).join('');
        
        this.button.innerHTML = `
          <span class="selected-value">
            ${tags}
          </span>
          <span class="dropdown-arrow">▼</span>
        `;
        
        // Add remove handlers
        this.button.querySelectorAll('.tag-remove').forEach(btn => {
          btn.addEventListener('click', (e) => {
            e.stopPropagation();
            const value = btn.dataset.value;
            const option = this.options.find(opt => opt.value === value);
            if (option) {
              option.selected = false;
              this.updateButton();
              
              // Trigger change event
              const event = new Event('change', { bubbles: true });
              this.select.dispatchEvent(event);
            }
          });
        });
      } else {
        // For single select (including timeline)
        const option = selectedOptions[0] || this.options[0];
        const icon = option.textContent.match(/\p{Emoji}/u)?.[0] || '';
        const label = option.textContent.replace(/\p{Emoji}/u, '').trim();
        
        this.button.innerHTML = `
          <span class="selected-value">
            <span class="selected-icon">${icon}</span>
            <span class="selected-text">${label}</span>
          </span>
          <span class="dropdown-arrow">▼</span>
        `;
        
        // Update the select element's value
        this.select.value = option.value;
      }
    }
    
    toggle() {
      if (document.activeSelect && document.activeSelect !== this) {
        document.activeSelect.close();
      }
      
      if (this.isOpen) {
        this.close();
      } else {
        this.open();
      }
    }
    
    open() {
      const overlay = document.getElementById('selectOverlay');
      const optionsContainer = document.getElementById('selectOptions');
      const title = document.getElementById('selectTitle');
      const subtitle = document.getElementById('selectSubtitle');
      
      title.textContent = this.select.getAttribute('data-placeholder') || 'Select Option';
      optionsContainer.innerHTML = '';
      
      // Only show subtitle for multi-select dropdowns (client type and property type)
      if (this.isMultiple && this.select.id !== 'timeline') {
        subtitle.style.display = 'block';
        subtitle.textContent = 'Select all that apply';
      } else {
        subtitle.style.display = 'none';
      }
      
      this.options.forEach(option => {
        const icon = option.textContent.match(/\p{Emoji}/u)?.[0] || '';
        const label = option.textContent.replace(icon, '').trim();
        
        const optionEl = document.createElement('div');
        optionEl.className = `option-item ${option.selected ? 'selected' : ''}`;
        optionEl.dataset.value = option.value;
        optionEl.innerHTML = `
          <div class="option-icon">${icon}</div>
          <div class="option-label">${label}</div>
        `;
        
        optionEl.addEventListener('click', () => {
          if (this.isMultiple) {
            option.selected = !option.selected;
            optionEl.classList.toggle('selected', option.selected);
            this.updateButton();
          } else {
            // For single select, close after selection
            this.select.value = option.value;
            this.updateButton();
            this.close();
          }
          
          // Trigger change event
          const event = new Event('change', { bubbles: true });
          this.select.dispatchEvent(event);
        });
        
        optionsContainer.appendChild(optionEl);
      });
      
      overlay.classList.add('active');
      document.activeSelect = this;
      this.isOpen = true;
    }
    
    close() {
      const overlay = document.getElementById('selectOverlay');
      overlay.classList.remove('active');
      this.isOpen = false;
    }
  }

  // Initialize custom selects when DOM is loaded
  document.addEventListener('DOMContentLoaded', () => {
    // Add data-placeholder attributes to original selects
    document.getElementById('clientType').setAttribute('data-placeholder', 'Client Type');
    document.getElementById('propertyType').setAttribute('data-placeholder', 'Property Type');
    document.getElementById('timeline').setAttribute('data-placeholder', 'Timeline');
    document.getElementById('referralSource').setAttribute('data-placeholder', 'How Did You Find Us?');
    
    // Make clientType and propertyType multiple selects
    const clientTypeSelect = document.getElementById('clientType');
    const propertyTypeSelect = document.getElementById('propertyType');
    clientTypeSelect.multiple = true;
    propertyTypeSelect.multiple = true;
    
    // Initialize all custom selects
    const selects = document.querySelectorAll('select#clientType, select#propertyType, select#timeline, select#referralSource');
    selects.forEach(select => new CustomSelect(select));
    
    // Close select when clicking outside or Done button
    const overlay = document.getElementById('selectOverlay');
    overlay.addEventListener('click', (e) => {
      if (e.target === overlay || e.target.classList.contains('select-done')) {
        if (document.activeSelect) {
          document.activeSelect.close();
        }
      }
    });
  });
  </script>

  <style>
  /* Custom Select Overlay */
  .select-container {
    background: rgba(26, 32, 44, 0.95);
    border: 1px solid #2d3748;
    border-radius: 12px;
    padding: 20px;
    width: 90%;
    max-width: 400px;
    max-height: 80vh;
    overflow-y: auto;
    transform: translateY(20px);
    transition: transform 0.2s ease;
    position: relative;
  }

  .select-header {
    position: relative;
    margin: 0 auto 10px;
    text-align: center;
    width: 100%;
    padding: 0 30px;
  }

  .select-subtitle {
    color: #a0aec0;
    font-size: 0.8em;
    margin: 0 auto 15px;
    text-align: center;
    width: 100%;
    padding: 0 10px;
    box-sizing: border-box;
  }

  .select-actions {
    margin-top: 15px;
    text-align: right;
  }

  .select-done {
    background: #26c6da;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 0.9em;
    transition: background 0.2s;
  }

  .select-done:hover {
    background: #22b3c7;
  }

  .close-button {
    position: absolute;
    top: 50%;
    right: 5px;
    transform: translateY(-50%);
    background: #2d3748;
    border: 1px solid #4a5568;
    color: #e2e8f0;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-size: 16px;
    line-height: 1;
    padding: 0;
  }

  .close-button:hover {
    background: #4a5568;
  }

  .select-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.7);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s ease;
    backdrop-filter: blur(5px);
  }

  .select-overlay.active {
    opacity: 1;
    pointer-events: auto;
  }

  .select-options {
    max-height: 50vh;
    overflow-y: auto;
    padding: 10px 0;
  }

  .select-overlay.active .select-container {
    transform: translateY(0);
  }

  .select-options h3 {
    color: #e2e8f0;
    margin-bottom: 15px;
    text-align: center;
    font-size: 1.1em;
  }

  .options-container {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 8px;
    margin-top: 15px;
    max-width: 100%;
  }
  
  .option-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 10px 5px;
    background: rgba(45, 55, 72, 0.5);
    border: 1px solid #4a5568;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s ease;
    height: 100%;
    min-height: 70px;
  }

  .option-item:hover {
    background: rgba(56, 65, 85, 0.8);
    border-color: #26c6da;
  }

  .option-item.selected {
    background: rgba(38, 198, 218, 0.25);
    border-color: #26c6da;
    box-shadow: 0 0 0 2px rgba(38, 198, 218, 0.3);
  }

  .option-icon {
    font-size: 20px;
    margin-bottom: 6px;
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(38, 198, 218, 0.1);
    border-radius: 50%;
    border: 1px solid rgba(38, 198, 218, 0.3);
  }

  .option-label {
    font-size: 0.7em;
    color: #e2e8f0;
    text-align: center;
    line-height: 1.2;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    width: 100%;
    padding: 0 2px;
  }

  .custom-select-button {
    width: 100%;
    padding: 12px 16px;
    background: rgba(45, 55, 72, 0.7);
    border: 1px solid #4a5568;
    border-radius: 6px;
    color: #e2e8f0;
    font-size: 0.95em;
    text-align: left;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: all 0.2s ease;
  }

  .custom-select-button:hover {
    background: rgba(56, 65, 85, 0.8);
    border-color: #26c6da;
  }

  .custom-select-button .selected-value {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: 6px;
    text-align: left;
    width: 100%;
  }
  
  .selected-tag {
    display: inline-flex;
    align-items: center;
    background: rgba(56, 65, 85, 0.5);
    border-radius: 4px;
    padding: 2px 6px;
    font-size: 0.85em;
    gap: 4px;
  }
  
  .tag-remove {
    cursor: pointer;
    padding: 0 2px;
    font-size: 1.1em;
    line-height: 1;
  }
  
  .tag-remove:hover {
    color: #f56565;
  }

  .custom-select-button .selected-icon {
    font-size: 1.1em;
    display: inline-block;
    min-width: 1.5em;
  }

  .custom-select-button .dropdown-arrow {
    font-size: 0.7em;
    opacity: 0.7;
    transition: transform 0.2s ease;
  }

  .custom-select-button.active .dropdown-arrow {
    transform: rotate(180deg);
  }
  </style>
  <script>
  // Cache for BTC price to reduce API calls
  let btcPrice = null;
  let lastPriceUpdate = 0;
  const PRICE_CACHE_DURATION = 5 * 60 * 1000; // 5 minutes

  // Function to fetch current BTC price from CoinGecko
  async function fetchBTCPrice() {
    const now = Date.now();
    
    // Return cached price if it's still fresh
    if (btcPrice && (now - lastPriceUpdate) < PRICE_CACHE_DURATION) {
      return btcPrice;
    }

    try {
      const response = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd');
      const data = await response.json();
      
      if (data && data.bitcoin && data.bitcoin.usd) {
        btcPrice = data.bitcoin.usd;
        lastPriceUpdate = now;
        return btcPrice;
      }
      
      // Fallback to a reasonable default if API fails
      console.warn('Using fallback BTC price');
      return 60000; // Fallback price in case API fails
    } catch (error) {
      console.error('Error fetching BTC price:', error);
      return 60000; // Fallback price in case of error
    }
  }

  // Function to update BTC equivalent display
  async function updateBTCEquivalent(usdAmount) {
    const btcPrice = await fetchBTCPrice();
    const btcValue = usdAmount / btcPrice;
    const btcDisplay = btcValue >= 0.01 ? 
      btcValue.toFixed(2) : 
      btcValue.toFixed(6);
    
    const btcAmount = document.getElementById('btc-amount');
    if (btcAmount) {
      btcAmount.textContent = `₿${btcDisplay}`;
    }
    
    // Also update the monthly payment in Satoshis
    updateSatsEquivalent();
  }
  
  // Function to make BTC amount editable
  function makeBtcEditable() {
    const btcElement = document.getElementById('btc-amount');
    const originalBtc = btcElement.textContent;
    
    // Create an input element
    const input = document.createElement('input');
    input.type = 'text';
    input.value = originalBtc.replace('₿', ''); // Remove BTC symbol
    input.style.width = (originalBtc.length * 10) + 'px';
    input.style.border = '1px solid #f7931a';
    input.style.borderRadius = '4px';
    input.style.padding = '2px 5px';
    input.style.color = '#f7931a';
    input.style.background = 'rgba(247, 147, 26, 0.1)';
    input.style.textAlign = 'center';
    input.style.fontSize = '18px';
    input.style.fontWeight = '600';
    input.style.maxWidth = '150px';
    
    // Replace the BTC text with the input
    btcElement.textContent = '';
    btcElement.appendChild(input);
    input.focus();
    input.select();
    
    // Handle input submission
    async function handleSubmit() {
      const value = input.value.replace(/[^0-9.]/g, ''); // Remove non-digits except decimal point
      if (value) {
        const btcAmount = parseFloat(value);
        if (btcAmount > 0) {
          // Get current BTC price
          const btcPrice = await fetchBTCPrice();
          
          // Calculate USD equivalent
          const usdAmount = btcAmount * btcPrice;
          
          // Update the slider and all calculations
          document.getElementById('budget').value = usdAmount;
          
          // Update the display with the exact BTC amount the user entered
          btcElement.textContent = `₿${btcAmount}`;
          
          // Update the budget visualization with the new home price
          updateBudgetVisualization(usdAmount, true); // Pass true to prevent recursive update
          
          // Calculate and update monthly payment
          const homeValue = usdAmount;
          const downPaymentPercent = 0.05; // 5% down payment
          const loanAmount = homeValue * (1 - downPaymentPercent); // 95% of home value
          const interestRate = 0.07; // 7.0% annual
          const loanTermYears = 30;
          const monthlyRate = interestRate / 12;
          const numberOfPayments = loanTermYears * 12;
          
          // Calculate principal and interest payment
          const principalAndInterest = loanAmount * 
            (monthlyRate * Math.pow(1 + monthlyRate, numberOfPayments)) / 
            (Math.pow(1 + monthlyRate, numberOfPayments) - 1);
          
          // Calculate property tax (0.82% of home value annually)
          const monthlyTax = homeValue * (0.0082 / 12);
          
          // Calculate PMI (1% of loan amount annually)
          const monthlyPMI = loanAmount * (0.01 / 12);
          
          // Calculate insurance ($2,325/year for a $300k home, scaled proportionally)
          const monthlyInsurance = (2325 / 12) * (homeValue / 300000);
          
          // Calculate total monthly payment
          const monthlyPayment = principalAndInterest + monthlyTax + monthlyPMI + monthlyInsurance;
          
          // Update the monthly payment display
          document.getElementById('monthly-payment').textContent = '$' + Math.round(monthlyPayment).toLocaleString();
          
          // Update the Satoshi equivalent for the monthly payment
          updateSatsEquivalent();
          return; // Exit early to prevent restoring original BTC
        }
      }
      
      // If we get here, there was an error or no valid input
      // Restore original display
      btcElement.textContent = originalBtc;
      btcElement.style.cursor = 'pointer';
    }
    
    // Handle Enter key or focus out
    input.addEventListener('keydown', function(e) {
      if (e.key === 'Enter') {
        handleSubmit();
      } else if (e.key === 'Escape') {
        btcElement.textContent = originalBtc;
        btcElement.style.cursor = 'pointer';
      }
    });
    
    input.addEventListener('blur', handleSubmit);
  }
  
  // Function to update Satoshi equivalent for monthly payment
  async function updateSatsEquivalent() {
    const monthlyPayment = parseFloat(document.getElementById('monthly-payment').textContent.replace(/[^0-9.]/g, ''));
    const btcPrice = await fetchBTCPrice();
    
    // Calculate Satoshi value (1 BTC = 100,000,000 Satoshis)
    const satoshiValue = (monthlyPayment / btcPrice) * 100000000;
    
    // Format the display
    const satsDisplay = satoshiValue >= 1000000 ?
      `${(satoshiValue / 1000000).toFixed(2)}M` : // Display in millions if large
      satoshiValue >= 1000 ?
      `${(satoshiValue / 1000).toFixed(1)}K` : // Display in thousands if medium
      Math.round(satoshiValue); // Display as whole number if small
    
    const satsAmount = document.getElementById('sats-amount');
    if (satsAmount) {
      satsAmount.textContent = `₿${satsDisplay} sats`;
    }
  }
  
  // Function to make Satoshi amount editable
  function makeSatsEditable() {
    const satsElement = document.getElementById('sats-amount');
    const originalSats = satsElement.textContent;
    
    // Create an input element
    const input = document.createElement('input');
    input.type = 'text';
    // Extract the numeric part, removing the BTC symbol and 'sats'
    let numericPart = originalSats.replace('₿', '').replace(' sats', '');
    // Handle K and M suffixes
    if (numericPart.includes('M')) {
      numericPart = parseFloat(numericPart.replace('M', '')) * 1000000;
    } else if (numericPart.includes('K')) {
      numericPart = parseFloat(numericPart.replace('K', '')) * 1000;
    }
    input.value = numericPart;
    
    input.style.width = '80px';
    input.style.border = '1px solid #f7931a';
    input.style.borderRadius = '4px';
    input.style.padding = '2px 5px';
    input.style.color = '#f7931a';
    input.style.background = 'rgba(247, 147, 26, 0.1)';
    input.style.textAlign = 'center';
    input.style.fontSize = '11px';
    input.style.fontWeight = '600';
    
    // Replace the Sats text with the input
    satsElement.textContent = '';
    satsElement.appendChild(input);
    input.focus();
    input.select();
    
    // Handle input submission
    async function handleSubmit() {
      const value = input.value.replace(/[^0-9.]/g, ''); // Remove non-digits except decimal point
      if (value) {
        const satsAmount = parseFloat(value);
        if (satsAmount > 0) {
          // Get current BTC price
          const btcPrice = await fetchBTCPrice();
          
          // Calculate USD equivalent for monthly payment
          const monthlyPayment = (satsAmount * btcPrice) / 100000000;
          
          // Update the monthly payment display
          document.getElementById('monthly-payment').textContent = '$' + Math.round(monthlyPayment).toLocaleString();
          
          // Calculate home price based on the monthly payment
          const homePrice = calculateHomePriceFromMonthlyPayment(monthlyPayment);
          
          // Update the slider and all calculations
          document.getElementById('budget').value = homePrice;
          
          // Format the display for satoshis
          let satsDisplay;
          if (satsAmount >= 1000000) {
            satsDisplay = `${(satsAmount / 1000000).toFixed(2)}M`;
          } else if (satsAmount >= 1000) {
            satsDisplay = `${(satsAmount / 1000).toFixed(1)}K`;
          } else {
            satsDisplay = Math.round(satsAmount);
          }
          
          // Update the display with the formatted satoshi amount
          satsElement.textContent = `₿${satsDisplay} sats`;
          
          // Update the budget output display
          const formattedHomePrice = Math.round(homePrice).toLocaleString();
          document.getElementById('budget-output').textContent = '$' + formattedHomePrice;
          
          // Update the BTC amount display
          const btcValue = homePrice / btcPrice;
          const btcDisplay = btcValue >= 0.01 ? btcValue.toFixed(2) : btcValue.toFixed(6);
          document.getElementById('btc-amount').textContent = `₿${btcDisplay}`;
          
          return; // Exit early to prevent restoring original sats
        }
      }
      
      // If we get here, there was an error or no valid input
      // Restore original display
      satsElement.textContent = originalSats;
      satsElement.style.cursor = 'pointer';
    }
    
    // Handle Enter key or focus out
    input.addEventListener('keydown', function(e) {
      if (e.key === 'Enter') {
        handleSubmit();
      } else if (e.key === 'Escape') {
        satsElement.textContent = originalSats;
        satsElement.style.cursor = 'pointer';
      }
    });
    
    input.addEventListener('blur', handleSubmit);
  }
  
  // Tooltip functions removed as they're no longer needed

  // Update BTC equivalent when budget changes
  document.getElementById('budget').addEventListener('input', (e) => {
    const usdAmount = parseFloat(e.target.value.replace(/[^0-9.]/g, ''));
    updateBTCEquivalent(usdAmount);
  });

  // Initial update
  document.addEventListener('DOMContentLoaded', () => {
    updateBTCEquivalent(300000); // Initial value
  });
  </script>
  </body>
</html>
